<!DOCTYPE html>



  


<html class="theme-next mist use-motion" lang="zh-Hans">
<head><meta name="generator" content="Hexo 3.8.0">
  <meta charset="UTF-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
<meta name="theme-color" content="#222">









<meta http-equiv="Cache-Control" content="no-transform">
<meta http-equiv="Cache-Control" content="no-siteapp">
















  
  
  <link href="/lib/fancybox/source/jquery.fancybox.css?v=2.1.5" rel="stylesheet" type="text/css">




  
  
  
  

  
    
    
  

  

  

  

  

  
    
    
    <link href="//fonts.googleapis.com/css?family=Lato:300,300italic,400,400italic,700,700italic&subset=latin,latin-ext" rel="stylesheet" type="text/css">
  






<link href="/lib/font-awesome/css/font-awesome.min.css?v=4.6.2" rel="stylesheet" type="text/css">

<link href="/css/main.css?v=5.1.2" rel="stylesheet" type="text/css">


  <meta name="keywords" content="大前端,JavaScript,">








  <link rel="shortcut icon" type="image/x-icon" href="/images/logo.jpg?v=5.1.2">






<meta name="description" content="文章概述 本文主要介绍使用Javascript的笔记，涵盖ES6语法（ECMAScript标准委员会会在每年的6月份正式发布一次规范的修订）。">
<meta name="keywords" content="大前端,JavaScript">
<meta property="og:type" content="article">
<meta property="og:title" content="JavaScript笔记">
<meta property="og:url" content="http://liusong.site/2016/01/16/web/JavaScript/JavaScript笔记/index.html">
<meta property="og:site_name" content="挑灯看剑">
<meta property="og:description" content="文章概述 本文主要介绍使用Javascript的笔记，涵盖ES6语法（ECMAScript标准委员会会在每年的6月份正式发布一次规范的修订）。">
<meta property="og:locale" content="zh-Hans">
<meta property="og:image" content="https://raw.githubusercontent.com/cnlius/GP-Resource/master/Web/browser/browser-analysis.png">
<meta property="og:updated_time" content="2019-02-19T07:16:51.073Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="JavaScript笔记">
<meta name="twitter:description" content="文章概述 本文主要介绍使用Javascript的笔记，涵盖ES6语法（ECMAScript标准委员会会在每年的6月份正式发布一次规范的修订）。">
<meta name="twitter:image" content="https://raw.githubusercontent.com/cnlius/GP-Resource/master/Web/browser/browser-analysis.png">



<script type="text/javascript" id="hexo.configurations">
  var NexT = window.NexT || {};
  var CONFIG = {
    root: '/',
    scheme: 'Mist',
    version: '5.1.2',
    sidebar: {"position":"left","display":"post","offset":12,"offset_float":12,"b2t":false,"scrollpercent":false,"onmobile":false},
    fancybox: true,
    tabs: true,
    motion: {"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn"}},
    duoshuo: {
      userId: '0',
      author: '博主'
    },
    algolia: {
      applicationID: '',
      apiKey: '',
      indexName: '',
      hits: {"per_page":10},
      labels: {"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}
    }
  };
</script>



  <link rel="canonical" href="http://liusong.site/2016/01/16/web/JavaScript/JavaScript笔记/">





  <title>JavaScript笔记 | 挑灯看剑</title>
  








</head>

<body itemscope="" itemtype="http://schema.org/WebPage" lang="zh-Hans">

  
  
    
  

  <div class="container sidebar-position-left page-post-detail">
    <div class="headband"></div>

    <a href="https://github.com/ethancalc"><img style="position: absolute; top: 0; left: 0; border: 0;" src="https://camo.githubusercontent.com/121cd7cbdc3e4855075ea8b558508b91ac463ac2/68747470733a2f2f73332e616d617a6f6e6177732e636f6d2f6769746875622f726962626f6e732f666f726b6d655f6c6566745f677265656e5f3030373230302e706e67" alt="Fork me on GitHub" data-canonical-src="https://s3.amazonaws.com/github/ribbons/forkme_left_green_007200.png"></a>

    <header id="header" class="header" itemscope="" itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-wrapper">
  <div class="site-meta ">
    

    <div class="custom-logo-site-title">
      <a href="/" class="brand" rel="start">
        <span class="logo-line-before"><i></i></span>
        <span class="site-title">挑灯看剑</span>
        <span class="logo-line-after"><i></i></span>
      </a>
    </div>
      
        <p class="site-subtitle">Personal Blog</p>
      
  </div>

  <div class="site-nav-toggle">
    <button>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
    </button>
  </div>
</div>

<nav class="site-nav">
  

  
    <ul id="menu" class="menu">
      
        
        <li class="menu-item menu-item-home">
          <a href="/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-home"></i> <br>
            
            首页
          </a>
        </li>
      
        
        <li class="menu-item menu-item-archives">
          <a href="/archives/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-archive"></i> <br>
            
            文章列表
          </a>
        </li>
      
        
        <li class="menu-item menu-item-categories">
          <a href="/categories/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-th"></i> <br>
            
            分类
          </a>
        </li>
      
        
        <li class="menu-item menu-item-about">
          <a href="/about.html" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-user"></i> <br>
            
            我的简历
          </a>
        </li>
      

      
        <li class="menu-item menu-item-search">
          
            <a href="javascript:;" class="popup-trigger">
          
            
              <i class="menu-item-icon fa fa-search fa-fw"></i> <br>
            
            搜索
          </a>
        </li>
      
    </ul>
  

  
    <div class="site-search">
      
  <div class="popup search-popup local-search-popup">
  <div class="local-search-header clearfix">
    <span class="search-icon">
      <i class="fa fa-search"></i>
    </span>
    <span class="popup-btn-close">
      <i class="fa fa-times-circle"></i>
    </span>
    <div class="local-search-input-wrapper">
      <input autocomplete="off" placeholder="搜索..." spellcheck="false" type="text" id="local-search-input">
    </div>
  </div>
  <div id="local-search-result"></div>
</div>



    </div>
  
</nav>



 </div>
    </header>

    <main id="main" class="main">
      <div class="main-inner">
        <div class="content-wrap">
          <div id="content" class="content">
            

  <div id="posts" class="posts-expand">
    

  

  
  
  

  <article class="post post-type-normal" itemscope="" itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://liusong.site/2016/01/16/web/JavaScript/JavaScript笔记/">

    <span hidden itemprop="author" itemscope="" itemtype="http://schema.org/Person">
      <meta itemprop="name" content="ethancalc">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/uploads/images/head/avatar.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope="" itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="挑灯看剑">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">JavaScript笔记</h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2016-01-16T00:00:00+08:00">
                2016-01-16
              </time>
            

            

            
          </span>

          
            <span class="post-category">
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope="" itemtype="http://schema.org/Thing">
                  <a href="/categories/大前端/" itemprop="url" rel="index">
                    <span itemprop="name">大前端</span>
                  </a>
                </span>

                
                
                  ， 
                
              
                <span itemprop="about" itemscope="" itemtype="http://schema.org/Thing">
                  <a href="/categories/大前端/JavaScript/" itemprop="url" rel="index">
                    <span itemprop="name">JavaScript</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
              <span class="post-comments-count">
              <span class="post-meta-divider">|</span>
              <span class="post-meta-item-icon">
                <i class="fa fa-comment-o"></i>
              </span>
              
                <a href="/2016/01/16/web/JavaScript/JavaScript笔记/#SOHUCS" itemprop="discussionUrl">
                  <span id="changyan_count_unit" class="post-comments-count hc-comment-count" data-xid="2016/01/16/web/JavaScript/JavaScript笔记/" itemprop="commentsCount"></span>
                </a>
              
            
          

          
          

          

          

          

        </span></div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        <h3 id="文章概述"><a href="#文章概述" class="headerlink" title="文章概述"></a>文章概述</h3><blockquote>
<p>本文主要介绍使用Javascript的笔记，涵盖ES6语法（ECMAScript标准委员会会在每年的6月份正式发布一次规范的修订）。</p>
</blockquote>
<a id="more"></a>
<h3 id="参考资料"><a href="#参考资料" class="headerlink" title="参考资料"></a>参考资料</h3><h4 id="ES的官方链接"><a href="#ES的官方链接" class="headerlink" title="ES的官方链接"></a>ES的官方链接</h4><ul>
<li>TC39提案：<a href="https://github.com/tc39/ecma262" target="_blank" rel="noopener">https://github.com/tc39/ecma262</a></li>
<li>ES6：<a href="http://www.ecma-international.org/ecma-262/6.0/index.html" target="_blank" rel="noopener">http://www.ecma-international.org/ecma-262/6.0/index.html</a></li>
<li>ES7：<a href="http://www.ecma-international.org/ecma-262/7.0/index.html" target="_blank" rel="noopener">http://www.ecma-international.org/ecma-262/7.0/index.html</a></li>
<li>ES8：<a href="http://www.ecma-international.org/ecma-262/8.0/index.html" target="_blank" rel="noopener">http://www.ecma-international.org/ecma-262/8.0/index.html</a></li>
</ul>
<h4 id="文档资料"><a href="#文档资料" class="headerlink" title="文档资料"></a>文档资料</h4><ul>
<li><a href="https://developer.mozilla.org/zh-CN/docs/Web" target="_blank" rel="noopener">MDN Web技术文档</a></li>
<li><a href="http://es6.ruanyifeng.com/" target="_blank" rel="noopener">阮一峰ES6全面介绍，涵盖最新的js语法特性</a>；</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">【阮一峰ES6全面介绍GitHub地址】</span><br><span class="line">&gt; 源地址：https://github.com/ruanyf/es6tutorial</span><br><span class="line">&gt; fork地址：https://github.com/cnlius/es6tutorial</span><br></pre></td></tr></table></figure>
<h3 id="基础语法"><a href="#基础语法" class="headerlink" title="基础语法"></a>基础语法</h3><h4 id="js代码"><a href="#js代码" class="headerlink" title="js代码"></a>js代码</h4><h5 id="内嵌js"><a href="#内嵌js" class="headerlink" title="内嵌js"></a>内嵌js</h5><p>将js代码，在head中用<script>...</script>包裹；</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="undefined"></span></span><br><span class="line"><span class="javascript">    alert(<span class="string">'Hello, world'</span>);</span></span><br><span class="line"><span class="undefined">  </span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br></pre></td></tr></table></figure>
<h5 id="外联js"><a href="#外联js" class="headerlink" title="外联js"></a>外联js</h5><p>将js写到单独的.js文件中，在head内用<script src="x.js"></script>引入；</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">"/static/js/abc.js"</span>&gt;</span><span class="undefined"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br></pre></td></tr></table></figure>
<h4 id="js调试"><a href="#js调试" class="headerlink" title="js调试"></a>js调试</h4><h5 id="chrome"><a href="#chrome" class="headerlink" title="chrome"></a>chrome</h5><p>开发者调试界面：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">在chrome浏览器中打开开发者工具、或者ctrl+shift+i；</span><br></pre></td></tr></table></figure>
<h6 id="控制台"><a href="#控制台" class="headerlink" title="控制台"></a>控制台</h6><ol>
<li>执行js代码</li>
</ol>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">在开发者界面的console选项中，可以直接写js代码，按回车键执行；</span><br></pre></td></tr></table></figure>
<ol>
<li>在console界面打印变量值</li>
</ol>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">1&gt; 在console中，通过console.log(x)，按回车，可以直接打印变量值；</span><br><span class="line">2&gt; 在js代码中执行console.log(&apos;hello&apos;),来打印一些需要的值；</span><br></pre></td></tr></table></figure>
<h4 id="js基本语句"><a href="#js基本语句" class="headerlink" title="js基本语句"></a>js基本语句</h4><h5 id="语句结构"><a href="#语句结构" class="headerlink" title="语句结构"></a>语句结构</h5><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">每个语句以;结束，语句块用&#123;...&#125;</span><br></pre></td></tr></table></figure>
<h5 id="strict模式"><a href="#strict模式" class="headerlink" title="strict模式"></a>strict模式</h5><p>启用strict模式的方法是在JavaScript代码的第一行写上：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">'use strict'</span>;</span><br></pre></td></tr></table></figure>
<h5 id="注释"><a href="#注释" class="headerlink" title="注释"></a>注释</h5><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 单行注释</span></span><br><span class="line"><span class="comment">/*多行注释*/</span></span><br></pre></td></tr></table></figure>
<h5 id="语法规则"><a href="#语法规则" class="headerlink" title="语法规则"></a>语法规则</h5><ul>
<li>JavaScript 对大小写是敏感的。</li>
<li>忽略多余的空格。</li>
<li>文本字符串中使用反斜杠（\）对代码行进行换行;</li>
</ul>
<h5 id="允许语句尾部逗号-ES8"><a href="#允许语句尾部逗号-ES8" class="headerlink" title="允许语句尾部逗号(ES8)"></a>允许语句尾部逗号(ES8)</h5><p>函数参数列表与调用中的尾部逗号，该特性允许我们在定义或者调用函数时添加尾部逗号而不报错。</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> foo = <span class="function"><span class="keyword">function</span> (<span class="params"></span></span></span><br><span class="line"><span class="function"><span class="params">  a,</span></span></span><br><span class="line"><span class="function"><span class="params">  b,</span></span></span><br><span class="line"><span class="function"><span class="params">  c,</span></span></span><br><span class="line"><span class="function"><span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="string">'a:'</span>, a)</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="string">'b:'</span>, b)</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="string">'c:'</span>, c)</span><br><span class="line">&#125;</span><br><span class="line">foo(<span class="number">1</span>, <span class="number">3</span>, <span class="number">4</span>, )</span><br><span class="line"></span><br><span class="line"><span class="comment">//输出结果为：</span></span><br><span class="line">a: <span class="number">1</span></span><br><span class="line">b: <span class="number">3</span></span><br><span class="line">c: <span class="number">4</span></span><br></pre></td></tr></table></figure>
<h4 id="条件判断"><a href="#条件判断" class="headerlink" title="条件判断"></a>条件判断</h4><ol>
<li>条件判断语句：if(){}else{}</li>
</ol>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">其中else语句是可选的。如果语句块只包含一条语句，那么可以省略&#123;&#125;;</span><br></pre></td></tr></table></figure>
<ol>
<li>多行条件判断: if(){}else if(){}…else{}</li>
<li>switch条件判断：</li>
</ol>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">switch(n)&#123;</span><br><span class="line">    case 1:</span><br><span class="line">      执行代码块 1</span><br><span class="line">      break;</span><br><span class="line">    case 2:</span><br><span class="line">      执行代码块 2</span><br><span class="line">      break;</span><br><span class="line">    default:</span><br><span class="line">      n 与 case 1 和 case 2 不同时执行的代码</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h4 id="循环语句"><a href="#循环语句" class="headerlink" title="循环语句"></a>循环语句</h4><h5 id="for循环"><a href="#for循环" class="headerlink" title="for循环"></a>for循环</h5><ol>
<li>for循环最常用的地方是利用索引来遍历数组：</li>
</ol>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> arr = [<span class="string">'Apple'</span>, <span class="string">'Google'</span>, <span class="string">'Microsoft'</span>];</span><br><span class="line"><span class="keyword">var</span> i, x;</span><br><span class="line"><span class="keyword">for</span> (i=<span class="number">0</span>; i&lt;arr.length; i++) &#123;</span><br><span class="line">    x = arr[i];</span><br><span class="line">    <span class="built_in">console</span>.log(x);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<ol>
<li>for循环的3个条件都是可以省略的，如果没有退出循环的判断条件，就必须使用break语句退出循环，否则就是死循环：</li>
</ol>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> x = <span class="number">0</span>;</span><br><span class="line"><span class="keyword">for</span> (;;) &#123; <span class="comment">// 将无限循环下去</span></span><br><span class="line">    <span class="keyword">if</span> (x &gt; <span class="number">100</span>) &#123;</span><br><span class="line">        <span class="keyword">break</span>; <span class="comment">// 通过if判断来退出循环</span></span><br><span class="line">    &#125;</span><br><span class="line">    x ++;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h5 id="for…in"><a href="#for…in" class="headerlink" title="for…in"></a>for…in</h5><h6 id="遍历对象"><a href="#遍历对象" class="headerlink" title="遍历对象"></a>遍历对象</h6><ul>
<li>for循环的一个变体是for(…in…)循环，它可以把一个对象的所有属性依次循环出来;</li>
<li>for(…in…)遍历的实际上是对象的属性名称,一个Array数组实际上也是一个对象，它的每个元素的索引被视为一个属性。</li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> o = &#123;</span><br><span class="line">    name: <span class="string">'Jack'</span>,</span><br><span class="line">    age: <span class="number">20</span>,</span><br><span class="line">    city: <span class="string">'Beijing'</span></span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 遍历所有属性</span></span><br><span class="line"><span class="keyword">for</span> (<span class="keyword">var</span> key <span class="keyword">in</span> o) &#123;</span><br><span class="line">    <span class="built_in">console</span>.log(key); <span class="comment">// 'name', 'age', 'city'</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 过滤继承来的属性</span></span><br><span class="line"><span class="keyword">for</span> (<span class="keyword">var</span> key <span class="keyword">in</span> o) &#123;</span><br><span class="line">    <span class="keyword">if</span> (o.hasOwnProperty(key)) &#123;</span><br><span class="line">        <span class="built_in">console</span>.log(key); <span class="comment">// 'name', 'age', 'city'</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h6 id="遍历数组"><a href="#遍历数组" class="headerlink" title="遍历数组"></a>遍历数组</h6><ul>
<li>Array也是对象，而它的每个元素的索引被视为对象的属性，因此，for … in循环可以直接循环出Array的索引；</li>
<li>for…in循环对Array的循环得到的是String而不是Number。</li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> a = [<span class="string">'A'</span>, <span class="string">'B'</span>, <span class="string">'C'</span>];</span><br><span class="line"><span class="keyword">for</span> (<span class="keyword">var</span> i <span class="keyword">in</span> a) &#123;</span><br><span class="line">    <span class="built_in">console</span>.log(i); <span class="comment">// '0', '1', '2'</span></span><br><span class="line">    <span class="built_in">console</span>.log(a[i]); <span class="comment">// 'A', 'B', 'C'</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h5 id="while循环"><a href="#while循环" class="headerlink" title="while循环"></a>while循环</h5><p>while循环只有一个判断条件，条件满足，就不断循环，条件不满足时则退出循环。</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> x = <span class="number">0</span>;</span><br><span class="line"><span class="keyword">var</span> n = <span class="number">99</span>;</span><br><span class="line"><span class="keyword">while</span> (n &gt; <span class="number">0</span>) &#123;</span><br><span class="line">    x = x + n;</span><br><span class="line">    n = n - <span class="number">2</span>;</span><br><span class="line">&#125;</span><br><span class="line">x; <span class="comment">// 2500</span></span><br></pre></td></tr></table></figure>
<h5 id="do…while"><a href="#do…while" class="headerlink" title="do…while"></a>do…while</h5><ul>
<li>do { … } while()循环，它和while循环的唯一区别在于，不是在每次循环开始的时候判断条件，而是在每次循环完成的时候判断条件：</li>
<li>do { … } while()循环要小心，循环体会至少执行1次，而for和while循环则可能一次都不执行。</li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> n = <span class="number">0</span>;</span><br><span class="line"><span class="keyword">do</span> &#123;</span><br><span class="line">    n = n + <span class="number">1</span>;</span><br><span class="line">&#125; <span class="keyword">while</span> (n &lt; <span class="number">100</span>);</span><br><span class="line">n; <span class="comment">// 100</span></span><br></pre></td></tr></table></figure>
<h3 id="数据类型"><a href="#数据类型" class="headerlink" title="数据类型"></a>数据类型</h3><h4 id="undefined"><a href="#undefined" class="headerlink" title="undefined"></a>undefined</h4><ul>
<li>undefined表示值未定义,即变量不含有值；</li>
<li>undefined常用在判断函数参数是否传递；</li>
<li>没有toString()方法；</li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> x;</span><br><span class="line"><span class="keyword">typeof</span> x; <span class="comment">//undefined</span></span><br></pre></td></tr></table></figure>
<h4 id="null"><a href="#null" class="headerlink" title="null"></a>null</h4><ul>
<li>null表示“空”，不是0，也不是‘’，null表示一个空的值。</li>
<li>判断是否为null，请使用：myVar === null；</li>
<li>null没有toString()方法；</li>
</ul>
<h4 id="数字"><a href="#数字" class="headerlink" title="数字"></a>数字</h4><p>Number类型</p>
<h5 id="概述"><a href="#概述" class="headerlink" title="概述"></a>概述</h5><ul>
<li>JavaScript不区分整数和浮点数，统一用Number表示;</li>
<li>常见的合法的Number类型：</li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="number">123</span>; <span class="comment">// 整数123</span></span><br><span class="line"><span class="number">0.456</span>; <span class="comment">// 浮点数0.456</span></span><br><span class="line"><span class="number">1.2345e3</span>; <span class="comment">// 科学计数法表示1.2345x1000，等同于1234.5</span></span><br><span class="line"><span class="number">-99</span>; <span class="comment">// 负数</span></span><br><span class="line"><span class="literal">NaN</span>; <span class="comment">// NaN表示Not a Number，当无法计算结果时用NaN表示</span></span><br><span class="line"><span class="literal">Infinity</span>; <span class="comment">// Infinity表示无限大，当数值超过了JavaScript的Number所能表示的最大值时，就表示为Infinity</span></span><br><span class="line"><span class="number">0xff00</span> <span class="comment">// 计算机由于使用二进制，所以，有时候用十六进制表示整数比较方便.</span></span><br></pre></td></tr></table></figure>
<h5 id="常用语法"><a href="#常用语法" class="headerlink" title="常用语法"></a>常用语法</h5><h6 id="常见属性"><a href="#常见属性" class="headerlink" title="常见属性"></a>常见属性</h6><ul>
<li>constructor    返回对创建此对象的 Number 函数的引用。</li>
<li>MAX_VALUE    可表示的最大的数。</li>
<li>MIN_VALUE    可表示的最小的数。</li>
<li>NaN    非数字值。</li>
<li>NEGATIVE_INFINITY    负无穷大，溢出时返回该值。</li>
<li>POSITIVE_INFINITY    正无穷大，溢出时返回该值。</li>
<li>prototype    使您有能力向对象添加属性和方法。</li>
</ul>
<h6 id="类型转换"><a href="#类型转换" class="headerlink" title="类型转换"></a>类型转换</h6><ul>
<li>otherType-&gt;number: 用parseInt(x)或parseFloat(x)来转换任意类型到number；</li>
<li>number-&gt;string: number值调用toString()，需要特殊处理：</li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="number">123.</span>.toString(); <span class="comment">// '123', 注意是两个点！</span></span><br><span class="line">(<span class="number">123</span>).toString(); <span class="comment">// '123'</span></span><br></pre></td></tr></table></figure>
<h6 id="常用方法"><a href="#常用方法" class="headerlink" title="常用方法"></a>常用方法</h6><ul>
<li>toString    把数字转换为字符串，使用指定的基数。</li>
<li>toLocaleString    把数字转换为字符串，使用本地数字格式顺序。</li>
<li>toFixed    把数字转换为字符串，结果的小数点后有指定位数的数字。</li>
<li>toExponential    把对象的值转换为指数计数法。</li>
<li>toPrecision    把数字格式化为指定的长度。</li>
<li>valueOf    返回一个 Number 对象的基本数字值。</li>
</ul>
<h5 id="数学运算"><a href="#数学运算" class="headerlink" title="数学运算"></a>数学运算</h5><p>number可以直接做四则运算，规则和数学一致：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="number">1</span> + <span class="number">2</span>; <span class="comment">// 3</span></span><br><span class="line">(<span class="number">1</span> + <span class="number">2</span>) * <span class="number">5</span> / <span class="number">2</span>; <span class="comment">// 7.5</span></span><br><span class="line"><span class="number">2</span> / <span class="number">0</span>; <span class="comment">// Infinity</span></span><br><span class="line"><span class="number">0</span> / <span class="number">0</span>; <span class="comment">// NaN</span></span><br><span class="line"><span class="number">10</span> % <span class="number">3</span>; <span class="comment">// 1 求余运算</span></span><br><span class="line"><span class="number">10.5</span> % <span class="number">3</span>; <span class="comment">// 1.5 求余运算</span></span><br></pre></td></tr></table></figure>
<h6 id="求幂运算符-ES7"><a href="#求幂运算符-ES7" class="headerlink" title="求幂运算符(ES7)"></a>求幂运算符(ES7)</h6><p>ES7使用更加简洁的**作为幂运算符:<br><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="number">3</span>**<span class="number">2</span>; <span class="comment">//求3的2次方,等同于Math.pow(3, 2);</span></span><br></pre></td></tr></table></figure></p>
<h4 id="布尔值"><a href="#布尔值" class="headerlink" title="布尔值"></a>布尔值</h4><p>概述：一个布尔值只有true、false两种值。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">JavaScript把null、undefined、0、NaN和空字符串&apos;&apos;视为false，其他值一概视为true。</span><br></pre></td></tr></table></figure>
<h5 id="布尔值运算"><a href="#布尔值运算" class="headerlink" title="布尔值运算"></a>布尔值运算</h5><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">- &amp;&amp;运算是与运算，只有所有都为true，&amp;&amp;运算结果才是true；</span><br><span class="line">- ||运算是或运算，只要其中有一个为true，||运算结果就是true；</span><br><span class="line">- !运算是非运算，它是一个单目运算符，把true变成false，false变成true；</span><br><span class="line">- 比较运算符：&gt;、&gt;=、==、===（推荐使用）、!==;</span><br></pre></td></tr></table></figure>
<p>注意：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">1&gt; 相等运算符==和===</span><br><span class="line">第一种是==比较，它会自动转换数据类型再比较，很多时候，会得到非常诡异的结果；</span><br><span class="line">第二种是===比较，它不会自动转换数据类型，如果数据类型不一致，返回false，如果一致，再比较。</span><br><span class="line">2&gt; NaN与所有其他值都不相等，包括它自己.唯一能判断NaN的方法是通过isNaN(num)函数;</span><br></pre></td></tr></table></figure></p>
<h4 id="字符串"><a href="#字符串" class="headerlink" title="字符串"></a>字符串</h4><p>概念：字符串是以单引号’或双引号”括起来的任意文本。</p>
<h5 id="常见字符串"><a href="#常见字符串" class="headerlink" title="常见字符串"></a>常见字符串</h5><h6 id="转义字符"><a href="#转义字符" class="headerlink" title="转义字符"></a>转义字符</h6><p>转义字符\可以转义字符</p>
<ul>
<li>\n 表示换行</li>
<li>\t 表示制表符</li>
<li>\x## 表示ASCII字符的十六进制形式</li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">'\x41'</span>; <span class="comment">// 完全等同于 'A'</span></span><br></pre></td></tr></table></figure>
<ul>
<li>\u####表示一个Unicode字符</li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">'\u4e2d\u6587'</span>; <span class="comment">// 完全等同于 '中文'</span></span><br></pre></td></tr></table></figure>
<h6 id="多行字符串"><a href="#多行字符串" class="headerlink" title="多行字符串"></a>多行字符串</h6><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">最新的ES6标准新增了一种多行字符串的表示方法，用反引号 ` ... ` 表示：</span><br></pre></td></tr></table></figure>
<p>例如：<br><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">`这是一个</span></span><br><span class="line"><span class="string">多行</span></span><br><span class="line"><span class="string">字符串`</span>;</span><br></pre></td></tr></table></figure></p>
<h6 id="字符串模板"><a href="#字符串模板" class="headerlink" title="字符串模板"></a>字符串模板</h6><p>ES6新增了一种模板字符串，在字符串中使用变量名，会自动替换成字符串中的变量所代表的的值；</p>
<p>例如：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> name = <span class="string">'小明'</span>;</span><br><span class="line"><span class="keyword">var</span> age = <span class="number">20</span>;</span><br><span class="line"><span class="keyword">var</span> message = <span class="string">`你好, <span class="subst">$&#123;name&#125;</span>, 你今年<span class="subst">$&#123;age&#125;</span>岁了!`</span>;</span><br></pre></td></tr></table></figure>
<h5 id="常用操作"><a href="#常用操作" class="headerlink" title="常用操作"></a>常用操作</h5><h6 id="访问字符串"><a href="#访问字符串" class="headerlink" title="访问字符串"></a>访问字符串</h6><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> s = <span class="string">'Hello, world!'</span>;</span><br><span class="line"><span class="comment">// 字符串长度(双字节的汉字会占两位，可以通过for(..of..)方式计算)</span></span><br><span class="line">s.length; <span class="comment">// 13</span></span><br><span class="line"><span class="comment">// 根据索引访问字符串</span></span><br><span class="line">s[<span class="number">0</span>]; <span class="comment">// 'H'</span></span><br><span class="line">s[<span class="number">6</span>]; <span class="comment">// ' '</span></span><br><span class="line">s[<span class="number">7</span>]; <span class="comment">// 'w'</span></span><br><span class="line">s[<span class="number">12</span>]; <span class="comment">// '!'</span></span><br><span class="line">s[<span class="number">13</span>]; <span class="comment">// undefined 超出范围的索引不会报错，但一律返回undefined</span></span><br></pre></td></tr></table></figure>
<h6 id="大小写转换"><a href="#大小写转换" class="headerlink" title="大小写转换"></a>大小写转换</h6><ul>
<li>toUpperCase：返回一个新字符串,等于原来字符串全部变为大写；</li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> s = <span class="string">'Hello'</span>;</span><br><span class="line"><span class="keyword">var</span> upper = s.toUpperCase(); </span><br><span class="line">upper; <span class="comment">// 返回'HELLO'</span></span><br></pre></td></tr></table></figure>
<ul>
<li>toLowerCase：返回一个新字符串,等于原来字符串全部变为小写；</li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> s = <span class="string">'Hello'</span>;</span><br><span class="line"><span class="keyword">var</span> lower = s.toLowerCase(); <span class="comment">// 返回'hello'并赋值给变量lower</span></span><br><span class="line">lower; <span class="comment">// 'hello'</span></span><br></pre></td></tr></table></figure>
<h6 id="索引"><a href="#索引" class="headerlink" title="索引"></a>索引</h6><p>indexOf()会搜索指定字符串出现的位置：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> s = <span class="string">'hello, world'</span>;</span><br><span class="line">s.indexOf(<span class="string">'world'</span>); <span class="comment">// 返回7</span></span><br><span class="line">s.indexOf(<span class="string">'World'</span>); <span class="comment">// 没有找到指定的子串，返回-1</span></span><br></pre></td></tr></table></figure>
<h6 id="真实长度"><a href="#真实长度" class="headerlink" title="真实长度"></a>真实长度</h6><p>如果字符串中包含汉字，有些汉字长度是2，此时获取字符串长度用for..of:</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> len=<span class="number">0</span>;</span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">let</span> v <span class="keyword">of</span> c)&#123;</span><br><span class="line">	len++;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h6 id="截取"><a href="#截取" class="headerlink" title="截取"></a>截取</h6><p>substring()返回指定索引区间的子串：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> s = <span class="string">'hello, world'</span></span><br><span class="line">s.substring(<span class="number">0</span>, <span class="number">5</span>); <span class="comment">// 从索引0开始到5（不包括5），返回'hello'</span></span><br><span class="line">s.substring(<span class="number">7</span>); <span class="comment">// 从索引7开始到结束，返回'world'</span></span><br></pre></td></tr></table></figure>
<h6 id="拷贝"><a href="#拷贝" class="headerlink" title="拷贝"></a>拷贝</h6><p>repeat()</p>
<ul>
<li>参数是大于等于-1的负数或者Infinity，会报错。</li>
<li>repeat方法返回一个新字符串，表示将原字符串重复n次。</li>
</ul>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">'x'</span>.repeat(<span class="number">3</span>) <span class="comment">// "xxx"</span></span><br><span class="line"><span class="string">'hello'</span>.repeat(<span class="number">2</span>) <span class="comment">// "hellohello"</span></span><br><span class="line"><span class="string">'na'</span>.repeat(<span class="number">0</span>) <span class="comment">// ""</span></span><br><span class="line"><span class="string">'na'</span>.repeat(<span class="number">-0.9</span>) <span class="comment">// ""</span></span><br><span class="line"><span class="string">'na'</span>.repeat(<span class="literal">NaN</span>) <span class="comment">// ""</span></span><br><span class="line"><span class="string">'na'</span>.repeat(<span class="string">'na'</span>) <span class="comment">// ""</span></span><br><span class="line"><span class="string">'na'</span>.repeat(<span class="string">'3'</span>) <span class="comment">// "nanana"</span></span><br></pre></td></tr></table></figure>
<h6 id="字符串补全长度-ES8"><a href="#字符串补全长度-ES8" class="headerlink" title="字符串补全长度(ES8)"></a>字符串补全长度(ES8)</h6><ol>
<li>padStart()用于头部补全，padEnd()用于尾部补全；</li>
</ol>
<p>方法概述：<br>padStart和padEnd一共接受两个参数：</p>
<ul>
<li>第一个参数用来指定字符串的最小长度；</li>
<li>第二个参数是用来补全的字符串，如果省略，默认使用空格补全长度；</li>
</ul>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">'x'</span>.padStart(<span class="number">5</span>, <span class="string">'ab'</span>) <span class="comment">// 'ababx'</span></span><br><span class="line"><span class="string">'x'</span>.padStart(<span class="number">4</span>, <span class="string">'ab'</span>) <span class="comment">// 'abax'</span></span><br><span class="line"></span><br><span class="line"><span class="string">'x'</span>.padEnd(<span class="number">5</span>, <span class="string">'ab'</span>) <span class="comment">// 'xabab'</span></span><br><span class="line"><span class="string">'x'</span>.padEnd(<span class="number">4</span>, <span class="string">'ab'</span>) <span class="comment">// 'xaba'</span></span><br></pre></td></tr></table></figure>
<ol>
<li>如果原字符串的长度，等于或大于指定的最小长度，则返回原字符串。</li>
</ol>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">'xxx'</span>.padStart(<span class="number">2</span>, <span class="string">'ab'</span>) <span class="comment">// 'xxx'</span></span><br><span class="line"><span class="string">'xxx'</span>.padEnd(<span class="number">2</span>, <span class="string">'ab'</span>) <span class="comment">// 'xxx'</span></span><br></pre></td></tr></table></figure>
<ol>
<li>如果用来补全的字符串与原字符串，两者的长度之和超过了指定的最小长度，则会截去超出位数的补全字符串。</li>
</ol>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">'abc'</span>.padStart(<span class="number">10</span>, <span class="string">'0123456789'</span>)</span><br><span class="line"><span class="comment">// '0123456abc'</span></span><br></pre></td></tr></table></figure>
<ol>
<li>padStart用途：</li>
</ol>
<ul>
<li>padStart的常见用途是为数值补全指定位数。下面代码生成 10 位的数值字符串。</li>
</ul>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">'1'</span>.padStart(<span class="number">10</span>, <span class="string">'0'</span>) <span class="comment">// "0000000001"</span></span><br><span class="line"><span class="string">'12'</span>.padStart(<span class="number">10</span>, <span class="string">'0'</span>) <span class="comment">// "0000000012"</span></span><br><span class="line"><span class="string">'123456'</span>.padStart(<span class="number">10</span>, <span class="string">'0'</span>) <span class="comment">// "0000123456"</span></span><br></pre></td></tr></table></figure>
<ul>
<li>另一个用途是提示字符串格式。</li>
</ul>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">'12'</span>.padStart(<span class="number">10</span>, <span class="string">'YYYY-MM-DD'</span>) <span class="comment">// "YYYY-MM-12"</span></span><br><span class="line"><span class="string">'09-12'</span>.padStart(<span class="number">10</span>, <span class="string">'YYYY-MM-DD'</span>) <span class="comment">// "YYYY-09-12"</span></span><br></pre></td></tr></table></figure>
<h6 id="raw转义和拼接"><a href="#raw转义和拼接" class="headerlink" title="raw转义和拼接"></a>raw转义和拼接</h6><p>模板斜杠转义-多字符串拼接</p>
<p>【转义】</p>
<p>对模板字符串中的斜杠进行再次转义；</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">String</span>.raw<span class="string">`Hi\n<span class="subst">$&#123;<span class="number">2</span>+<span class="number">3</span>&#125;</span>!`</span>;</span><br><span class="line"><span class="comment">// 返回 "Hi\\n5!"</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">String</span>.raw<span class="string">`Hi\u000A!`</span>;</span><br><span class="line"><span class="comment">// 返回 "Hi\\u000A!"</span></span><br></pre></td></tr></table></figure>
<p>【拼接】</p>
<p>作为正常的函数使用:String.raw({raw: ‘’},1,2)。<br>这时，它的第一个参数，应该是一个具有raw属性的对象，且raw属性的值应该是一个数组。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">String</span>.raw(&#123; <span class="attr">raw</span>: <span class="string">'test'</span> &#125;, <span class="number">0</span>, <span class="number">1</span>, <span class="number">2</span>);</span><br><span class="line"><span class="comment">// 't0e1s2t'</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 等同于</span></span><br><span class="line"><span class="built_in">String</span>.raw(&#123; <span class="attr">raw</span>: [<span class="string">'t'</span>,<span class="string">'e'</span>,<span class="string">'s'</span>,<span class="string">'t'</span>] &#125;, <span class="number">0</span>, <span class="number">1</span>, <span class="number">2</span>);</span><br></pre></td></tr></table></figure>
<h5 id="特点"><a href="#特点" class="headerlink" title="特点"></a>特点</h5><ul>
<li>字符串是不可变的，如果对字符串的某个索引赋值，不会改变字符串；<br>例如：</li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> s = <span class="string">'Test'</span>;</span><br><span class="line">s[<span class="number">0</span>] = <span class="string">'X'</span>;</span><br><span class="line">alert(s); <span class="comment">// s仍然为'Test'</span></span><br></pre></td></tr></table></figure>
<h5 id="常用属性"><a href="#常用属性" class="headerlink" title="常用属性"></a>常用属性</h5><ul>
<li>constructor：对创建该对象的函数的引用；</li>
<li>length：字符串的长度</li>
<li>prototype：允许您向对象添加属性和方法</li>
</ul>
<h5 id="常用方法-1"><a href="#常用方法-1" class="headerlink" title="常用方法"></a>常用方法</h5><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line">方法	描述</span><br><span class="line">anchor()	创建 HTML 锚。</span><br><span class="line">big()	用大号字体显示字符串。</span><br><span class="line">blink()	显示闪动字符串。</span><br><span class="line">bold()	使用粗体显示字符串。</span><br><span class="line">charAt()	返回在指定位置的字符。</span><br><span class="line">charCodeAt()	返回在指定的位置的字符的 Unicode 编码。</span><br><span class="line">concat()	连接字符串。</span><br><span class="line">fixed()	以打字机文本显示字符串。</span><br><span class="line">fontcolor()	使用指定的颜色来显示字符串。</span><br><span class="line">fontsize()	使用指定的尺寸来显示字符串。</span><br><span class="line">fromCharCode()	从字符编码创建一个字符串。</span><br><span class="line">indexOf()	检索字符串。</span><br><span class="line">italics()	使用斜体显示字符串。</span><br><span class="line">lastIndexOf()	从后向前搜索字符串。</span><br><span class="line">link()	将字符串显示为链接。</span><br><span class="line">localeCompare()	用本地特定的顺序来比较两个字符串。</span><br><span class="line">match()	找到一个或多个正则表达式的匹配。</span><br><span class="line">replace()	替换与正则表达式匹配的子串。</span><br><span class="line">search()	检索与正则表达式相匹配的值。</span><br><span class="line">slice()	提取字符串的片断，并在新的字符串中返回被提取的部分。</span><br><span class="line">small()	使用小字号来显示字符串。</span><br><span class="line">split()	把字符串分割为字符串数组。</span><br><span class="line">strike()	使用删除线来显示字符串。</span><br><span class="line">sub()	把字符串显示为下标。</span><br><span class="line">substr()	从起始索引号提取字符串中指定数目的字符。</span><br><span class="line">substring()	提取字符串中两个指定的索引号之间的字符。</span><br><span class="line">sup()	把字符串显示为上标。</span><br><span class="line">toLocaleLowerCase()	把字符串转换为小写。</span><br><span class="line">toLocaleUpperCase()	把字符串转换为大写。</span><br><span class="line">toLowerCase()	把字符串转换为小写。</span><br><span class="line">toUpperCase()	把字符串转换为大写。</span><br><span class="line">toSource()	代表对象的源代码。</span><br><span class="line">toString()	返回字符串。</span><br><span class="line">valueOf()	返回某个字符串对象的原始值。</span><br></pre></td></tr></table></figure>
<h4 id="数组"><a href="#数组" class="headerlink" title="数组"></a>数组</h4><p>Array提供了一种顺序存储一组元素的功能，并可以按索引来读写。</p>
<h5 id="概述-1"><a href="#概述-1" class="headerlink" title="概述"></a>概述</h5><ul>
<li>JavaScript的Array可以包含任意数据类型，并通过索引来访问每个元素。</li>
<li>数组是一组按顺序排列的集合，集合的每个值称为元素。</li>
<li>JavaScript的数组可以包括任意数据类型。</li>
<li>多维数组：如果数组的某个元素又是一个Array，则可以形成多维数组;</li>
</ul>
<h5 id="创建数组"><a href="#创建数组" class="headerlink" title="创建数组"></a>创建数组</h5><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 通过[]创建(推荐)</span></span><br><span class="line">[<span class="number">1</span>, <span class="number">2</span>, <span class="number">3.14</span>, <span class="string">'Hello'</span>, <span class="literal">null</span>, <span class="literal">true</span>];</span><br><span class="line"><span class="comment">// 通过Array创建</span></span><br><span class="line"><span class="keyword">new</span> <span class="built_in">Array</span>(<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>); <span class="comment">// 创建了数组[1, 2, 3]</span></span><br><span class="line"><span class="comment">// 多维数组</span></span><br><span class="line"><span class="keyword">var</span> arr = [[<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>], [<span class="number">400</span>, <span class="number">500</span>, <span class="number">600</span>], <span class="string">'-'</span>];</span><br></pre></td></tr></table></figure>
<h5 id="操作数组"><a href="#操作数组" class="headerlink" title="操作数组"></a>操作数组</h5><h6 id="索引-1"><a href="#索引-1" class="headerlink" title="索引"></a>索引</h6><ul>
<li>通过索引来访问数组元素；</li>
<li>如果通过索引赋值时，索引超过了范围，会引起Array大小的变化；</li>
<li>Array也可以通过indexOf()来搜索一个指定的元素的位置；</li>
<li>判断Array要使用Array.isArray(arr)；</li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 通过索引来访问</span></span><br><span class="line"><span class="keyword">var</span> arr = [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3.14</span>, <span class="string">'Hello'</span>, <span class="literal">null</span>, <span class="literal">true</span>];</span><br><span class="line">arr[<span class="number">0</span>]; <span class="comment">// 返回索引为0的元素，即1</span></span><br><span class="line">arr[<span class="number">5</span>]; <span class="comment">// 返回索引为5的元素，即true</span></span><br><span class="line">arr[<span class="number">6</span>]; <span class="comment">// 索引超出了范围，返回undefined</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 索引赋值改变数组大小</span></span><br><span class="line"><span class="keyword">var</span> arr = [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>];</span><br><span class="line">arr[<span class="number">5</span>] = <span class="string">'x'</span>;</span><br><span class="line">arr; <span class="comment">// arr变为[1, 2, 3, undefined, undefined, 'x']</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 获取元素所在数组的索引</span></span><br><span class="line">arr.indexOf(<span class="string">'hello'</span>);</span><br></pre></td></tr></table></figure>
<h6 id="长度"><a href="#长度" class="headerlink" title="长度"></a>长度</h6><ul>
<li>直接通过arr.length获取数组的长度；</li>
<li>直接给Array的length赋一个新的值会导致Array大小的变化；</li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> arr = [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>];</span><br><span class="line"><span class="comment">// 获取数组的长度</span></span><br><span class="line">arr.length; <span class="comment">// 3</span></span><br><span class="line"><span class="comment">// 改变数组</span></span><br><span class="line">arr.length = <span class="number">6</span>;</span><br><span class="line">arr; <span class="comment">// arr变为[1, 2, 3, undefined, undefined, undefined]</span></span><br><span class="line">arr.length = <span class="number">2</span>;</span><br><span class="line">arr; <span class="comment">// arr变为[1, 2]</span></span><br></pre></td></tr></table></figure>
<h6 id="截取-1"><a href="#截取-1" class="headerlink" title="截取"></a>截取</h6><p>通过slice()截取Array的部分元素，然后返回一个新的Array；</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> arr = [<span class="string">'A'</span>, <span class="string">'B'</span>, <span class="string">'C'</span>, <span class="string">'D'</span>, <span class="string">'E'</span>, <span class="string">'F'</span>, <span class="string">'G'</span>];</span><br><span class="line">arr.slice(<span class="number">0</span>, <span class="number">3</span>); <span class="comment">// 从索引0开始，到索引3结束，但不包括索引3: ['A', 'B', 'C']</span></span><br><span class="line">arr.slice(<span class="number">3</span>); <span class="comment">// 从索引3开始到结束: ['D', 'E', 'F', 'G']</span></span><br><span class="line">arr.slice(); <span class="comment">// 不给slice()传递任何参数，它就会从头到尾截取所有元素,相当于copy。</span></span><br></pre></td></tr></table></figure>
<h6 id="增删元素"><a href="#增删元素" class="headerlink" title="增删元素"></a>增删元素</h6><ol>
<li>push()向Array的末尾添加若干元素，pop()则把Array的最后一个元素删除掉;</li>
<li>如果要往Array的头部添加若干元素，使用unshift()方法，shift()方法则把Array的第一个元素删掉；</li>
<li>splice()方法是修改Array的“万能方法”，它可以从指定的索引开始删除若干元素，然后再从该位置添加若干元素；</li>
</ol>
<p>注意：</p>
<ul>
<li>空数组继续pop或shift不会报错，而是返回undefined；</li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//【操作尾部】</span></span><br><span class="line"><span class="keyword">var</span> arr = [<span class="number">1</span>, <span class="number">2</span>];</span><br><span class="line"><span class="comment">// 尾部增加元素</span></span><br><span class="line">arr.push(<span class="string">'A'</span>, <span class="string">'B'</span>); <span class="comment">// 返回Array新的长度: 4</span></span><br><span class="line">arr; <span class="comment">// [1, 2, 'A', 'B']</span></span><br><span class="line"><span class="comment">// 尾部删除元素</span></span><br><span class="line">arr.pop(); <span class="comment">// pop()返回'B'</span></span><br><span class="line">arr; <span class="comment">// [1, 2, 'A']</span></span><br><span class="line">arr.pop(); arr.pop(); arr.pop(); <span class="comment">// 连续pop 3次</span></span><br><span class="line">arr; <span class="comment">// []</span></span><br><span class="line">arr.pop(); <span class="comment">// 空数组继续pop不会报错，而是返回undefined</span></span><br><span class="line">arr; <span class="comment">// []</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//【操作头部】</span></span><br><span class="line"><span class="keyword">var</span> arr = [<span class="number">1</span>, <span class="number">2</span>];</span><br><span class="line"><span class="comment">// 头部增加元素</span></span><br><span class="line">arr.unshift(<span class="string">'A'</span>, <span class="string">'B'</span>); <span class="comment">// 返回Array新的长度: 4</span></span><br><span class="line">arr; <span class="comment">// ['A', 'B', 1, 2]</span></span><br><span class="line"><span class="comment">// 头部删除元素</span></span><br><span class="line">arr.shift(); <span class="comment">// 'A'</span></span><br><span class="line">arr; <span class="comment">// ['B', 1, 2]</span></span><br><span class="line">arr.shift(); arr.shift(); arr.shift(); <span class="comment">// 连续shift 3次</span></span><br><span class="line">arr; <span class="comment">// []</span></span><br><span class="line">arr.shift(); <span class="comment">// 空数组继续shift不会报错，而是返回undefined</span></span><br><span class="line">arr; <span class="comment">// []</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 【splice先按索引删除后再增加具体元素】</span></span><br><span class="line"><span class="keyword">var</span> arr = [<span class="string">'Microsoft'</span>, <span class="string">'Apple'</span>, <span class="string">'Yahoo'</span>, <span class="string">'AOL'</span>, <span class="string">'Excite'</span>, <span class="string">'Oracle'</span>];</span><br><span class="line"><span class="comment">// 从索引2开始删除3个元素,然后再添加两个元素:</span></span><br><span class="line">arr.splice(<span class="number">2</span>, <span class="number">3</span>, <span class="string">'Google'</span>, <span class="string">'Facebook'</span>); <span class="comment">// 返回删除的元素 ['Yahoo', 'AOL', 'Excite']</span></span><br><span class="line">arr; <span class="comment">// ['Microsoft', 'Apple', 'Google', 'Facebook', 'Oracle']</span></span><br><span class="line"><span class="comment">// 只删除,不添加:</span></span><br><span class="line">arr.splice(<span class="number">2</span>, <span class="number">2</span>); <span class="comment">// ['Google', 'Facebook']</span></span><br><span class="line">arr; <span class="comment">// ['Microsoft', 'Apple', 'Oracle']</span></span><br><span class="line"><span class="comment">// 只添加,不删除:</span></span><br><span class="line">arr.splice(<span class="number">2</span>, <span class="number">0</span>, <span class="string">'Google'</span>, <span class="string">'Facebook'</span>); <span class="comment">// 返回[],因为没有删除任何元素</span></span><br><span class="line">arr; <span class="comment">// ['Microsoft', 'Apple', 'Google', 'Facebook', 'Oracle']</span></span><br></pre></td></tr></table></figure>
<h6 id="排序"><a href="#排序" class="headerlink" title="排序"></a>排序</h6><ul>
<li>sort()排序，直接调用时，按照默认升序排序;</li>
<li>Array的sort()方法默认把所有元素先转换为String再排序;</li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> arr = [<span class="string">'B'</span>, <span class="string">'C'</span>, <span class="string">'A'</span>];</span><br><span class="line">arr.sort();</span><br><span class="line">arr; <span class="comment">// ['A', 'B', 'C']</span></span><br></pre></td></tr></table></figure>
<h6 id="反转"><a href="#反转" class="headerlink" title="反转"></a>反转</h6><p>reverse()把整个Array的元素给掉个个，也就是反转；</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> arr = [<span class="string">'one'</span>, <span class="string">'two'</span>, <span class="string">'three'</span>];</span><br><span class="line">arr.reverse(); </span><br><span class="line">arr; <span class="comment">// ['three', 'two', 'one']</span></span><br></pre></td></tr></table></figure>
<h6 id="连接字符串"><a href="#连接字符串" class="headerlink" title="连接字符串"></a>连接字符串</h6><ul>
<li>concat()方法把当前的Array和另一个Array连接起来，并返回一个新的Array；</li>
<li>实际上，concat()方法可以接收任意个元素和Array，并且自动把Array拆开，然后全部添加到新的Array里；</li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> arr = [<span class="string">'A'</span>, <span class="string">'B'</span>, <span class="string">'C'</span>];</span><br><span class="line"><span class="keyword">var</span> added = arr.concat([<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>]);</span><br><span class="line">added; <span class="comment">// ['A', 'B', 'C', 1, 2, 3]</span></span><br><span class="line">arr; <span class="comment">// ['A', 'B', 'C']</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> arr = [<span class="string">'A'</span>, <span class="string">'B'</span>, <span class="string">'C'</span>];</span><br><span class="line">arr.concat(<span class="number">1</span>, <span class="number">2</span>, [<span class="number">3</span>, <span class="number">4</span>]); <span class="comment">// ['A', 'B', 'C', 1, 2, 3, 4]</span></span><br></pre></td></tr></table></figure>
<h6 id="连接子元素"><a href="#连接子元素" class="headerlink" title="连接子元素"></a>连接子元素</h6><p>join()方法是一个非常实用的方法，它把当前Array的每个元素都用指定的字符串连接起来，然后返回新的连接后的字符串；</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> arr = [<span class="string">'A'</span>, <span class="string">'B'</span>, <span class="string">'C'</span>, <span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>];</span><br><span class="line">arr.join(<span class="string">'-'</span>); <span class="comment">// 'A-B-C-1-2-3'</span></span><br></pre></td></tr></table></figure>
<h5 id="常用属性-1"><a href="#常用属性-1" class="headerlink" title="常用属性"></a>常用属性</h5><ul>
<li>constructor    返回对创建此对象的数组函数的引用。</li>
<li>length    设置或返回数组中元素的数目。</li>
<li>prototype    使您有能力向对象添加属性和方法。</li>
</ul>
<h5 id="常用方法-2"><a href="#常用方法-2" class="headerlink" title="常用方法"></a>常用方法</h5><h6 id="concat"><a href="#concat" class="headerlink" title="concat()"></a>concat()</h6><p>连接两个或更多的数组，并返回结果。</p>
<h6 id="join"><a href="#join" class="headerlink" title="join()"></a>join()</h6><p>把数组的所有元素放入一个字符串。元素通过指定的分隔符进行分隔。</p>
<h6 id="pop"><a href="#pop" class="headerlink" title="pop()"></a>pop()</h6><p>删除并返回数组的最后一个元素</p>
<h6 id="push"><a href="#push" class="headerlink" title="push()"></a>push()</h6><p>向数组的末尾添加一个或更多元素，并返回新的长度。</p>
<h6 id="reverse"><a href="#reverse" class="headerlink" title="reverse()"></a>reverse()</h6><p>颠倒数组中元素的顺序。</p>
<h6 id="shift"><a href="#shift" class="headerlink" title="shift()"></a>shift()</h6><p>删除并返回数组的第一个元素</p>
<h6 id="slice"><a href="#slice" class="headerlink" title="slice()"></a>slice()</h6><p>从某个已有的数组返回选定的元素</p>
<h6 id="sort"><a href="#sort" class="headerlink" title="sort()"></a>sort()</h6><p>对数组的元素进行排序</p>
<h6 id="splice"><a href="#splice" class="headerlink" title="splice()"></a>splice()</h6><p>删除元素，并向数组添加新元素。</p>
<h6 id="toSource"><a href="#toSource" class="headerlink" title="toSource()"></a>toSource()</h6><p>返回该对象的源代码。</p>
<h6 id="toString-NaN"><a href="#toString-NaN" class="headerlink" title="toString()"></a>toString()</h6><p>把数组转换为字符串，并返回结果。</p>
<h6 id="toLocaleString-NaN"><a href="#toLocaleString-NaN" class="headerlink" title="toLocaleString()"></a>toLocaleString()</h6><p>把数组转换为本地数组，并返回结果。</p>
<h6 id="unshift"><a href="#unshift" class="headerlink" title="unshift()"></a>unshift()</h6><p>向数组的开头添加一个或更多元素，并返回新的长度。</p>
<h6 id="valueOf-NaN"><a href="#valueOf-NaN" class="headerlink" title="valueOf()"></a>valueOf()</h6><p>返回数组对象的原始值</p>
<h6 id="索引-2"><a href="#索引-2" class="headerlink" title="索引"></a>索引</h6><p>indexOf(element):<br>返回的是某个元素在数组中的下标值,如果值大于-1，说明元素在数组里。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">【注意】</span><br><span class="line">&gt; indexOf(NaN)=-1,即使NaN存在于数组中;</span><br></pre></td></tr></table></figure>
<h6 id="包含-ES7"><a href="#包含-ES7" class="headerlink" title="包含(ES7)"></a>包含(ES7)</h6><p>ES7新增原型方法：查找一个值在不在数组里，若在，则返回true，反之返回false。<br><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">Array</span>.prototype.includes();</span><br></pre></td></tr></table></figure></p>
<ol>
<li>特点：</li>
</ol>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">&gt; 在判断 +0 与 -0 时，被认为是相同的。</span><br><span class="line">&gt; includes()只能判断简单类型的数据，对于复杂类型的数据，比如对象类型的数组，二维数组，这些，是无法判断的。</span><br></pre></td></tr></table></figure>
<ol>
<li>语法:</li>
</ol>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">Array</span>.prototype.includes(searchElement,fromIndex):</span><br><span class="line">【参数说明】</span><br><span class="line">&gt; searchElement: 要搜索的值;</span><br><span class="line">&gt; fromIndex: 搜索的开始索引,默认索引值为<span class="number">0</span>;</span><br></pre></td></tr></table></figure>
<ol>
<li>示例：</li>
</ol>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> array = [<span class="string">'a'</span>, <span class="string">'b'</span>, <span class="string">'c'</span>,+<span class="number">0</span>];</span><br><span class="line"><span class="built_in">console</span>.log(array.includes(<span class="string">'b'</span>)); <span class="comment">//true</span></span><br><span class="line"><span class="built_in">console</span>.log(array.includes(<span class="string">'d'</span>)); <span class="comment">//false</span></span><br><span class="line"><span class="built_in">console</span>.log(array.includes(<span class="string">'c'</span>,<span class="number">2</span>)); <span class="comment">//false</span></span><br><span class="line"><span class="built_in">console</span>.log(array.includes(<span class="number">-0</span>)); <span class="comment">//true</span></span><br></pre></td></tr></table></figure>
<ol>
<li>对比indexOf()：</li>
</ol>
<blockquote>
<p>使用场景：由于它对NaN的处理方式与indexOf不同，假如你只想知道某个值是否在数组中而并不关心它的索引位置，建议使用includes()。如果你想获取一个值在数组中的位置，那么你只能使用indexOf方法。</p>
</blockquote>
<h4 id="对象"><a href="#对象" class="headerlink" title="对象"></a>对象</h4><p>JavaScript的对象是一组由键-值组成的无序集合.</p>
<h5 id="概念与访问"><a href="#概念与访问" class="headerlink" title="概念与访问"></a>概念与访问</h5><ul>
<li>JavaScript的对象是一组由键-值组成的无序集合.</li>
<li>JavaScript用一个{…}表示一个对象，键值对以xxx: xxx形式申明，用,隔开。注意，最后一个键值对不需要在末尾加”,”。</li>
<li>JavaScript对象的键都是字符串类型，值可以是任意数据类型。</li>
<li>获取对象的属性，用对象变量.属性名的方式;</li>
<li>如果属性名(键)包含特殊字符，就必须用’’括起来，并且，访问这个属性也无法使用.操作符，必须用[‘xxx’]来访问;</li>
<li>es6中：</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">1. 变量名可以直接作为对象成员；</span><br><span class="line">2. 对象中的方法可以简写成函数的定义；</span><br><span class="line">3. 表达式可以作为属性名和方法名；</span><br></pre></td></tr></table></figure>
<h6 id="示例："><a href="#示例：" class="headerlink" title="示例："></a>示例：</h6><ul>
<li>es5写法：</li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 创建对象</span></span><br><span class="line"><span class="keyword">var</span> person = &#123;</span><br><span class="line">    name: <span class="string">'Bob'</span>,</span><br><span class="line">    age: <span class="number">20</span>,</span><br><span class="line">    tags: [<span class="string">'js'</span>, <span class="string">'web'</span>, <span class="string">'mobile'</span>],</span><br><span class="line">    city: <span class="string">'Beijing'</span>,</span><br><span class="line">    hasCar: <span class="literal">true</span>,</span><br><span class="line">    zipcode: <span class="literal">null</span>,</span><br><span class="line">    <span class="string">'middle-school'</span>: <span class="string">'No.1 Middle School'</span></span><br><span class="line">&#125;;</span><br><span class="line"><span class="comment">// 获取对象属性</span></span><br><span class="line">person.name; <span class="comment">// 'Bob'</span></span><br><span class="line">person.zipcode; <span class="comment">// null</span></span><br><span class="line">person[<span class="string">'name'</span>];</span><br><span class="line">person[<span class="string">'middle-school'</span>]; <span class="comment">// No.1 Middle School</span></span><br></pre></td></tr></table></figure>
<ul>
<li>es6写法：</li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> name=<span class="string">'lily'</span></span><br><span class="line"><span class="keyword">var</span> person = &#123;</span><br><span class="line">    name, <span class="comment">//外部变量</span></span><br><span class="line">    getName()&#123; <span class="comment">//方法简写</span></span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">this</span>.name;</span><br><span class="line">    &#125;,</span><br><span class="line">    [<span class="string">'get'</span>+<span class="string">'Age'</span>]()&#123; <span class="comment">//表达式</span></span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">this</span>.age;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>
<h5 id="对象的方法"><a href="#对象的方法" class="headerlink" title="对象的方法"></a>对象的方法</h5><h6 id="增删属性"><a href="#增删属性" class="headerlink" title="增删属性"></a>增删属性</h6><p>由于JavaScript的对象是动态类型，你可以自由地给一个对象添加或删除属性：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> xiaoming = &#123;</span><br><span class="line">    name: <span class="string">'小明'</span></span><br><span class="line">&#125;;</span><br><span class="line"><span class="comment">// 增加属性</span></span><br><span class="line">xiaoming.age; <span class="comment">// undefined</span></span><br><span class="line">xiaoming.age = <span class="number">18</span>; <span class="comment">// 新增一个age属性</span></span><br><span class="line">xiaoming.age; <span class="comment">// 18</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 删除属性</span></span><br><span class="line"><span class="keyword">delete</span> xiaoming.age; <span class="comment">// 删除age属性</span></span><br><span class="line">xiaoming.age; <span class="comment">// undefined</span></span><br><span class="line"><span class="keyword">delete</span> xiaoming[<span class="string">'name'</span>]; <span class="comment">// 删除name属性</span></span><br><span class="line">xiaoming.name; <span class="comment">// undefined</span></span><br><span class="line"><span class="keyword">delete</span> xiaoming.school; <span class="comment">// 删除一个不存在的school属性也不会报错</span></span><br></pre></td></tr></table></figure>
<h6 id="包含"><a href="#包含" class="headerlink" title="包含"></a>包含</h6><ul>
<li>如果我们要检测对象是否拥有某一属性，可以用in操作符，此属性可能是继承来的；</li>
<li>判断一个属性是否是xiaoming自身拥有的，而不是继承得到的，可以用hasOwnProperty()方法;</li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> xiaoming = &#123;</span><br><span class="line">    name: <span class="string">'小明'</span>,</span><br><span class="line">    birth: <span class="number">1990</span>,</span><br><span class="line">    school: <span class="string">'No.1 Middle School'</span>,</span><br><span class="line">    height: <span class="number">1.70</span>,</span><br><span class="line">    weight: <span class="number">65</span>,</span><br><span class="line">    score: <span class="literal">null</span></span><br><span class="line">&#125;;</span><br><span class="line"><span class="string">'name'</span> <span class="keyword">in</span> xiaoming; <span class="comment">// true</span></span><br><span class="line"><span class="string">'grade'</span> <span class="keyword">in</span> xiaoming; <span class="comment">// false</span></span><br><span class="line"><span class="comment">// 继承（object）来的属性</span></span><br><span class="line"><span class="string">'toString'</span> <span class="keyword">in</span> xiaoming; <span class="comment">// true</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 判断是否是自身的属性</span></span><br><span class="line">xiaoming.hasOwnProperty(<span class="string">'name'</span>); <span class="comment">// true</span></span><br><span class="line">xiaoming.hasOwnProperty(<span class="string">'toString'</span>); <span class="comment">// false</span></span><br></pre></td></tr></table></figure>
<h4 id="Map"><a href="#Map" class="headerlink" title="Map"></a>Map</h4><p>ES6引入Map是一组键值对的结构，具有极快的查找速度。</p>
<h5 id="使用方法"><a href="#使用方法" class="headerlink" title="使用方法"></a>使用方法</h5><p>初始化Map需要一个二维数组，或者直接初始化一个空Map。</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> m = <span class="keyword">new</span> <span class="built_in">Map</span>(); <span class="comment">// 空Map</span></span><br><span class="line"><span class="keyword">var</span> m = <span class="keyword">new</span> <span class="built_in">Map</span>([[<span class="string">'Michael'</span>, <span class="number">95</span>], [<span class="string">'Bob'</span>, <span class="number">75</span>], [<span class="string">'Tracy'</span>, <span class="number">85</span>]]);</span><br></pre></td></tr></table></figure>
<h5 id="常用操作-1"><a href="#常用操作-1" class="headerlink" title="常用操作"></a>常用操作</h5><ul>
<li>一个key只能对应一个value，所以，多次对一个key放入value，后面的值会把前面的值覆盖：</li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> m = <span class="keyword">new</span> <span class="built_in">Map</span>(); <span class="comment">// 空Map</span></span><br><span class="line">m.set(<span class="string">'Adam'</span>, <span class="number">67</span>); <span class="comment">// 添加新的key-value</span></span><br><span class="line">m.set(<span class="string">'Bob'</span>, <span class="number">59</span>);</span><br><span class="line">m.has(<span class="string">'Adam'</span>); <span class="comment">// 是否存在key 'Adam': true</span></span><br><span class="line">m.get(<span class="string">'Adam'</span>); <span class="comment">// 67</span></span><br><span class="line">m.delete(<span class="string">'Adam'</span>); <span class="comment">// 删除key 'Adam'</span></span><br><span class="line">m.get(<span class="string">'Adam'</span>); <span class="comment">// undefined</span></span><br></pre></td></tr></table></figure>
<h5 id="遍历"><a href="#遍历" class="headerlink" title="遍历"></a>遍历</h5><ol>
<li>for…of</li>
<li>forEach</li>
<li>解构赋值</li>
</ol>
<h4 id="Set"><a href="#Set" class="headerlink" title="Set"></a>Set</h4><p>Set和Map类似，也是一组key的集合，但不存储value。由于key不能重复，所以，在Set中，没有重复的key。</p>
<h5 id="简介"><a href="#简介" class="headerlink" title="简介"></a>简介</h5><ul>
<li>要创建一个Set，需要提供一个Array作为输入，或者直接创建一个空Set；</li>
<li>重复元素在Set中自动被过滤；</li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 创建</span></span><br><span class="line"><span class="keyword">var</span> s1 = <span class="keyword">new</span> <span class="built_in">Set</span>(); <span class="comment">// 空Set</span></span><br><span class="line"><span class="keyword">var</span> s2 = <span class="keyword">new</span> <span class="built_in">Set</span>([<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>]); <span class="comment">// 含1, 2, 3</span></span><br><span class="line"><span class="comment">// 自动去重</span></span><br><span class="line"><span class="keyword">var</span> s = <span class="keyword">new</span> <span class="built_in">Set</span>([<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">3</span>, <span class="string">'3'</span>]);</span><br><span class="line">s; <span class="comment">// Set &#123;1, 2, 3, "3"&#125;</span></span><br></pre></td></tr></table></figure>
<h5 id="常用操作-2"><a href="#常用操作-2" class="headerlink" title="常用操作"></a>常用操作</h5><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 增加</span></span><br><span class="line">s.add(<span class="number">4</span>);</span><br><span class="line">s; <span class="comment">// Set &#123;1, 2, 3, 4&#125;</span></span><br><span class="line">s.add(<span class="number">4</span>);</span><br><span class="line">s; <span class="comment">// 仍然是 Set &#123;1, 2, 3, 4&#125;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 删除</span></span><br><span class="line"><span class="keyword">var</span> s = <span class="keyword">new</span> <span class="built_in">Set</span>([<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>]);</span><br><span class="line">s; <span class="comment">// Set &#123;1, 2, 3&#125;</span></span><br><span class="line">s.delete(<span class="number">3</span>);</span><br><span class="line">s; <span class="comment">// Set &#123;1, 2&#125;</span></span><br><span class="line"></span><br><span class="line">s.has(<span class="number">3</span>); <span class="comment">// false</span></span><br></pre></td></tr></table></figure>
<h4 id="iterable"><a href="#iterable" class="headerlink" title="iterable"></a>iterable</h4><h5 id="概述-2"><a href="#概述-2" class="headerlink" title="概述"></a>概述</h5><ul>
<li>遍历Array可以采用下标循环，遍历Map和Set就无法使用下标。</li>
<li>为了统一集合类型，ES6标准引入了新的iterable类型，Array、Map和Set都属于iterable类型。</li>
<li>具有iterable类型的集合可以通过新的for…of循环来遍历。</li>
<li>for…of循环是ES6引入的新的语法,只循环集合内的元素本身值；</li>
</ul>
<h5 id="遍历元素"><a href="#遍历元素" class="headerlink" title="遍历元素"></a>遍历元素</h5><h6 id="for…of"><a href="#for…of" class="headerlink" title="for…of"></a>for…of</h6><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> a = [<span class="string">'A'</span>, <span class="string">'B'</span>, <span class="string">'C'</span>];</span><br><span class="line"><span class="keyword">var</span> s = <span class="keyword">new</span> <span class="built_in">Set</span>([<span class="string">'A'</span>, <span class="string">'B'</span>, <span class="string">'C'</span>]);</span><br><span class="line"><span class="keyword">var</span> m = <span class="keyword">new</span> <span class="built_in">Map</span>([[<span class="number">1</span>, <span class="string">'x'</span>], [<span class="number">2</span>, <span class="string">'y'</span>], [<span class="number">3</span>, <span class="string">'z'</span>]]);</span><br><span class="line"><span class="keyword">for</span> (<span class="keyword">var</span> x <span class="keyword">of</span> a) &#123; <span class="comment">// 遍历Array</span></span><br><span class="line">    <span class="built_in">console</span>.log(x);</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">for</span> (<span class="keyword">var</span> x <span class="keyword">of</span> s) &#123; <span class="comment">// 遍历Set</span></span><br><span class="line">    <span class="built_in">console</span>.log(x);</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">for</span> (<span class="keyword">var</span> x <span class="keyword">of</span> m) &#123; <span class="comment">// 遍历Map</span></span><br><span class="line">    <span class="built_in">console</span>.log(x[<span class="number">0</span>] + <span class="string">'='</span> + x[<span class="number">1</span>]);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 仅遍历集合自身元素值</span></span><br><span class="line"><span class="keyword">var</span> a = [<span class="string">'A'</span>, <span class="string">'B'</span>, <span class="string">'C'</span>];</span><br><span class="line">a.name = <span class="string">'Hello'</span>; <span class="comment">// a的对象属性</span></span><br><span class="line"><span class="keyword">for</span> (<span class="keyword">var</span> x <span class="keyword">of</span> a) &#123;</span><br><span class="line">    <span class="built_in">console</span>.log(x); <span class="comment">// 'A', 'B', 'C'</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h6 id="forEach"><a href="#forEach" class="headerlink" title="forEach"></a>forEach</h6><p>更好的遍历集合的方式是直接使用iterable内置的forEach方法，它接收一个函数，每次迭代就自动回调该函数；</p>
<blockquote>
<p>forEach接收的函数不能break；</p>
</blockquote>
<ol>
<li>遍历Array:</li>
</ol>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> a = [<span class="string">'A'</span>, <span class="string">'B'</span>, <span class="string">'C'</span>];</span><br><span class="line">a.forEach(<span class="function"><span class="keyword">function</span> (<span class="params">element, index, array</span>) </span>&#123;</span><br><span class="line">    <span class="comment">// element: 指向当前元素的值</span></span><br><span class="line">    <span class="comment">// index: 指向当前索引</span></span><br><span class="line">    <span class="comment">// array: 指向Array对象本身</span></span><br><span class="line">    <span class="built_in">console</span>.log(element + <span class="string">', index = '</span> + index);</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>
<ol>
<li>遍历Set:</li>
</ol>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Set与Array类似，但Set没有索引，因此回调函数的前两个参数都是元素本身：</span><br></pre></td></tr></table></figure>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> s = <span class="keyword">new</span> <span class="built_in">Set</span>([<span class="string">'A'</span>, <span class="string">'B'</span>, <span class="string">'C'</span>]);</span><br><span class="line">s.forEach(<span class="function"><span class="keyword">function</span> (<span class="params">element, sameElement, set</span>) </span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(element);</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>
<ol>
<li>遍历Map:</li>
</ol>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Map的回调函数参数依次为value、key和map本身</span><br></pre></td></tr></table></figure>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> m = <span class="keyword">new</span> <span class="built_in">Map</span>([[<span class="number">1</span>, <span class="string">'x'</span>], [<span class="number">2</span>, <span class="string">'y'</span>], [<span class="number">3</span>, <span class="string">'z'</span>]]);</span><br><span class="line">m.forEach(<span class="function"><span class="keyword">function</span> (<span class="params">value, key, map</span>) </span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(value);</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>
<ol>
<li>可以忽略无用参数</li>
</ol>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">如果对某些参数不感兴趣，由于JavaScript的函数调用不要求参数必须一致，因此可以忽略它们。例如，只需要获得Array的element：</span><br></pre></td></tr></table></figure>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> a = [<span class="string">'A'</span>, <span class="string">'B'</span>, <span class="string">'C'</span>];</span><br><span class="line">a.forEach(<span class="function"><span class="keyword">function</span> (<span class="params">element</span>) </span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(element);</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>
<h3 id="变量"><a href="#变量" class="headerlink" title="变量"></a>变量</h3><h4 id="var变量"><a href="#var变量" class="headerlink" title="var变量"></a>var变量</h4><h5 id="变量的定义："><a href="#变量的定义：" class="headerlink" title="变量的定义："></a>变量的定义：</h5><ul>
<li>变量在JavaScript中就是用一个变量名表示；</li>
<li>申明一个变量用var语句。</li>
<li>变量名是大小写英文、数字、$和_的组合，且不能用数字开头。</li>
<li>变量名也不能是JavaScript的关键字，如if、while等。</li>
<li>变量不仅可以是数字，还可以是任意数据类型。</li>
</ul>
<p>例如：<br><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> a; <span class="comment">// 申明了变量a，此时a的值为undefined</span></span><br><span class="line"><span class="keyword">var</span> $b = <span class="number">1</span>; <span class="comment">// 申明了变量$b，同时给$b赋值，此时$b的值为1</span></span><br><span class="line"><span class="keyword">var</span> s_007 = <span class="string">'007'</span>; <span class="comment">// s_007是一个字符串</span></span><br><span class="line"><span class="keyword">var</span> Answer = <span class="literal">true</span>; <span class="comment">// Answer是一个布尔值true</span></span><br><span class="line"><span class="keyword">var</span> t = <span class="literal">null</span>; <span class="comment">// t的值是null</span></span><br></pre></td></tr></table></figure></p>
<h5 id="全局变量"><a href="#全局变量" class="headerlink" title="全局变量"></a>全局变量</h5><p>不在任何函数内定义的变量就具有全局作用域。实际上，JavaScript默认有一个全局对象window，全局作用域的变量实际上被绑定到window的一个属性：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> course = <span class="string">'Learn JavaScript'</span>;</span><br><span class="line">alert(course); <span class="comment">// 'Learn JavaScript'</span></span><br><span class="line">alert(<span class="built_in">window</span>.course); <span class="comment">// 'Learn JavaScript'</span></span><br></pre></td></tr></table></figure>
<h5 id="变量注意事项"><a href="#变量注意事项" class="headerlink" title="变量注意事项"></a>变量注意事项</h5><ul>
<li>如果一个变量没有通过var申明就被使用，那么该变量就自动被申明为全局变量；</li>
<li>使用var申明的变量则不是全局变量，它的范围被限制在该变量被申明的函数体内，同名变量在不同的函数体内互不冲突。</li>
<li>在strict模式下运行的JavaScript代码，强制通过var申明变量；</li>
<li>var存在变量提升问题：在函数中，JavaScript的函数定义有个特点，它会先扫描整个函数体的语句，把所有申明的变量“提升”到函数顶部，在使用到该变量，但是该变量没有定义时，返回的是undefined，不报错；</li>
<li>判断某个全局变量是否存在用typeof window.myVar === ‘undefined’；</li>
<li>函数内部判断某个变量是否存在用typeof myVar === ‘undefined’。</li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">'use strict'</span>;</span><br></pre></td></tr></table></figure>
<h4 id="ES6变量"><a href="#ES6变量" class="headerlink" title="ES6变量"></a>ES6变量</h4><h5 id="let"><a href="#let" class="headerlink" title="let"></a>let</h5><p>ES6 推荐使用let命令来声明变量;</p>
<ul>
<li>let声明的变量，在let命令所在的块级作用域内有效,var在整个函数全局有效；</li>
<li>let声明的变量，在同一块级作用域中，不可以在声明之前使用。</li>
<li>let声明的变量，在同一块级作用域中不能重复声明；</li>
</ul>
<p>let和var区别示例：<br><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// a[i]中的i是函数全局的，所有数组a的成员里面的i，指向的都是同一个i；</span></span><br><span class="line"><span class="keyword">var</span> a = [];</span><br><span class="line"><span class="keyword">for</span> (<span class="keyword">var</span> i = <span class="number">0</span>; i &lt; <span class="number">10</span>; i++) &#123;</span><br><span class="line">    a[i] = <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">        <span class="built_in">console</span>.log(i);</span><br><span class="line">    &#125;;</span><br><span class="line">&#125;</span><br><span class="line">a[<span class="number">6</span>](); <span class="comment">// 10</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// let 声明的变量仅在块级作用域内有效</span></span><br><span class="line"><span class="keyword">let</span> b = [];</span><br><span class="line"><span class="keyword">for</span> (<span class="keyword">let</span> i = <span class="number">0</span>; i &lt; <span class="number">10</span>; i++) &#123;</span><br><span class="line">    b[i] = <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">        <span class="built_in">console</span>.log(i);</span><br><span class="line">    &#125;;</span><br><span class="line">&#125;</span><br><span class="line">b[<span class="number">6</span>](); <span class="comment">// 10</span></span><br></pre></td></tr></table></figure></p>
<h5 id="常量"><a href="#常量" class="headerlink" title="常量"></a>常量</h5><p>由于var和let申明的是变量，如果要申明一个常量，在ES6之前是不行的，我们通常用全部大写的变量来表示“这是一个常量，不要修改它的值”：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> PI = <span class="number">3.14</span>;</span><br></pre></td></tr></table></figure>
<h5 id="const"><a href="#const" class="headerlink" title="const"></a>const</h5><p>ES6 新增了const命令，用来声明不变的常量；</p>
<ul>
<li>const声明一个只读的常量,一旦声明，就必须立即初始化，不能留到以后赋值。常量的值不能改变。</li>
<li>const的作用域与let命令相同：只在声明所在的块级作用域内有效。</li>
<li>const命令声明的常量也是不提升到全局，同样存在暂时性死区，只能在声明的块级作用域内使用。</li>
<li>const声明的常量，也与let一样不可重复声明。</li>
<li>const声明的变量值不变，对于简单的数据类型(数值、字符串、布尔值)，变量指向的内存地址不变；对于复合类型的数据（数组和对象），变量指向的内存地址保存的指针不变，指针指向的是数据结构，数据结构的变化不受约束。</li>
</ul>
<p>注意：</p>
<ol>
<li>const数组对象的数据结构可以改动；</li>
</ol>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> foo = &#123;&#125;;</span><br><span class="line"><span class="comment">// 为 foo 添加一个属性，可以成功</span></span><br><span class="line">foo.prop = <span class="number">123</span>;</span><br></pre></td></tr></table></figure>
<h4 id="解构赋值"><a href="#解构赋值" class="headerlink" title="解构赋值"></a>解构赋值</h4><h5 id="概念"><a href="#概念" class="headerlink" title="概念"></a>概念</h5><ul>
<li>解构赋值，可以同时对一组变量进行赋值。</li>
<li>左边模式=右边模式，以模式匹配的写法，即等号两边的模式相同，左边模式的变量会被赋值为右边模式对应的值。</li>
</ul>
<p>解构要点：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">- 解构不成功，变量的值就等于undefined。</span><br><span class="line">- 如果等号左边的变量数量多于右边模式数组元素的数量，左边对应不到值的变量结构不成功值就是undefined。</span><br><span class="line">- 只要某种数据结构具有 Iterator 接口，都可以采用数组形式的解构赋值。</span><br><span class="line">- 解构赋值允许指定默认值，只有数组成员严格等于undefined，默认值才会生效（注意：null不严格等于undefined）。</span><br><span class="line">- 解构赋值的规则是，只要等号右边的值不是对象或数组，就先将其转为对象。由于undefined和null无法转为对象，所以对它们进行解构赋值，都会报错。</span><br></pre></td></tr></table></figure></p>
<h5 id="不完全解构"><a href="#不完全解构" class="headerlink" title="不完全解构"></a>不完全解构</h5><p>即等号左边的模式只匹配一部分的等号右边的数组，可以结构成功。</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> [x, y] = [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>];</span><br><span class="line">x <span class="comment">// 1</span></span><br><span class="line">y <span class="comment">// 2</span></span><br><span class="line"><span class="comment">// -----------------------------</span></span><br><span class="line"><span class="keyword">let</span> [a, [b], d] = [<span class="number">1</span>, [<span class="number">2</span>, <span class="number">3</span>], <span class="number">4</span>];</span><br><span class="line">a <span class="comment">// 1</span></span><br><span class="line">b <span class="comment">// 2</span></span><br><span class="line">d <span class="comment">// 4</span></span><br></pre></td></tr></table></figure>
<h5 id="解构目标类型"><a href="#解构目标类型" class="headerlink" title="解构目标类型"></a>解构目标类型</h5><h6 id="数组-1"><a href="#数组-1" class="headerlink" title="数组"></a>数组</h6><ol>
<li>简单数组</li>
</ol>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> [a, b, c] = [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>]; <span class="comment">// 结果：a=1 b=2 c=3</span></span><br></pre></td></tr></table></figure>
<ol>
<li>间隔性赋值（忽略前两个元素，只对第三个元素赋值）</li>
</ol>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> [ , , third] = [<span class="string">"foo"</span>, <span class="string">"bar"</span>, <span class="string">"baz"</span>]; <span class="comment">// 结果：third="baz"</span></span><br></pre></td></tr></table></figure>
<ol>
<li>嵌套数组</li>
</ol>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> [foo, [[bar], baz]] = [<span class="number">1</span>, [[<span class="number">2</span>], <span class="number">3</span>]]; <span class="comment">// 结果：foo=1 bar=2 baz=3</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> [head, ...tail] = [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>];</span><br><span class="line">head <span class="comment">// 1</span></span><br><span class="line">tail <span class="comment">// [2, 3, 4]</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> [x, y, ...z] = [<span class="string">'a'</span>];</span><br><span class="line">x <span class="comment">// "a"</span></span><br><span class="line">y <span class="comment">// undefined</span></span><br><span class="line">z <span class="comment">// []</span></span><br></pre></td></tr></table></figure>
<ol>
<li>数组解构赋值设置默认值</li>
</ol>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> [foo = <span class="literal">true</span>] = []; <span class="comment">// foo=true</span></span><br><span class="line"><span class="keyword">let</span> [x, y = <span class="string">'b'</span>] = [<span class="string">'a'</span>]; <span class="comment">// x='a', y='b'</span></span><br><span class="line"><span class="keyword">let</span> [x, y = <span class="string">'b'</span>] = [<span class="string">'a'</span>, <span class="literal">undefined</span>]; <span class="comment">// x='a', y='b'</span></span><br><span class="line"><span class="keyword">let</span> [x = <span class="number">1</span>] = [<span class="literal">null</span>]; <span class="comment">// x=null</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 表达式作为数组解构赋值默认值</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">f</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="string">'aaa'</span>);</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">let</span> [x = f()] = [<span class="number">1</span>];</span><br></pre></td></tr></table></figure>
<ol>
<li>数组按索引解构赋值给对象</li>
</ol>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> arr = [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>];</span><br><span class="line"><span class="comment">// 方括号这种写法，属于“属性名表达式</span></span><br><span class="line"><span class="keyword">let</span> &#123;<span class="number">0</span> : first, [arr.length - <span class="number">1</span>] : last&#125; = arr;</span><br><span class="line">first <span class="comment">// 1</span></span><br><span class="line">last <span class="comment">// 3</span></span><br></pre></td></tr></table></figure>
<h6 id="字符串-1"><a href="#字符串-1" class="headerlink" title="字符串"></a>字符串</h6><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> [a, b, c, d, e] = <span class="string">'hello'</span>;</span><br><span class="line">a <span class="comment">// "h"</span></span><br><span class="line">b <span class="comment">// "e"</span></span><br><span class="line">c <span class="comment">// "l"</span></span><br><span class="line">d <span class="comment">// "l"</span></span><br><span class="line">e <span class="comment">// "o"</span></span><br></pre></td></tr></table></figure>
<h6 id="Set-1"><a href="#Set-1" class="headerlink" title="Set"></a>Set</h6><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> [x, y, z] = <span class="keyword">new</span> <span class="built_in">Set</span>([<span class="string">'a'</span>, <span class="string">'b'</span>, <span class="string">'c'</span>]);</span><br><span class="line">x <span class="comment">// "a"</span></span><br></pre></td></tr></table></figure>
<h6 id="对象-1"><a href="#对象-1" class="headerlink" title="对象"></a>对象</h6><ul>
<li>被解构的对象的属性可以没有次序，变量必须与属性同名，才能取到正确的值。</li>
</ul>
<ol>
<li>简单对象</li>
</ol>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> &#123; foo, bar &#125; = &#123; <span class="attr">foo</span>: <span class="string">"aaa"</span>, <span class="attr">bar</span>: <span class="string">"bbb"</span> &#125;;</span><br><span class="line">foo <span class="comment">// "aaa"</span></span><br><span class="line">bar <span class="comment">// "bbb"</span></span><br><span class="line">baz <span class="comment">// undefined</span></span><br></pre></td></tr></table></figure>
<ol>
<li>对象属性别名赋值</li>
</ol>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 对象解构赋值的实质是下面这种形式的简写(&#123;属性名：属性别名&#125;=&#123;...&#125;)</span></span><br><span class="line"><span class="keyword">let</span> &#123; <span class="attr">foo</span>: foo, <span class="attr">bar</span>: bar &#125; = &#123; <span class="attr">foo</span>: <span class="string">"aaa"</span>, <span class="attr">bar</span>: <span class="string">"bbb"</span> &#125;;</span><br></pre></td></tr></table></figure>
<p>别名解构赋值<br><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> &#123; <span class="attr">foo</span>: baz &#125; = &#123; <span class="attr">foo</span>: <span class="string">'aaa'</span>, <span class="attr">bar</span>: <span class="string">'bbb'</span> &#125;;</span><br><span class="line">baz <span class="comment">// "aaa"</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> obj = &#123; <span class="attr">first</span>: <span class="string">'hello'</span>, <span class="attr">last</span>: <span class="string">'world'</span> &#125;;</span><br><span class="line"><span class="keyword">let</span> &#123; <span class="attr">first</span>: f, <span class="attr">last</span>: l &#125; = obj;</span><br><span class="line">f <span class="comment">// 'hello'</span></span><br><span class="line">l <span class="comment">// 'world'</span></span><br></pre></td></tr></table></figure></p>
<ol>
<li>嵌套结构的对象</li>
</ol>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 简单嵌套</span></span><br><span class="line"><span class="keyword">let</span> obj = &#123;</span><br><span class="line">  p: [</span><br><span class="line">    <span class="string">'Hello'</span>,</span><br><span class="line">    &#123; <span class="attr">y</span>: <span class="string">'World'</span> &#125;</span><br><span class="line">  ]</span><br><span class="line">&#125;;</span><br><span class="line"><span class="comment">// p是模式，不是变量</span></span><br><span class="line"><span class="keyword">let</span> &#123; <span class="attr">p</span>: [x, &#123; y &#125;] &#125; = obj;</span><br><span class="line">x <span class="comment">// "Hello"</span></span><br><span class="line">y <span class="comment">// "World"</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 复杂嵌套对象的解构赋值</span></span><br><span class="line"><span class="keyword">const</span> node = &#123;</span><br><span class="line">  loc: &#123;</span><br><span class="line">    start: &#123;</span><br><span class="line">      line: <span class="number">1</span>,</span><br><span class="line">      column: <span class="number">5</span></span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> &#123; loc, <span class="attr">loc</span>: &#123; start &#125;, <span class="attr">loc</span>: &#123; <span class="attr">start</span>: &#123; line &#125;&#125; &#125; = node;</span><br><span class="line">line <span class="comment">// 1</span></span><br><span class="line">loc  <span class="comment">// Object &#123;start: Object&#125;</span></span><br><span class="line">start <span class="comment">// Object &#123;line: 1, column: 5&#125;</span></span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">上面代码有三次解构赋值，分别是对loc、start、line三个属性的解构赋值。</span></span><br><span class="line"><span class="comment">注意，最后一次对line属性的解构赋值之中，只有line是变量，loc和start都是模式，不是变量。</span></span><br><span class="line"><span class="comment">*/</span></span><br></pre></td></tr></table></figure>
<ol>
<li>属性与变量冲突</li>
</ol>
<p>有些时候，如果变量已经被声明了，再次赋值的时候，正确的写法也会报语法错误,这是因为JavaScript引擎把{开头的语句当作了块处理，于是赋值不再合法。</p>
<p>解决方法是用小括号括起来：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> x, y;</span><br><span class="line">(&#123;x, y&#125; = &#123; <span class="attr">name</span>: <span class="string">'小明'</span>, <span class="attr">x</span>: <span class="number">100</span>, <span class="attr">y</span>: <span class="number">200</span>&#125;);</span><br></pre></td></tr></table></figure>
<ol>
<li>指定默认值</li>
</ol>
<p>同数组解构赋值指定默认值约束类似；</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> &#123;x = <span class="number">3</span>&#125; = &#123;&#125;;</span><br><span class="line">x <span class="comment">// 3</span></span><br><span class="line"><span class="keyword">var</span> &#123;x, y = <span class="number">5</span>&#125; = &#123;<span class="attr">x</span>: <span class="number">1</span>&#125;;</span><br><span class="line">x <span class="comment">// 1</span></span><br><span class="line">y <span class="comment">// 5</span></span><br><span class="line"><span class="keyword">var</span> &#123;<span class="attr">x</span>: y = <span class="number">3</span>&#125; = &#123;&#125;;</span><br><span class="line">y <span class="comment">// 3</span></span><br><span class="line"><span class="keyword">var</span> &#123;<span class="attr">x</span>: y = <span class="number">3</span>&#125; = &#123;<span class="attr">x</span>: <span class="number">5</span>&#125;;</span><br><span class="line">y <span class="comment">// 5</span></span><br><span class="line"><span class="keyword">var</span> &#123; <span class="attr">message</span>: msg = <span class="string">'Something went wrong'</span> &#125; = &#123;&#125;;</span><br><span class="line">msg <span class="comment">// "Something went wrong"</span></span><br></pre></td></tr></table></figure>
<ol>
<li>长度</li>
</ol>
<p>类似数组的对象都有一个length属性，因此还可以对这个属性解构赋值。<br><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> &#123;<span class="attr">length</span> : len&#125; = <span class="string">'hello'</span>;</span><br><span class="line">len <span class="comment">// 5</span></span><br></pre></td></tr></table></figure></p>
<h6 id="数值和布尔值"><a href="#数值和布尔值" class="headerlink" title="数值和布尔值"></a>数值和布尔值</h6><p>数值和布尔值的解构赋值时，如果等号右边是数值和布尔值，则会先转为对象。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 数值和布尔值的包装对象都有toString属性，因此变量s值等于对应类型的toString；</span></span><br><span class="line"><span class="keyword">let</span> &#123;<span class="attr">toString</span>: s&#125; = <span class="number">123</span>;</span><br><span class="line">s === <span class="built_in">Number</span>.prototype.toString <span class="comment">// true</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> &#123;<span class="attr">toString</span>: s&#125; = <span class="literal">true</span>;</span><br><span class="line">s === <span class="built_in">Boolean</span>.prototype.toString <span class="comment">// true</span></span><br></pre></td></tr></table></figure>
<h6 id="函数"><a href="#函数" class="headerlink" title="函数"></a>函数</h6><ol>
<li>对函数的参数解构赋值</li>
</ol>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">add</span>(<span class="params">[x, y]</span>)</span>&#123;</span><br><span class="line">  <span class="keyword">return</span> x + y;</span><br><span class="line">&#125;</span><br><span class="line">add([<span class="number">1</span>, <span class="number">2</span>]); <span class="comment">// 3</span></span><br><span class="line"><span class="comment">// -------------------</span></span><br><span class="line">[[<span class="number">1</span>, <span class="number">2</span>], [<span class="number">3</span>, <span class="number">4</span>]].map(<span class="function">(<span class="params">[a, b]</span>) =&gt;</span> a + b);</span><br><span class="line"><span class="comment">// [ 3, 7 ]</span></span><br></pre></td></tr></table></figure>
<ol>
<li>参数默认值</li>
</ol>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 为函数move的参数变量指定默认值</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">move</span>(<span class="params">&#123;x = <span class="number">0</span>, y = <span class="number">0</span>&#125; = &#123;&#125;</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> [x, y];</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">move(&#123;<span class="attr">x</span>: <span class="number">3</span>, <span class="attr">y</span>: <span class="number">8</span>&#125;); <span class="comment">// [3, 8]</span></span><br><span class="line">move(&#123;<span class="attr">x</span>: <span class="number">3</span>&#125;); <span class="comment">// [3, 0]</span></span><br><span class="line">move(&#123;&#125;); <span class="comment">// [0, 0]</span></span><br><span class="line">move(); <span class="comment">// [0, 0]</span></span><br><span class="line"><span class="comment">// ---------------------------------</span></span><br><span class="line"><span class="comment">// 为函数move的参数指定默认值，而不是为变量x和y指定默认值</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">move</span>(<span class="params">&#123;x, y&#125; = &#123; x: <span class="number">0</span>, y: <span class="number">0</span> &#125;</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> [x, y];</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">move(&#123;<span class="attr">x</span>: <span class="number">3</span>, <span class="attr">y</span>: <span class="number">8</span>&#125;); <span class="comment">// [3, 8]</span></span><br><span class="line">move(&#123;<span class="attr">x</span>: <span class="number">3</span>&#125;); <span class="comment">// [3, undefined]</span></span><br><span class="line">move(&#123;&#125;); <span class="comment">// [undefined, undefined]</span></span><br><span class="line">move(); <span class="comment">// [0, 0]</span></span><br></pre></td></tr></table></figure>
<h6 id="Iterator"><a href="#Iterator" class="headerlink" title="Iterator"></a>Iterator</h6><p>具有 Iterator 接口的数据类型都可以被结构赋值；</p>
<h6 id="Generator函数"><a href="#Generator函数" class="headerlink" title="Generator函数"></a>Generator函数</h6><p>Generator函数，原生具有 Iterator 接口。解构赋值会依次从这个接口获取值。</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span>* <span class="title">fibs</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">let</span> a = <span class="number">0</span>;</span><br><span class="line">  <span class="keyword">let</span> b = <span class="number">1</span>;</span><br><span class="line">  <span class="keyword">while</span> (<span class="literal">true</span>) &#123;</span><br><span class="line">    <span class="keyword">yield</span> a;</span><br><span class="line">    [a, b] = [b, a + b];</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> [first, second, third, fourth, fifth, sixth] = fibs();</span><br><span class="line">sixth <span class="comment">// 5</span></span><br></pre></td></tr></table></figure>
<h5 id="用途"><a href="#用途" class="headerlink" title="用途"></a>用途</h5><h6 id="交换变量的值"><a href="#交换变量的值" class="headerlink" title="交换变量的值"></a>交换变量的值</h6><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> x = <span class="number">1</span>;</span><br><span class="line"><span class="keyword">let</span> y = <span class="number">2</span>;</span><br><span class="line"></span><br><span class="line">[x, y] = [y, x];</span><br></pre></td></tr></table></figure>
<h6 id="从函数返回多个值"><a href="#从函数返回多个值" class="headerlink" title="从函数返回多个值"></a>从函数返回多个值</h6><p>函数只能返回一个值，如果要返回多个值，只能将它们放在数组或对象里返回。有了解构赋值，取出这些值就非常方便。</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 返回一个数组</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">example</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>];</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">let</span> [a, b, c] = example();</span><br><span class="line"><span class="comment">// 返回一个对象</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">example</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> &#123;</span><br><span class="line">    foo: <span class="number">1</span>,</span><br><span class="line">    bar: <span class="number">2</span></span><br><span class="line">  &#125;;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">let</span> &#123; foo, bar &#125; = example();</span><br></pre></td></tr></table></figure>
<h6 id="函数参数的定义"><a href="#函数参数的定义" class="headerlink" title="函数参数的定义"></a>函数参数的定义</h6><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 参数是一组有次序的值</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">f</span>(<span class="params">[x, y, z]</span>) </span>&#123; ... &#125;</span><br><span class="line">f([<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>]);</span><br><span class="line"></span><br><span class="line"><span class="comment">// 参数是一组无次序的值</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">f</span>(<span class="params">&#123;x, y, z&#125;</span>) </span>&#123; ... &#125;</span><br><span class="line">f(&#123;<span class="attr">z</span>: <span class="number">3</span>, <span class="attr">y</span>: <span class="number">2</span>, <span class="attr">x</span>: <span class="number">1</span>&#125;);</span><br></pre></td></tr></table></figure>
<h6 id="提取JSON数据"><a href="#提取JSON数据" class="headerlink" title="提取JSON数据"></a>提取JSON数据</h6><p>解构赋值对提取 JSON 对象中的数据，尤其有用。</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> jsonData = &#123;</span><br><span class="line">  id: <span class="number">42</span>,</span><br><span class="line">  status: <span class="string">"OK"</span>,</span><br><span class="line">  data: [<span class="number">867</span>, <span class="number">5309</span>]</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> &#123; id, status, <span class="attr">data</span>: number &#125; = jsonData;</span><br><span class="line"><span class="built_in">console</span>.log(id, status, number);</span><br><span class="line"><span class="comment">// 42, "OK", [867, 5309]</span></span><br></pre></td></tr></table></figure>
<h6 id="函数参数的默认值"><a href="#函数参数的默认值" class="headerlink" title="函数参数的默认值"></a>函数参数的默认值</h6><p>指定参数的默认值，就避免了在函数体内部再写var foo = config.foo || ‘default foo’;这样的语句。</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">jQuery.ajax = <span class="function"><span class="keyword">function</span> (<span class="params">url, &#123;</span></span></span><br><span class="line"><span class="function"><span class="params">  async = true,</span></span></span><br><span class="line"><span class="function"><span class="params">  beforeSend = function (</span>) </span>&#123;&#125;,</span><br><span class="line">  cache = <span class="literal">true</span>,</span><br><span class="line">  complete = <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;&#125;,</span><br><span class="line">  crossDomain = <span class="literal">false</span>,</span><br><span class="line">  global = <span class="literal">true</span>,</span><br><span class="line">  <span class="comment">// ... more config</span></span><br><span class="line">&#125;) &#123;</span><br><span class="line">  <span class="comment">// ... do stuff</span></span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>
<h6 id="遍历Map结构"><a href="#遍历Map结构" class="headerlink" title="遍历Map结构"></a>遍历Map结构</h6><p>任何部署了 Iterator 接口的对象，都可以用for…of循环遍历。Map 结构原生支持 Iterator 接口，配合变量的解构赋值，获取键名和键值就非常方便。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> map = <span class="keyword">new</span> <span class="built_in">Map</span>();</span><br><span class="line">map.set(<span class="string">'first'</span>, <span class="string">'hello'</span>);</span><br><span class="line">map.set(<span class="string">'second'</span>, <span class="string">'world'</span>);</span><br><span class="line"><span class="keyword">for</span> (<span class="keyword">let</span> [key, value] <span class="keyword">of</span> map) &#123;</span><br><span class="line">  <span class="built_in">console</span>.log(key + <span class="string">" is "</span> + value);</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// first is hello</span></span><br><span class="line"><span class="comment">// second is world</span></span><br></pre></td></tr></table></figure>
<p>如果只想获取键名，或者只想获取键值，可以写成下面这样。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 获取键名</span></span><br><span class="line"><span class="keyword">for</span> (<span class="keyword">let</span> [key] <span class="keyword">of</span> map) &#123;</span><br><span class="line">  <span class="comment">// ...</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// 获取键值</span></span><br><span class="line"><span class="keyword">for</span> (<span class="keyword">let</span> [,value] <span class="keyword">of</span> map) &#123;</span><br><span class="line">  <span class="comment">// ...</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h6 id="取出模板库成员"><a href="#取出模板库成员" class="headerlink" title="取出模板库成员"></a>取出模板库成员</h6><p>加载模块时，往往需要指定输入哪些方法。解构赋值使得输入语句非常清晰。<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> &#123; SourceMapConsumer, SourceNode &#125; = <span class="built_in">require</span>(<span class="string">"source-map"</span>);</span><br></pre></td></tr></table></figure></p>
<h3 id="函数-1"><a href="#函数-1" class="headerlink" title="函数"></a>函数</h3><h4 id="函数语法"><a href="#函数语法" class="headerlink" title="函数语法"></a>函数语法</h4><h5 id="普通函数"><a href="#普通函数" class="headerlink" title="普通函数"></a>普通函数</h5><h6 id="概述-3"><a href="#概述-3" class="headerlink" title="概述"></a>概述</h6><ul>
<li>function指出这是一个函数定义；</li>
<li>abs是函数的名称；</li>
<li>(x)括号内列出函数的参数，多个参数以,分隔；</li>
<li>{ … }之间的代码是函数体，可以包含若干语句，甚至可以没有任何语句。</li>
<li>return时，函数就执行完毕，并将结果返回；</li>
<li>如果没有return语句，函数执行完毕后也会返回结果，只是结果为undefined。</li>
<li>abs()函数实际上是一个函数对象，而函数名abs可以视为指向该函数的变量。</li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">abs</span>(<span class="params">x</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">if</span> (x &gt;= <span class="number">0</span>) &#123;</span><br><span class="line">        <span class="keyword">return</span> x;</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> -x;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 调用函数</span></span><br><span class="line">abs(<span class="number">10</span>); <span class="comment">// 返回10</span></span><br><span class="line"><span class="comment">// 调用函数，多传参数不会报错；</span></span><br><span class="line">abs(<span class="number">10</span>, <span class="string">'blablabla'</span>); <span class="comment">// 返回10</span></span><br><span class="line"><span class="comment">// 调用函数少传参数，返回NaN</span></span><br><span class="line">abs(); <span class="comment">// abs(x)函数的参数x将收到undefined，计算结果为NaN。</span></span><br></pre></td></tr></table></figure>
<h5 id="匿名函数"><a href="#匿名函数" class="headerlink" title="匿名函数"></a>匿名函数</h5><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 在这种方式下，function (x) &#123; ... &#125;是一个匿名函数，它没有函数名。</span></span><br><span class="line"><span class="comment">// 但是，这个匿名函数赋值给了变量abs，所以，通过变量abs就可以调用该函数。</span></span><br><span class="line"><span class="keyword">var</span> abs = <span class="function"><span class="keyword">function</span> (<span class="params">x</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">if</span> (x &gt;= <span class="number">0</span>) &#123;</span><br><span class="line">        <span class="keyword">return</span> x;</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> -x;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;; <span class="comment">// 函数体末尾加一个;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 调用</span></span><br><span class="line">abs(<span class="number">-19</span>); <span class="comment">// 19</span></span><br></pre></td></tr></table></figure>
<h5 id="自执行函数"><a href="#自执行函数" class="headerlink" title="自执行函数"></a>自执行函数</h5><p>我们创建了一个匿名的函数，并立即执行它，由于外部无法引用它内部的变量，因此在执行完后很快就会被释放，关键是这种机制不会污染全局对象。</p>
<blockquote>
<p>自执行函数，即定义和调用合为一体。</p>
</blockquote>
<h6 id="写法"><a href="#写法" class="headerlink" title="写法"></a>写法</h6><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">(<span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123; <span class="comment">/* code */</span> &#125; ()); <span class="comment">// 推荐使用这个</span></span><br><span class="line">(<span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123; <span class="comment">/* code */</span> &#125;)(); <span class="comment">// 但是这个也是可以用的</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//如果你不在意返回值，或者不怕难以阅读,甚至可以在function前面加一元操作符号。</span></span><br><span class="line">!<span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123; <span class="comment">/* code */</span> &#125; ();</span><br><span class="line">~<span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123; <span class="comment">/* code */</span> &#125; ();</span><br><span class="line">-<span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123; <span class="comment">/* code */</span> &#125; ();</span><br><span class="line">+<span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123; <span class="comment">/* code */</span> &#125; ();</span><br><span class="line"></span><br><span class="line"><span class="comment">//可以使用new关键字,但不确定它的效率</span></span><br><span class="line"><span class="keyword">new</span> <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123; <span class="comment">/* code */</span> &#125;</span><br><span class="line"><span class="keyword">new</span> <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123; <span class="comment">/* code */</span> &#125; () <span class="comment">// 如果需要传递参数，只需要加上括弧()</span></span><br></pre></td></tr></table></figure>
<h6 id="示例"><a href="#示例" class="headerlink" title="示例"></a>示例</h6><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span>(<span class="params">x</span>)</span>&#123;</span><br><span class="line">    alert(x);</span><br><span class="line">&#125;(<span class="number">5</span>);<span class="comment">//报错，function name expected</span></span><br><span class="line"> </span><br><span class="line"><span class="keyword">var</span> aa = <span class="function"><span class="keyword">function</span>(<span class="params">x</span>)</span>&#123;</span><br><span class="line">    alert(x);</span><br><span class="line">&#125;(<span class="number">1</span>);<span class="comment">//1</span></span><br><span class="line"> </span><br><span class="line"><span class="literal">true</span> &amp;&amp; <span class="function"><span class="keyword">function</span>(<span class="params">x</span>)</span>&#123;</span><br><span class="line">    alert(x);</span><br><span class="line">&#125;(<span class="number">2</span>);<span class="comment">//2</span></span><br><span class="line"> </span><br><span class="line"><span class="number">0</span>, <span class="function"><span class="keyword">function</span>(<span class="params">x</span>)</span>&#123;</span><br><span class="line">    alert(x);</span><br><span class="line">&#125;(<span class="number">3</span>);<span class="comment">//3</span></span><br><span class="line"> </span><br><span class="line">!<span class="function"><span class="keyword">function</span>(<span class="params">x</span>)</span>&#123;</span><br><span class="line">    alert(x);</span><br><span class="line">&#125;(<span class="number">4</span>);<span class="comment">//4</span></span><br><span class="line"> </span><br><span class="line">~<span class="function"><span class="keyword">function</span>(<span class="params">x</span>)</span>&#123;</span><br><span class="line">    alert(x);</span><br><span class="line">&#125;(<span class="number">5</span>);<span class="comment">//5</span></span><br><span class="line"> </span><br><span class="line">-<span class="function"><span class="keyword">function</span>(<span class="params">x</span>)</span>&#123;</span><br><span class="line">    alert(x);</span><br><span class="line">&#125;(<span class="number">6</span>);<span class="comment">//6</span></span><br><span class="line"> </span><br><span class="line">+<span class="function"><span class="keyword">function</span>(<span class="params">x</span>)</span>&#123;</span><br><span class="line">    alert(x);</span><br><span class="line">&#125;(<span class="number">7</span>);<span class="comment">//7</span></span><br><span class="line"> </span><br><span class="line"><span class="keyword">new</span> <span class="function"><span class="keyword">function</span> (<span class="params"></span>)</span>&#123;</span><br><span class="line">    alert(<span class="number">8</span>);<span class="comment">//8</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"> <span class="keyword">new</span> <span class="function"><span class="keyword">function</span> (<span class="params">x</span>)</span>&#123;</span><br><span class="line">   alert(x);</span><br><span class="line">&#125;(<span class="number">9</span>);<span class="comment">//9</span></span><br></pre></td></tr></table></figure>
<h5 id="函数参数检查"><a href="#函数参数检查" class="headerlink" title="函数参数检查"></a>函数参数检查</h5><p>避免参数undefined，可以对参数进行检查：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">abs</span>(<span class="params">x</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">if</span> (<span class="keyword">typeof</span> x !== <span class="string">'number'</span>) &#123;</span><br><span class="line">        <span class="keyword">throw</span> <span class="string">'Not a number'</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">if</span> (x &gt;= <span class="number">0</span>) &#123;</span><br><span class="line">        <span class="keyword">return</span> x;</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> -x;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h5 id="全参关键字"><a href="#全参关键字" class="headerlink" title="全参关键字"></a>全参关键字</h5><ul>
<li>JavaScript函数默认隐藏的关键字arguments，它只在函数内部起作用，并且永远指向当前函数的调用者传入的所有参数。</li>
<li>arguments类似Array但它不是一个Array；</li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 遍历参数</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">foo</span>(<span class="params">x</span>) </span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">'x = '</span> + x); <span class="comment">// 10</span></span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">var</span> i=<span class="number">0</span>; i&lt;<span class="built_in">arguments</span>.length; i++) &#123;</span><br><span class="line">        <span class="built_in">console</span>.log(<span class="string">'arg '</span> + i + <span class="string">' = '</span> + <span class="built_in">arguments</span>[i]); <span class="comment">// 10, 20, 30</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line">foo(<span class="number">10</span>, <span class="number">20</span>, <span class="number">30</span>);</span><br></pre></td></tr></table></figure>
<ul>
<li>利用arguments，你可以获得调用者传入的参数个数和所有参数，包括传入的不需要的参数。</li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">abs</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="keyword">if</span> (<span class="built_in">arguments</span>.length === <span class="number">0</span>) &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">var</span> x = <span class="built_in">arguments</span>[<span class="number">0</span>];</span><br><span class="line">    <span class="keyword">return</span> x &gt;= <span class="number">0</span> ? x : -x;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">abs(); <span class="comment">// 0</span></span><br><span class="line">abs(<span class="number">10</span>); <span class="comment">// 10</span></span><br><span class="line">abs(<span class="number">-9</span>); <span class="comment">// 9</span></span><br></pre></td></tr></table></figure>
<ul>
<li>arguments[i]类似Array通过索引获取具体参数值；</li>
</ul>
<h5 id="多余参数"><a href="#多余参数" class="headerlink" title="多余参数"></a>多余参数</h5><p>ES6标准引入了rest参数(…rest),将多余的参数放到Array里；</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">foo</span>(<span class="params">a, b, ...rest</span>) </span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">'a = '</span> + a);</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">'b = '</span> + b);</span><br><span class="line">    <span class="built_in">console</span>.log(rest);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">foo(<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>);</span><br><span class="line"><span class="comment">// 结果:</span></span><br><span class="line"><span class="comment">// a = 1</span></span><br><span class="line"><span class="comment">// b = 2</span></span><br><span class="line"><span class="comment">// Array [ 3, 4, 5 ]</span></span><br><span class="line"></span><br><span class="line">foo(<span class="number">1</span>);</span><br><span class="line"><span class="comment">// 结果:</span></span><br><span class="line"><span class="comment">// a = 1</span></span><br><span class="line"><span class="comment">// b = undefined</span></span><br><span class="line"><span class="comment">// Array []</span></span><br></pre></td></tr></table></figure>
<h5 id="函数返回多个值"><a href="#函数返回多个值" class="headerlink" title="函数返回多个值"></a>函数返回多个值</h5><p>return多行<br><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">foo</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> &#123; <span class="comment">// 这里不会自动加分号，因为&#123;表示语句尚未结束</span></span><br><span class="line">        name: <span class="string">'foo'</span></span><br><span class="line">    &#125;;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<h4 id="作用域"><a href="#作用域" class="headerlink" title="作用域"></a>作用域</h4><h5 id="全局作用域"><a href="#全局作用域" class="headerlink" title="全局作用域"></a>全局作用域</h5><ul>
<li>JavaScript实际上只有一个全局作用域。任何变量（函数也视为变量），如果没有在当前函数作用域中找到，就会继续往上查找，最后如果在全局作用域中也没有找到，则报ReferenceError错误;</li>
<li>以变量方式var foo = function () {}定义的函数实际上也是一个全局变量，因此，顶层函数的定义也被视为一个全局变量，并绑定到window对象;</li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">foo</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    alert(<span class="string">'foo'</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">foo(); <span class="comment">// 直接调用foo()</span></span><br><span class="line"><span class="built_in">window</span>.foo(); <span class="comment">// 通过window.foo()调用</span></span><br></pre></td></tr></table></figure>
<h5 id="名字空间"><a href="#名字空间" class="headerlink" title="名字空间"></a>名字空间</h5><p>不同的JavaScript文件如果使用了相同的全局变量，或者定义了相同名字的顶层函数，都会造成命名冲突，并且很难被发现。<br>减少冲突的一个方法是把自己的所有变量和函数全部绑定到一个全局变量中,即把自己的代码全部放入唯一的名字空间xxx中(许多著名的JavaScript库都是这么干的：jQuery，YUI，underscore等等)。</p>
<p>示例：<br><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 唯一的全局变量MYAPP:</span></span><br><span class="line"><span class="keyword">var</span> MYAPP = &#123;&#125;;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 其他变量:</span></span><br><span class="line">MYAPP.name = <span class="string">'myapp'</span>;</span><br><span class="line">MYAPP.version = <span class="number">1.0</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 其他函数:</span></span><br><span class="line">MYAPP.foo = <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="string">'foo'</span>;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure></p>
<h5 id="局部作用域"><a href="#局部作用域" class="headerlink" title="局部作用域"></a>局部作用域</h5><p>let替代var即可</p>
<h4 id="方法"><a href="#方法" class="headerlink" title="方法"></a>方法</h4><h5 id="概念-1"><a href="#概念-1" class="headerlink" title="概念"></a>概念</h5><ul>
<li>给对象的某个属性绑定函数，称为这个对象的方法；</li>
<li>对象属性绑定外部函数，无参数时，直接用函数名赋值；</li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> xiaoming = &#123;</span><br><span class="line">    name: <span class="string">'小明'</span>,</span><br><span class="line">    birth: <span class="number">1990</span>,</span><br><span class="line">    age: <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">        <span class="keyword">var</span> y = <span class="keyword">new</span> <span class="built_in">Date</span>().getFullYear();</span><br><span class="line">        <span class="keyword">return</span> y - <span class="keyword">this</span>.birth;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br><span class="line">xiaoming.age; <span class="comment">// function xiaoming.age()</span></span><br><span class="line">xiaoming.age(); <span class="comment">// 今年调用是25,明年调用就变成26了</span></span><br></pre></td></tr></table></figure>
<h5 id="this关键字"><a href="#this关键字" class="headerlink" title="this关键字"></a>this关键字</h5><h6 id="对象内部方法使用"><a href="#对象内部方法使用" class="headerlink" title="对象内部方法使用"></a>对象内部方法使用</h6><ul>
<li>在方法内部，this是一个特殊变量，它始终指向当前对象;</li>
<li>this没有确切的对象时，指向最上层的window；</li>
<li>方法的内部函数中的this,默认指向window,可以在方法顶层用var that = this;来指向当前对象；</li>
<li>对象.方法()：对象调用方法时，this指向此对象；</li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> xiaoming = &#123;</span><br><span class="line">    name: <span class="string">'小明'</span>,</span><br><span class="line">    birth: <span class="number">1990</span>,</span><br><span class="line">    age: <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">        <span class="keyword">var</span> that = <span class="keyword">this</span>; <span class="comment">// 在方法内部一开始就捕获this</span></span><br><span class="line">        <span class="function"><span class="keyword">function</span> <span class="title">getAgeFromBirth</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">            <span class="keyword">var</span> y = <span class="keyword">new</span> <span class="built_in">Date</span>().getFullYear();</span><br><span class="line">            <span class="keyword">return</span> y - that.birth; <span class="comment">// 用that而不是this</span></span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> getAgeFromBirth();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br><span class="line">xiaoming.age(); <span class="comment">// 25</span></span><br></pre></td></tr></table></figure>
<h6 id="对象外部函数使用"><a href="#对象外部函数使用" class="headerlink" title="对象外部函数使用"></a>对象外部函数使用</h6><ul>
<li>在对象外部的函数使用this时，如果函数不依赖于对象，此时this指向window;</li>
<li>函数本身的apply方法绑定对象到函数：它接收两个参数: 第一个参数就是需要绑定的this变量，第二个参数是Array。即apply()把参数打包成Array再传入函数中；</li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">getAge</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="keyword">var</span> y = <span class="keyword">new</span> <span class="built_in">Date</span>().getFullYear();</span><br><span class="line">    <span class="keyword">return</span> y - <span class="keyword">this</span>.birth;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> xiaoming = &#123;</span><br><span class="line">    name: <span class="string">'小明'</span>,</span><br><span class="line">    birth: <span class="number">1990</span>,</span><br><span class="line">    age: getAge</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line">xiaoming.age(); <span class="comment">// 25</span></span><br><span class="line">getAge.apply(xiaoming, []); <span class="comment">// 25, this指向xiaoming, 参数为空</span></span><br></pre></td></tr></table></figure>
<ul>
<li>函数本身的call()方法绑定对象到函数：它接收n个参数: 第一个参数就是需要绑定的this变量，之后的参数按顺序传入函数。</li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 对普通函数调用，我们通常把this绑定为null。</span></span><br><span class="line"><span class="built_in">Math</span>.max.apply(<span class="literal">null</span>, [<span class="number">3</span>, <span class="number">5</span>, <span class="number">4</span>]); <span class="comment">// 5</span></span><br><span class="line"><span class="built_in">Math</span>.max.call(<span class="literal">null</span>, <span class="number">3</span>, <span class="number">5</span>, <span class="number">4</span>); <span class="comment">// 5</span></span><br></pre></td></tr></table></figure>
<h4 id="高阶函数"><a href="#高阶函数" class="headerlink" title="高阶函数"></a>高阶函数</h4><h5 id="定义"><a href="#定义" class="headerlink" title="定义"></a>定义</h5><p>一个函数就可以接收另一个函数作为参数，这种函数就称之为高阶函数。</p>
<h6 id="简单的高阶函数"><a href="#简单的高阶函数" class="headerlink" title="简单的高阶函数"></a>简单的高阶函数</h6><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">add</span>(<span class="params">x, y, f</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> f(x) + f(y);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h5 id="map"><a href="#map" class="headerlink" title="map"></a>map</h5><p>map()方法定义在JavaScript的Array中，调用Array的map()方法，自己的函数，得到了一个新的Array作为结果;</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 把Array的所有数字平方：</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">pow</span>(<span class="params">x</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> x * x;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">var</span> arr = [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>, <span class="number">6</span>, <span class="number">7</span>, <span class="number">8</span>, <span class="number">9</span>];</span><br><span class="line"><span class="keyword">var</span> results = arr.map(pow); <span class="comment">// [1, 4, 9, 16, 25, 36, 49, 64, 81]</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 把Array的所有数字转为字符串：</span></span><br><span class="line"><span class="keyword">var</span> arr = [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>, <span class="number">6</span>, <span class="number">7</span>, <span class="number">8</span>, <span class="number">9</span>];</span><br><span class="line">arr.map(<span class="built_in">String</span>); <span class="comment">// ['1', '2', '3', '4', '5', '6', '7', '8', '9']</span></span><br></pre></td></tr></table></figure>
<h5 id="reduce"><a href="#reduce" class="headerlink" title="reduce"></a>reduce</h5><p>Array的reduce()把一个函数作用在这个Array的[x1, x2, x3…]元素成员上，这个函数必须接收两个参数，reduce()把结果继续和序列的下一个元素做累积计算；</p>
<h6 id="reduce效果公式"><a href="#reduce效果公式" class="headerlink" title="reduce效果公式"></a>reduce效果公式</h6><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[x1, x2, x3, x4].reduce(f) = f(f(f(x1, x2), x3), x4)</span><br></pre></td></tr></table></figure>
<h6 id="语法"><a href="#语法" class="headerlink" title="语法"></a>语法</h6><p>reduce有两个重载方法，第一个参数都是接受一个函数(数组成员操作逻辑)，第二个参数是一个初始值；<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">reduce(callbackfn: (previousValue: T, currentValue: T, currentIndex: number, array: T[]) =&gt; T): T;</span><br><span class="line">reduce(callbackfn: (previousValue: T, currentValue: T, currentIndex: number, array: T[]) =&gt; T, initialValue: T): T;</span><br></pre></td></tr></table></figure></p>
<h6 id="示例-1"><a href="#示例-1" class="headerlink" title="示例"></a>示例</h6><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 对一个Array求和</span></span><br><span class="line"><span class="keyword">var</span> arr = [<span class="number">1</span>, <span class="number">3</span>, <span class="number">5</span>, <span class="number">7</span>, <span class="number">9</span>];</span><br><span class="line">arr.reduce(<span class="function"><span class="keyword">function</span> (<span class="params">x, y</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> x + y;</span><br><span class="line">&#125;); <span class="comment">// 25</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 把[1, 3, 5, 7, 9]变换成整数13579</span></span><br><span class="line"><span class="keyword">var</span> arr = [<span class="number">1</span>, <span class="number">3</span>, <span class="number">5</span>, <span class="number">7</span>, <span class="number">9</span>];</span><br><span class="line">arr.reduce(<span class="function"><span class="keyword">function</span> (<span class="params">x, y</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> x * <span class="number">10</span> + y;</span><br><span class="line">&#125;); <span class="comment">// 13579</span></span><br></pre></td></tr></table></figure>
<h5 id="filter"><a href="#filter" class="headerlink" title="filter"></a>filter</h5><p>“筛选”函数。</p>
<h6 id="概念-2"><a href="#概念-2" class="headerlink" title="概念"></a>概念</h6><ul>
<li>用于把Array的某些元素过滤掉，然后返回剩下的元素;</li>
<li>和map()类似，Array的filter()也接收一个函数。和map()不同的是，filter()把传入的函数依次作用于每个元素，然后根据返回值是true还是false决定保留还是丢弃该元素。</li>
<li>filter()接收的回调函数，其实可以有多个参数。通常我们仅使用第一个参数，表示Array的某个元素。回调函数还可以接收另外两个参数，表示元素的位置和数组本身：</li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> arr = [<span class="string">'A'</span>, <span class="string">'B'</span>, <span class="string">'C'</span>];</span><br><span class="line"><span class="keyword">var</span> r = arr.filter(<span class="function"><span class="keyword">function</span> (<span class="params">element, index, self</span>) </span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(element); <span class="comment">// 依次打印'A', 'B', 'C'</span></span><br><span class="line">    <span class="built_in">console</span>.log(index); <span class="comment">// 依次打印0, 1, 2</span></span><br><span class="line">    <span class="built_in">console</span>.log(self); <span class="comment">// self就是变量arr</span></span><br><span class="line">    <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>
<h6 id="示例-2"><a href="#示例-2" class="headerlink" title="示例"></a>示例</h6><ol>
<li>Array中，删掉偶数，只保留奇数:</li>
</ol>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> arr = [<span class="number">1</span>, <span class="number">2</span>, <span class="number">4</span>, <span class="number">5</span>, <span class="number">6</span>, <span class="number">9</span>, <span class="number">10</span>, <span class="number">15</span>];</span><br><span class="line"><span class="keyword">var</span> r = arr.filter(<span class="function"><span class="keyword">function</span> (<span class="params">x</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> x % <span class="number">2</span> !== <span class="number">0</span>;</span><br><span class="line">&#125;);</span><br><span class="line">r; <span class="comment">// [1, 5, 9, 15]</span></span><br></pre></td></tr></table></figure>
<ol>
<li>Array中的空字符串删掉</li>
</ol>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> arr = [<span class="string">'A'</span>, <span class="string">''</span>, <span class="string">'B'</span>, <span class="literal">null</span>, <span class="literal">undefined</span>, <span class="string">'C'</span>, <span class="string">'  '</span>];</span><br><span class="line"><span class="keyword">var</span> r = arr.filter(<span class="function"><span class="keyword">function</span> (<span class="params">s</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> s &amp;&amp; s.trim(); <span class="comment">// 注意：IE9以下的版本没有trim()方法</span></span><br><span class="line">&#125;);</span><br><span class="line">r; <span class="comment">// ['A', 'B', 'C']</span></span><br></pre></td></tr></table></figure>
<ol>
<li>巧妙地去除Array的重复元素</li>
</ol>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 去除重复元素依靠的是indexOf总是返回第一个元素的位置，后续的重复元素位置与indexOf返回的位置不相等，因此被filter滤掉了</span></span><br><span class="line"><span class="keyword">var</span> arr = [<span class="string">'apple'</span>, <span class="string">'strawberry'</span>, <span class="string">'banana'</span>, <span class="string">'pear'</span>, <span class="string">'apple'</span>, <span class="string">'orange'</span>, <span class="string">'orange'</span>, <span class="string">'strawberry'</span>];</span><br><span class="line"><span class="keyword">var</span> r = arr.filter(<span class="function"><span class="keyword">function</span> (<span class="params">element, index, self</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> self.indexOf(element) === index;</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>
<h5 id="sort-1"><a href="#sort-1" class="headerlink" title="sort"></a>sort</h5><ul>
<li>Array的sort()方法默认把所有元素先转换为String再排序,默认升序；</li>
<li>默认情况下，对字符串排序，是按照ASCII的大小比较的；</li>
<li>sort()方法也作为高阶函数，可以接收一个比较函数来实现自定义的排序。</li>
<li>对于两个元素x和y的比较，如果认为x &lt; y，则返回-1，如果认为x == y，则返回0，如果认为x &gt; y，则返回1；</li>
</ul>
<p>注意：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sort()方法会直接对Array进行修改，它返回的结果仍是当前Array；</span><br></pre></td></tr></table></figure></p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 升序排序</span></span><br><span class="line"><span class="keyword">var</span> arr = [<span class="number">10</span>, <span class="number">20</span>, <span class="number">1</span>, <span class="number">2</span>];</span><br><span class="line">arr.sort(<span class="function"><span class="keyword">function</span> (<span class="params">x, y</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">if</span> (x &lt; y) &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="number">-1</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">if</span> (x &gt; y) &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="number">1</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;);</span><br><span class="line"><span class="built_in">console</span>.log(arr); <span class="comment">// [1, 2, 10, 20]</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 倒序排序</span></span><br><span class="line"><span class="keyword">var</span> arr = [<span class="number">10</span>, <span class="number">20</span>, <span class="number">1</span>, <span class="number">2</span>];</span><br><span class="line">arr.sort(<span class="function"><span class="keyword">function</span> (<span class="params">x, y</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">if</span> (x &lt; y) &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="number">1</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">if</span> (x &gt; y) &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="number">-1</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;); <span class="comment">// [20, 10, 2, 1]</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 忽略大小写排序</span></span><br><span class="line"><span class="keyword">var</span> arr = [<span class="string">'Google'</span>, <span class="string">'apple'</span>, <span class="string">'Microsoft'</span>];</span><br><span class="line">arr.sort(<span class="function"><span class="keyword">function</span> (<span class="params">s1, s2</span>) </span>&#123;</span><br><span class="line">    x1 = s1.toUpperCase();</span><br><span class="line">    x2 = s2.toUpperCase();</span><br><span class="line">    <span class="keyword">if</span> (x1 &lt; x2) &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="number">-1</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">if</span> (x1 &gt; x2) &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="number">1</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;); <span class="comment">// ['apple', 'Google', 'Microsoft']</span></span><br></pre></td></tr></table></figure>
<h4 id="闭包"><a href="#闭包" class="headerlink" title="闭包"></a>闭包</h4><h5 id="概念-3"><a href="#概念-3" class="headerlink" title="概念"></a>概念</h5><ul>
<li>闭包指：一个函数返回了一个函数后，其内部的局部变量还被新函数引用，返回的函数f并没有立刻执行，而是直到调用了f()才执行;</li>
<li>闭包就是携带状态的函数，并且它的状态可以完全对外隐藏起来。</li>
</ul>
<p>示例：创建一个闭包函数；</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">lazy_sum</span>(<span class="params">arr</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">var</span> sum = <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> arr.reduce(<span class="function"><span class="keyword">function</span> (<span class="params">x, y</span>) </span>&#123;</span><br><span class="line">            <span class="keyword">return</span> x + y;</span><br><span class="line">        &#125;);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> sum;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">var</span> f = lazy_sum([<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>]); <span class="comment">// function sum()</span></span><br><span class="line">f(); <span class="comment">// 15</span></span><br></pre></td></tr></table></figure>
<ul>
<li>闭包每次每次调用都会返回一个新的函数，即使参数相同，结果函数也不等；</li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> f1 = lazy_sum([<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>]);</span><br><span class="line"><span class="keyword">var</span> f2 = lazy_sum([<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>]);</span><br><span class="line">f1 === f2; <span class="comment">// false</span></span><br></pre></td></tr></table></figure>
<ul>
<li>返回函数不要引用任何循环变量，或者后续会发生变化的变量。</li>
</ul>
<p>示例：创建一个匿名函数并立刻执行:<br><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">(<span class="function"><span class="keyword">function</span> (<span class="params">x</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> x * x;</span><br><span class="line">&#125;)(<span class="number">3</span>);</span><br></pre></td></tr></table></figure></p>
<h5 id="实例"><a href="#实例" class="headerlink" title="实例"></a>实例</h5><ol>
<li>利用闭包求次方数；</li>
</ol>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">make_pow</span>(<span class="params">n</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="function"><span class="keyword">function</span> (<span class="params">x</span>) </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="built_in">Math</span>.pow(x, n);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 创建两个新函数:</span></span><br><span class="line"><span class="keyword">var</span> pow2 = make_pow(<span class="number">2</span>);</span><br><span class="line"><span class="keyword">var</span> pow3 = make_pow(<span class="number">3</span>);</span><br><span class="line"></span><br><span class="line"><span class="built_in">console</span>.log(pow2(<span class="number">5</span>)); <span class="comment">// 25</span></span><br><span class="line"><span class="built_in">console</span>.log(pow3(<span class="number">7</span>)); <span class="comment">// 343</span></span><br></pre></td></tr></table></figure>
<h4 id="箭头函数"><a href="#箭头函数" class="headerlink" title="箭头函数"></a>箭头函数</h4><h5 id="概述-4"><a href="#概述-4" class="headerlink" title="概述"></a>概述</h5><p>ES6标准新增了一种新的函数：Arrow Function（箭头函数）。</p>
<h6 id="特点-1"><a href="#特点-1" class="headerlink" title="特点"></a>特点</h6><ul>
<li>箭头函数相当于匿名函数，并且简化了函数定义。</li>
<li>this指向：箭头函数没有独立作用域，所以箭头函数中的this指向的是当前箭头函数父对象的作用域；</li>
<li>箭头函数不能用作构造函数；</li>
<li>箭头函数没有prototype属性；</li>
<li>箭头函数的语法格式：</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">1&gt; 只包含一个表达式，&#123;...&#125;和return都省略掉了。</span><br><span class="line">2&gt; 包含多条语句，不能省略&#123; ... &#125;和return;</span><br><span class="line">3&gt; 参数只有一个可以省略括号()，参数大于一个时不能省略括号；</span><br></pre></td></tr></table></figure>
<h6 id="示例-3"><a href="#示例-3" class="headerlink" title="示例"></a>示例</h6><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="comment">// 单语句箭头函数</span></span><br><span class="line">x =&gt; x * x</span><br><span class="line"></span><br><span class="line"><span class="comment">// 相当于</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> (<span class="params">x</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> x * x;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 两个参数</span></span><br><span class="line">(x, y) =&gt; x * x + y * y</span><br><span class="line"></span><br><span class="line"><span class="comment">// 无参数:</span></span><br><span class="line">() =&gt; <span class="number">3.14</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 多语句箭头函数</span></span><br><span class="line">x =&gt; &#123;</span><br><span class="line">    <span class="keyword">if</span> (x &gt; <span class="number">0</span>) &#123;</span><br><span class="line">        <span class="keyword">return</span> x * x;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">else</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> - x * x;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 可变参数:</span></span><br><span class="line">(x, y, ...rest) =&gt; &#123;</span><br><span class="line">    <span class="keyword">var</span> i, sum = x + y;</span><br><span class="line">    <span class="keyword">for</span> (i=<span class="number">0</span>; i&lt;rest.length; i++) &#123;</span><br><span class="line">        sum += rest[i];</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> sum;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 返回一个对象(注意：对象和函数体的&#123;...&#125;有语法冲突，需要用()括起来)</span></span><br><span class="line">x =&gt; (&#123; <span class="attr">foo</span>: x &#125;)</span><br></pre></td></tr></table></figure>
<h5 id="this"><a href="#this" class="headerlink" title="this"></a>this</h5><ul>
<li>箭头函数完全修复了this的指向，this总是指向词法作用域，也就是外层调用者obj;</li>
<li>箭头函数完全替代了var that = this; 获取外部调用obj的形式；</li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> obj = &#123;</span><br><span class="line">    birth: <span class="number">1990</span>,</span><br><span class="line">    getAge: <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">        <span class="keyword">var</span> b = <span class="keyword">this</span>.birth; <span class="comment">// 1990</span></span><br><span class="line">        <span class="keyword">var</span> fn = <span class="function"><span class="params">()</span> =&gt;</span> <span class="keyword">new</span> <span class="built_in">Date</span>().getFullYear() - <span class="keyword">this</span>.birth; <span class="comment">// this指向obj对象</span></span><br><span class="line">        <span class="keyword">return</span> fn();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br><span class="line">obj.getAge(); <span class="comment">// 25</span></span><br></pre></td></tr></table></figure>
<ul>
<li>由于this在箭头函数中已经按照词法作用域绑定了，所以，用call()或者apply()调用箭头函数时，无法对this进行绑定，即传入的第一个参数被忽略；</li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> obj = &#123;</span><br><span class="line">    birth: <span class="number">1990</span>,</span><br><span class="line">    getAge: <span class="function"><span class="keyword">function</span> (<span class="params">year</span>) </span>&#123;</span><br><span class="line">        <span class="keyword">var</span> b = <span class="keyword">this</span>.birth; <span class="comment">// 1990</span></span><br><span class="line">        <span class="keyword">var</span> fn = <span class="function">(<span class="params">y</span>) =&gt;</span> y - <span class="keyword">this</span>.birth; <span class="comment">// this.birth仍是1990</span></span><br><span class="line">        <span class="keyword">return</span> fn.call(&#123;<span class="attr">birth</span>:<span class="number">2000</span>&#125;, year);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br><span class="line">obj.getAge(<span class="number">2015</span>); <span class="comment">// 25</span></span><br></pre></td></tr></table></figure>
<h3 id="内置对象"><a href="#内置对象" class="headerlink" title="内置对象"></a>内置对象</h3><p>在JavaScript的世界里，一切都是对象。</p>
<h4 id="Object"><a href="#Object" class="headerlink" title="Object"></a>Object</h4><p>常用方法</p>
<h5 id="获取属性名"><a href="#获取属性名" class="headerlink" title="获取属性名"></a>获取属性名</h5><ul>
<li>作用：keys方法返回对象的所有属性名，返回一个数组；</li>
<li>语法：</li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">Object</span>.keys(obj); <span class="comment">//obj是目标对象；</span></span><br></pre></td></tr></table></figure>
<h5 id="获取属性值"><a href="#获取属性值" class="headerlink" title="获取属性值"></a>获取属性值</h5><p>[Object.values()]</p>
<ul>
<li>返回自己的键值对中属性的值,返回的数组顺序，也跟Object.entries()保持一致。</li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">Object</span>.values(&#123; <span class="attr">one</span>: <span class="number">1</span>, <span class="attr">two</span>: <span class="number">2</span> &#125;)            <span class="comment">//[1, 2]</span></span><br><span class="line"><span class="built_in">Object</span>.values(&#123; <span class="number">3</span>: <span class="string">'a'</span>, <span class="number">4</span>: <span class="string">'b'</span>, <span class="number">1</span>: <span class="string">'c'</span> &#125;)    <span class="comment">//['c', 'a', 'b']</span></span><br></pre></td></tr></table></figure>
<h5 id="对象转二维数组"><a href="#对象转二维数组" class="headerlink" title="对象转二维数组"></a>对象转二维数组</h5><p>[Object.entries()]</p>
<ul>
<li>该方法会将某个对象的可枚举属性与值按照二维数组的方式返回。若目标对象是数组时，则会将数组的下标作为键值返回。</li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">Object</span>.entries(&#123; <span class="attr">one</span>: <span class="number">1</span>, <span class="attr">two</span>: <span class="number">2</span> &#125;)    <span class="comment">//[['one', 1], ['two', 2]]</span></span><br><span class="line"><span class="built_in">Object</span>.entries([<span class="number">1</span>, <span class="number">2</span>])                <span class="comment">//[['0', 1], ['1', 2]]</span></span><br></pre></td></tr></table></figure>
<blockquote>
<p>注意：键值对中，如果键的值是Symbol，编译时将会被忽略。</p>
</blockquote>
<ul>
<li>Object.entries()返回的数组的顺序与for-in循环保持一致，即如果对象的key值是数字，则返回值会对key值进行排序，返回的是排序后的结果。例如:</li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">Object</span>.entries(&#123; <span class="number">3</span>: <span class="string">'a'</span>, <span class="number">4</span>: <span class="string">'b'</span>, <span class="number">1</span>: <span class="string">'c'</span> &#125;)    <span class="comment">//[['1', 'c'], ['3', 'a'], ['4', 'b']]</span></span><br></pre></td></tr></table></figure>
<h6 id="使用场景"><a href="#使用场景" class="headerlink" title="使用场景"></a>使用场景</h6><ul>
<li>对象属性的遍历：</li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> obj = &#123; <span class="attr">one</span>: <span class="number">1</span>, <span class="attr">two</span>: <span class="number">2</span> &#125;;</span><br><span class="line"><span class="keyword">for</span> (<span class="keyword">let</span> [k,v] <span class="keyword">of</span> <span class="built_in">Object</span>.entries(obj)) &#123;</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="string">`<span class="subst">$&#123;<span class="built_in">JSON</span>.stringify(k)&#125;</span>: <span class="subst">$&#123;<span class="built_in">JSON</span>.stringify(v)&#125;</span>`</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//输出结果如下：</span></span><br><span class="line"><span class="string">'one'</span>: <span class="number">1</span></span><br><span class="line"><span class="string">'two'</span>: <span class="number">2</span></span><br></pre></td></tr></table></figure>
<h5 id="浅拷贝"><a href="#浅拷贝" class="headerlink" title="浅拷贝"></a>浅拷贝</h5><ul>
<li>作用：Object.assign() 方法用于将所有可枚举属性的值从一个或多个源对象复制到目标对象。它将返回目标对象。</li>
<li>语法：</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">Object.assign(target, ...sources)</span><br><span class="line">【参数】</span><br><span class="line">- target：目标对象（如果参数不是对象，则会先转成对象，然后返回）。</span><br><span class="line">- sources：源对象。</span><br></pre></td></tr></table></figure>
<ul>
<li>要点：</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">1. 如果目标对象与源对象有同名属性，或多个源对象有同名属性，则后面的属性会覆盖前面的属性。</span><br><span class="line">2. 由于undefined和null无法转成对象，所以如果它们作为参数，就会报错。</span><br><span class="line">3. Object.assign拷贝的属性是有限制的，只拷贝源对象的自身属性（不拷贝继承属性），也不拷贝不可枚举的属性（enumerable: false）。</span><br><span class="line">4. Object.assign方法实行的是浅拷贝，而不是深拷贝。也就是说，如果源对象某个属性的值是对象，那么目标对象拷贝得到的是这个对象的引用。</span><br></pre></td></tr></table></figure>
<ul>
<li>示例：</li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> target = &#123; <span class="attr">a</span>: <span class="number">1</span> &#125;;  </span><br><span class="line"><span class="keyword">var</span> source1 = &#123; <span class="attr">b</span>: <span class="number">2</span> &#125;;  </span><br><span class="line"><span class="keyword">var</span> source2 = &#123; <span class="attr">c</span>: <span class="number">3</span> &#125;;  </span><br><span class="line"><span class="built_in">Object</span>.assign(target, source1, source2);  </span><br><span class="line">target <span class="comment">// &#123;a:1, b:2, c:3&#125;</span></span><br></pre></td></tr></table></figure>
<h5 id="属性和属性描述"><a href="#属性和属性描述" class="headerlink" title="属性和属性描述"></a>属性和属性描述</h5><p>[Object.getOwnPropertyDescriptors()]</p>
<ul>
<li>该方法会返回目标对象中所有属性的属性描述符，该属性必须是对象自己定义的，不能是从原型链继承来的。</li>
</ul>
<h6 id="语法-1"><a href="#语法-1" class="headerlink" title="语法"></a>语法</h6><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">Object.getOwnPropertyDescriptors(obj,&apos;propName&apos;)</span><br><span class="line">【参数】</span><br><span class="line">&gt; obj: 对象本身；</span><br><span class="line">&gt; propName: 用引号包裹，obj的属性key;</span><br></pre></td></tr></table></figure>
<h6 id="使用实例"><a href="#使用实例" class="headerlink" title="使用实例"></a>使用实例</h6><ol>
<li>单个参数：</li>
</ol>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> obj = &#123;</span><br><span class="line">  id: <span class="number">1</span>,</span><br><span class="line">  name: <span class="string">'test'</span>,</span><br><span class="line">  get gender() &#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">'gender'</span>)</span><br><span class="line">  &#125;,</span><br><span class="line">  set grade(g) &#123;</span><br><span class="line">    <span class="built_in">console</span>.log(g)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="built_in">Object</span>.getOwnPropertyDescriptors(obj)</span><br><span class="line"></span><br><span class="line"><span class="comment">//输出结果为：</span></span><br><span class="line">&#123;</span><br><span class="line">  gender: &#123;</span><br><span class="line">    configurable: <span class="literal">true</span>,</span><br><span class="line">    enumerable: <span class="literal">true</span>,</span><br><span class="line">    get: f gender(),</span><br><span class="line">    set: <span class="literal">undefined</span></span><br><span class="line">  &#125;,</span><br><span class="line">  grade: &#123;</span><br><span class="line">    configurable: <span class="literal">true</span>,</span><br><span class="line">    enumerable: <span class="literal">true</span>,</span><br><span class="line">    get: <span class="literal">undefined</span>,</span><br><span class="line">    set: f grade(g)</span><br><span class="line">  &#125;,</span><br><span class="line">  id: &#123;</span><br><span class="line">    configurable: <span class="literal">true</span>,</span><br><span class="line">    enumerable: <span class="literal">true</span>,</span><br><span class="line">    value: <span class="number">1</span>,</span><br><span class="line">    writable: <span class="literal">true</span></span><br><span class="line">  &#125;,</span><br><span class="line">  name: &#123;</span><br><span class="line">    configurable: <span class="literal">true</span>,</span><br><span class="line">    enumerable: <span class="literal">true</span>,</span><br><span class="line">    value: <span class="string">'test'</span>,</span><br><span class="line">    writable: <span class="literal">true</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<ol>
<li>两个参数</li>
</ol>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> obj = &#123;</span><br><span class="line">  id: <span class="number">1</span>,</span><br><span class="line">  name: <span class="string">'test'</span>,</span><br><span class="line">  get gender() &#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">'gender'</span>)</span><br><span class="line">  &#125;,</span><br><span class="line">  set grade(g) &#123;</span><br><span class="line">    <span class="built_in">console</span>.log(g)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="built_in">Object</span>.getOwnPropertyDescriptors(obj, <span class="string">'id'</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment">//输出结果为：</span></span><br><span class="line">&#123;</span><br><span class="line">  id: &#123;</span><br><span class="line">    configurable: <span class="literal">true</span>,</span><br><span class="line">    enumerable: <span class="literal">true</span>,</span><br><span class="line">    value: <span class="number">1</span>,</span><br><span class="line">    writable: <span class="literal">true</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h6 id="使用场景-拷贝"><a href="#使用场景-拷贝" class="headerlink" title="使用场景-拷贝"></a>使用场景-拷贝</h6><p>Object.getOwnPropertyDescriptors()主要是为了解决Object.assign()无法正确拷贝get属性和set属性的问题。</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> obj = &#123;</span><br><span class="line">  id: <span class="number">1</span>,</span><br><span class="line">  name: <span class="string">'test'</span>,</span><br><span class="line">  get gender() &#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">'gender'</span>)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="built_in">Object</span>.assign(obj)</span><br><span class="line"></span><br><span class="line"><span class="comment">//输出结果为：</span></span><br><span class="line">&#123;</span><br><span class="line">  gender: <span class="literal">undefined</span></span><br><span class="line">  id: <span class="number">1</span>,</span><br><span class="line">  name: <span class="string">'test'</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<blockquote>
<p>Object.getOwnPropertyDescriptors方法配合Object.defineProperties方法，就可以实现正确拷贝。</p>
</blockquote>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> obj = &#123;</span><br><span class="line">  id: <span class="number">1</span>,</span><br><span class="line">  name: <span class="string">'test'</span>,</span><br><span class="line">  get gender() &#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">'gender'</span>)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">let</span> obj1 = &#123;&#125;</span><br><span class="line"><span class="built_in">Object</span>.defineProperties(obj1, <span class="built_in">Object</span>.getOwnPropertyDescriptors(obj))</span><br><span class="line"><span class="built_in">Object</span>.getOwnPropertyDescriptors(obj1)</span><br><span class="line"></span><br><span class="line"><span class="comment">//输出结果为：</span></span><br><span class="line">&#123;</span><br><span class="line">  gender: &#123;</span><br><span class="line">    configurable: <span class="literal">true</span>,</span><br><span class="line">    enumerable: <span class="literal">true</span>,</span><br><span class="line">    get: f gender(),</span><br><span class="line">    set: <span class="literal">undefined</span></span><br><span class="line">  &#125;,</span><br><span class="line">  id: &#123;</span><br><span class="line">    configurable: <span class="literal">true</span>,</span><br><span class="line">    enumerable: <span class="literal">true</span>,</span><br><span class="line">    value: <span class="number">1</span>,</span><br><span class="line">    writable: <span class="literal">true</span></span><br><span class="line">  &#125;,</span><br><span class="line">  name: &#123;</span><br><span class="line">    configurable: <span class="literal">true</span>,</span><br><span class="line">    enumerable: <span class="literal">true</span>,</span><br><span class="line">    value: <span class="string">'test'</span>,</span><br><span class="line">    writable: <span class="literal">true</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h5 id="冻结对象"><a href="#冻结对象" class="headerlink" title="冻结对象"></a>冻结对象</h5><ul>
<li>freeze 用来冻结对象属性，此模式下对象添加/更改属性会报错或不起作用；</li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> foo=<span class="built_in">Object</span>.freeze(&#123;&#125;);</span><br></pre></td></tr></table></figure>
<ul>
<li>彻底冻结：遍历对象成员，冻结对象本身和对象的属性：</li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> constantize = <span class="function">(<span class="params">obj</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="built_in">Object</span>.freeze(obj);</span><br><span class="line">  <span class="built_in">Object</span>.keys(obj).forEach( <span class="function">(<span class="params">key, i</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">if</span> ( <span class="keyword">typeof</span> obj[key] === <span class="string">'object'</span> ) &#123;</span><br><span class="line">      constantize( obj[key] );</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;);</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>
<h4 id="对象类型"><a href="#对象类型" class="headerlink" title="对象类型"></a>对象类型</h4><h5 id="基础对象类型"><a href="#基础对象类型" class="headerlink" title="基础对象类型"></a>基础对象类型</h5><ul>
<li>用typeof操作符获取对象的类型，它总是返回一个字符串;</li>
<li>用typeof将无法区分出null、Array和通常意义上的object{}。</li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">typeof</span> <span class="number">123</span>; <span class="comment">// 'number'</span></span><br><span class="line"><span class="keyword">typeof</span> <span class="literal">NaN</span>; <span class="comment">// 'number'</span></span><br><span class="line"><span class="keyword">typeof</span> <span class="string">'str'</span>; <span class="comment">// 'string'</span></span><br><span class="line"><span class="keyword">typeof</span> <span class="literal">true</span>; <span class="comment">// 'boolean'</span></span><br><span class="line"><span class="keyword">typeof</span> <span class="literal">undefined</span>; <span class="comment">// 'undefined'</span></span><br><span class="line"><span class="keyword">typeof</span> <span class="built_in">Math</span>.abs; <span class="comment">// 'function'</span></span><br><span class="line"><span class="keyword">typeof</span> <span class="literal">null</span>; <span class="comment">// 'object'</span></span><br><span class="line"><span class="keyword">typeof</span> []; <span class="comment">// 'object'</span></span><br><span class="line"><span class="keyword">typeof</span> &#123;&#125;; <span class="comment">// 'object'</span></span><br></pre></td></tr></table></figure>
<h5 id="简单类型转换"><a href="#简单类型转换" class="headerlink" title="简单类型转换"></a>简单类型转换</h5><h6 id="toString"><a href="#toString" class="headerlink" title="toString()"></a>toString()</h6><ul>
<li>ECMAScript 定义所有对象都有 toString() 方法，无论它是伪对象，还是真对象。因为 String 类型属于伪对象.</li>
<li><p>null和 undefined不可以；</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">arrayObject.toString()</span><br><span class="line">booleanObject.toString()</span><br><span class="line">dateObject.toString()</span><br><span class="line">NumberObject.toString()</span><br><span class="line">stringObject.toString()</span><br></pre></td></tr></table></figure>
</li>
<li><p>Boolean 类型的 toString() 方法只是输出 “true” 或 “false”;</p>
</li>
<li>Number 类型的 toString() 方法比较特殊，它有两种模式，即默认模式和基模式。</li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 1. 默认模式，toString()方法只是用相应的字符串输出数字值（无论是整数、浮点数还是科学计数法）的十进制;</span></span><br><span class="line"><span class="keyword">var</span> iNum1 = <span class="number">10</span>;</span><br><span class="line"><span class="keyword">var</span> iNum2 = <span class="number">10.0</span>;</span><br><span class="line">alert(iNum1.toString());	<span class="comment">//输出 "10"</span></span><br><span class="line">alert(iNum2.toString());	<span class="comment">//输出 "10"</span></span><br><span class="line"><span class="comment">// 2. 按参数类型转换，参数是数值表示几进制；</span></span><br><span class="line"><span class="keyword">var</span> iNum = <span class="number">10</span>;</span><br><span class="line">alert(iNum.toString(<span class="number">2</span>));	<span class="comment">//输出 "1010"</span></span><br><span class="line">alert(iNum.toString(<span class="number">8</span>));	<span class="comment">//输出 "12"</span></span><br><span class="line">alert(iNum.toString(<span class="number">16</span>));	<span class="comment">//输出 "A"</span></span><br></pre></td></tr></table></figure>
<h6 id="转换成数字"><a href="#转换成数字" class="headerlink" title="转换成数字"></a>转换成数字</h6><p>parseInt() 和 parseFloat() </p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 基本转换</span></span><br><span class="line"><span class="keyword">var</span> iNum1 = <span class="built_in">parseInt</span>(<span class="string">"56.9"</span>);	<span class="comment">//返回 56</span></span><br><span class="line"><span class="keyword">var</span> fNum3 = <span class="built_in">parseFloat</span>(<span class="string">"11.2"</span>);	<span class="comment">//返回 11.2</span></span><br><span class="line"><span class="comment">// 按配置的进制转</span></span><br><span class="line"><span class="keyword">var</span> iNum2 = <span class="built_in">parseInt</span>(<span class="string">"10"</span>, <span class="number">8</span>);	<span class="comment">//返回 8</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> fNum1 = <span class="built_in">parseFloat</span>(<span class="string">"red"</span>);	<span class="comment">//返回 NaN</span></span><br></pre></td></tr></table></figure>
<h5 id="强制类型转换"><a href="#强制类型转换" class="headerlink" title="强制类型转换"></a>强制类型转换</h5><p>ECMAScript 中可用的 3 种强制类型转换如下：</p>
<ol>
<li>Boolean(value) - 把给定的值转换成 Boolean 型；</li>
</ol>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> b1 = <span class="built_in">Boolean</span>(<span class="string">""</span>);		<span class="comment">//false - 空字符串</span></span><br><span class="line"><span class="keyword">var</span> b2 = <span class="built_in">Boolean</span>(<span class="string">"hello"</span>);		<span class="comment">//true - 非空字符串</span></span><br><span class="line"><span class="keyword">var</span> b1 = <span class="built_in">Boolean</span>(<span class="number">50</span>);		<span class="comment">//true - 非零数字</span></span><br><span class="line"><span class="keyword">var</span> b1 = <span class="built_in">Boolean</span>(<span class="literal">null</span>);		<span class="comment">//false - null</span></span><br><span class="line"><span class="keyword">var</span> b1 = <span class="built_in">Boolean</span>(<span class="number">0</span>);		<span class="comment">//false - 零</span></span><br><span class="line"><span class="keyword">var</span> b1 = <span class="built_in">Boolean</span>(<span class="keyword">new</span> object());	<span class="comment">//true - 对象</span></span><br></pre></td></tr></table></figure>
<ol>
<li>Number(value) - 把给定的值转换成数字（可以是整数或浮点数）；</li>
</ol>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">用法	结果</span><br><span class="line">Number(false)	0</span><br><span class="line">Number(true)	1</span><br><span class="line">Number(undefined)	NaN</span><br><span class="line">Number(null)	0</span><br><span class="line">Number(&quot;1.2&quot;)	1.2</span><br><span class="line">Number(&quot;12&quot;)	12</span><br><span class="line">Number(&quot;1.2.3&quot;)	NaN</span><br><span class="line">Number(new object())	NaN</span><br><span class="line">Number(50)	50</span><br></pre></td></tr></table></figure>
<ol>
<li>String(value) - 把给定的值转换成字符串；</li>
</ol>
<p>最后一种强制类型转换方法 String() 是最简单的，因为它可把任何值转换成字符串。<br><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> s1 = <span class="built_in">String</span>(<span class="literal">null</span>);	<span class="comment">//"null"</span></span><br><span class="line"><span class="keyword">var</span> oNull = <span class="literal">null</span>;</span><br><span class="line"><span class="keyword">var</span> s2 = oNull.toString();	<span class="comment">//会引发错误</span></span><br></pre></td></tr></table></figure></p>
<h5 id="包装对象"><a href="#包装对象" class="headerlink" title="包装对象"></a>包装对象</h5><h6 id="概念-4"><a href="#概念-4" class="headerlink" title="概念"></a>概念</h6><ul>
<li>形如string对应String,用new关键字来创建string的包装对象；</li>
<li>一般不推荐使用包装对象;</li>
</ul>
<h6 id="常见的包装对象"><a href="#常见的包装对象" class="headerlink" title="常见的包装对象"></a>常见的包装对象</h6><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> n = <span class="keyword">new</span> <span class="built_in">Number</span>(<span class="number">123</span>); <span class="comment">// 123,生成了新的包装类型</span></span><br><span class="line"><span class="keyword">var</span> b = <span class="keyword">new</span> <span class="built_in">Boolean</span>(<span class="literal">true</span>); <span class="comment">// true,生成了新的包装类型</span></span><br><span class="line"><span class="keyword">var</span> s = <span class="keyword">new</span> <span class="built_in">String</span>(<span class="string">'str'</span>); <span class="comment">// 'str',生成了新的包装类型</span></span><br></pre></td></tr></table></figure>
<h6 id="要点"><a href="#要点" class="headerlink" title="要点"></a>要点</h6><ul>
<li>包装对象后，数据类型已经变为object；</li>
<li>包装对象和原始值用===比较会返回false；</li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">typeof</span> <span class="keyword">new</span> <span class="built_in">Number</span>(<span class="number">123</span>); <span class="comment">// 'object'</span></span><br><span class="line"><span class="keyword">new</span> <span class="built_in">Number</span>(<span class="number">123</span>) === <span class="number">123</span>; <span class="comment">// false</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">typeof</span> <span class="keyword">new</span> <span class="built_in">Boolean</span>(<span class="literal">true</span>); <span class="comment">// 'object'</span></span><br><span class="line"><span class="keyword">new</span> <span class="built_in">Boolean</span>(<span class="literal">true</span>) === <span class="literal">true</span>; <span class="comment">// false</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">typeof</span> <span class="keyword">new</span> <span class="built_in">String</span>(<span class="string">'str'</span>); <span class="comment">// 'object'</span></span><br><span class="line"><span class="keyword">new</span> <span class="built_in">String</span>(<span class="string">'str'</span>) === <span class="string">'str'</span>; <span class="comment">// false</span></span><br></pre></td></tr></table></figure>
<h4 id="Math对象"><a href="#Math对象" class="headerlink" title="Math对象"></a>Math对象</h4><p>Math 对象用于执行数学任务。</p>
<p>Math 对象并不像 Date 和 String 那样是对象的类，因此没有构造函数 Math()，像 Math.sin() 这样的函数只是函数，不是某个对象的方法。您无需创建它，通过把 Math 作为对象使用就可以调用其所有属性和方法。</p>
<h5 id="Math对象属性"><a href="#Math对象属性" class="headerlink" title="Math对象属性"></a>Math对象属性</h5><ul>
<li>E    返回算术常量 e，即自然对数的底数（约等于2.718）。</li>
<li>LN2    返回 2 的自然对数（约等于0.693）。</li>
<li>LN10    返回 10 的自然对数（约等于2.302）。</li>
<li>LOG2E    返回以 2 为底的 e 的对数（约等于 1.414）。</li>
<li>LOG10E    返回以 10 为底的 e 的对数（约等于0.434）。</li>
<li>PI    返回圆周率（约等于3.14159）。</li>
<li>SQRT1_2    返回返回 2 的平方根的倒数（约等于 0.707）。</li>
<li>SQRT2    返回 2 的平方根（约等于 1.414）。</li>
</ul>
<h5 id="Math对象方法"><a href="#Math对象方法" class="headerlink" title="Math对象方法"></a>Math对象方法</h5><ul>
<li>pow(a,b): 返回a的b次方；</li>
<li>abs(x)    返回数的绝对值。</li>
<li>acos(x)    返回数的反余弦值。</li>
<li>asin(x)    返回数的反正弦值。</li>
<li>atan(x)    以介于 -PI/2 与 PI/2 弧度之间的数值来返回 x 的反正切值。</li>
<li>atan2(y,x)    返回从 x 轴到点 (x,y) 的角度（介于 -PI/2 与 PI/2 弧度之间）。</li>
<li>ceil(x)    对数进行上舍入。</li>
<li>cos(x)    返回数的余弦。</li>
<li>exp(x)    返回 e 的指数。</li>
<li>floor(x)    对数进行下舍入。</li>
<li>log(x)    返回数的自然对数（底为e）。</li>
<li>max(x,y)    返回 x 和 y 中的最高值。</li>
<li>min(x,y)    返回 x 和 y 中的最低值。</li>
<li>pow(x,y)    返回 x 的 y 次幂。</li>
<li>random()    返回 0 ~ 1 之间的随机数。</li>
<li>round(x)    把数四舍五入为最接近的整数。</li>
<li>sin(x)    返回数的正弦。</li>
<li>sqrt(x)    返回数的平方根。</li>
<li>tan(x)    返回角的正切。</li>
<li>toSource()    返回该对象的源代码。</li>
<li>valueOf()    返回 Math 对象的原始值。</li>
</ul>
<h4 id="日期和时间"><a href="#日期和时间" class="headerlink" title="日期和时间"></a>日期和时间</h4><p>Date: 在JavaScript中，Date对象用来表示日期和时间。</p>
<h5 id="Date对象"><a href="#Date对象" class="headerlink" title="Date对象"></a>Date对象</h5><ul>
<li>JavaScript的月份范围用整数表示是0~11月;</li>
</ul>
<h6 id="创建Date对象"><a href="#创建Date对象" class="headerlink" title="创建Date对象"></a>创建Date对象</h6><ol>
<li>创建默认Date对象：</li>
</ol>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 注释：Date 对象会自动把当前日期和时间保存为其初始值。</span></span><br><span class="line"><span class="keyword">var</span> myDate=<span class="keyword">new</span> <span class="built_in">Date</span>()</span><br></pre></td></tr></table></figure>
<ol>
<li>根据指定的时间创建：</li>
</ol>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> d = <span class="keyword">new</span> <span class="built_in">Date</span>(<span class="number">2015</span>, <span class="number">5</span>, <span class="number">19</span>, <span class="number">20</span>, <span class="number">15</span>, <span class="number">30</span>, <span class="number">123</span>);</span><br><span class="line">d; <span class="comment">// Fri Jun 19 2015 20:15:30 GMT+0800 (CST)</span></span><br></pre></td></tr></table></figure>
<ol>
<li>解析ISO 8601格式的时间为时间戳：</li>
</ol>
<ul>
<li>使用Date.parse()时传入的字符串使用实际月份01~12，转换为Date对象后getMonth()获取的月份值为0 ~ 11。</li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> d = <span class="built_in">Date</span>.parse(<span class="string">'2015-06-24T19:49:22.875+08:00'</span>);</span><br><span class="line">d; <span class="comment">// 1435146562875</span></span><br></pre></td></tr></table></figure>
<ol>
<li>根据指定时间戳创建：</li>
</ol>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> d = <span class="keyword">new</span> <span class="built_in">Date</span>(<span class="number">1435146562875</span>);</span><br><span class="line">d; <span class="comment">// Wed Jun 24 2015 19:49:22 GMT+0800 (CST)</span></span><br><span class="line">d.getMonth(); <span class="comment">// 5</span></span><br></pre></td></tr></table></figure>
<h5 id="时区"><a href="#时区" class="headerlink" title="时区"></a>时区</h5><p>Date对象表示的时间总是按浏览器所在时区显示的，不过我们既可以显示本地时间，也可以显示调整后的UTC时间：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> d = <span class="keyword">new</span> <span class="built_in">Date</span>(<span class="number">1435146562875</span>);</span><br><span class="line">d.toLocaleString(); <span class="comment">// '2015/6/24 下午7:49:22'，本地时间（北京时区+8:00），显示的字符串与操作系统设定的格式有关</span></span><br><span class="line">d.toUTCString(); <span class="comment">// 'Wed, 24 Jun 2015 11:49:22 GMT'，UTC时间，与本地时间相差8小时</span></span><br></pre></td></tr></table></figure>
<h5 id="当前时间"><a href="#当前时间" class="headerlink" title="当前时间"></a>当前时间</h5><p>注意：当前时间是浏览器从本机操作系统获取的时间，所以不一定准确，因为用户可以把当前时间设定为任何值。</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> now = <span class="keyword">new</span> <span class="built_in">Date</span>();</span><br><span class="line">now; <span class="comment">// Wed Jun 24 2015 19:49:22 GMT+0800 (CST)</span></span><br><span class="line">now.getFullYear(); <span class="comment">// 2015, 年份</span></span><br><span class="line">now.getMonth(); <span class="comment">// 5, 月份，注意月份范围是0~11，5表示六月</span></span><br><span class="line">now.getDate(); <span class="comment">// 24, 表示24号</span></span><br><span class="line">now.getDay(); <span class="comment">// 3, 表示星期三</span></span><br><span class="line">now.getHours(); <span class="comment">// 19, 24小时制</span></span><br><span class="line">now.getMinutes(); <span class="comment">// 49, 分钟</span></span><br><span class="line">now.getSeconds(); <span class="comment">// 22, 秒</span></span><br><span class="line">now.getMilliseconds(); <span class="comment">// 875, 毫秒数</span></span><br><span class="line">now.getTime(); <span class="comment">// 1435146562875, 以number形式表示的时间戳</span></span><br><span class="line"><span class="built_in">Date</span>.now; <span class="comment">// 时间戳,老版本IE没有now()方法</span></span><br></pre></td></tr></table></figure>
<h5 id="Date对象属性"><a href="#Date对象属性" class="headerlink" title="Date对象属性"></a>Date对象属性</h5><ul>
<li>constructor    返回对创建此对象的 Date 函数的引用。</li>
<li>prototype    使您有能力向对象添加属性和方法。</li>
</ul>
<h5 id="Date对象方法"><a href="#Date对象方法" class="headerlink" title="Date对象方法"></a>Date对象方法</h5><ul>
<li>Date()    返回当日的日期和时间。</li>
<li>getDate()    从 Date 对象返回一个月中的某一天 (1 ~ 31)。</li>
<li>getDay()    从 Date 对象返回一周中的某一天 (0 ~ 6)。</li>
<li>getMonth()    从 Date 对象返回月份 (0 ~ 11)。</li>
<li>getFullYear()    从 Date 对象以四位数字返回年份。</li>
<li>getYear()    请使用 getFullYear() 方法代替。</li>
<li>getHours()    返回 Date 对象的小时 (0 ~ 23)。</li>
<li>getMinutes()    返回 Date 对象的分钟 (0 ~ 59)。</li>
<li>getSeconds()    返回 Date 对象的秒数 (0 ~ 59)。</li>
<li>getMilliseconds()    返回 Date 对象的毫秒(0 ~ 999)。</li>
<li>getTime()    返回 1970 年 1 月 1 日至今的毫秒数。</li>
<li>getTimezoneOffset()    返回本地时间与格林威治标准时间 (GMT) 的分钟差。</li>
<li>getUTCDate()    根据世界时从 Date 对象返回月中的一天 (1 ~ 31)。</li>
<li>getUTCDay()    根据世界时从 Date 对象返回周中的一天 (0 ~ 6)。</li>
<li>getUTCMonth()    根据世界时从 Date 对象返回月份 (0 ~ 11)。</li>
<li>getUTCFullYear()    根据世界时从 Date 对象返回四位数的年份。</li>
<li>getUTCHours()    根据世界时返回 Date 对象的小时 (0 ~ 23)。</li>
<li>getUTCMinutes()    根据世界时返回 Date 对象的分钟 (0 ~ 59)。</li>
<li>getUTCSeconds()    根据世界时返回 Date 对象的秒钟 (0 ~ 59)。</li>
<li>getUTCMilliseconds()    根据世界时返回 Date 对象的毫秒(0 ~ 999)。</li>
<li>parse()    返回1970年1月1日午夜到指定日期（字符串）的毫秒数。</li>
<li>setDate()    设置 Date 对象中月的某一天 (1 ~ 31)。</li>
<li>setMonth()    设置 Date 对象中月份 (0 ~ 11)。</li>
<li>setFullYear()    设置 Date 对象中的年份（四位数字）。</li>
<li>setYear()    请使用 setFullYear() 方法代替。</li>
<li>setHours()    设置 Date 对象中的小时 (0 ~ 23)。</li>
<li>setMinutes()    设置 Date 对象中的分钟 (0 ~ 59)。</li>
<li>setSeconds()    设置 Date 对象中的秒钟 (0 ~ 59)。</li>
<li>setMilliseconds()    设置 Date 对象中的毫秒 (0 ~ 999)。</li>
<li>setTime()    以毫秒设置 Date 对象。</li>
<li>setUTCDate()    根据世界时设置 Date 对象中月份的一天 (1 ~ 31)。</li>
<li>setUTCMonth()    根据世界时设置 Date 对象中的月份 (0 ~ 11)。</li>
<li>setUTCFullYear()    根据世界时设置 Date 对象中的年份（四位数字）。</li>
<li>setUTCHours()    根据世界时设置 Date 对象中的小时 (0 ~ 23)。</li>
<li>setUTCMinutes()    根据世界时设置 Date 对象中的分钟 (0 ~ 59)。</li>
<li>setUTCSeconds()    根据世界时设置 Date 对象中的秒钟 (0 ~ 59)。</li>
<li>setUTCMilliseconds()    根据世界时设置 Date 对象中的毫秒 (0 ~ 999)。</li>
<li>toSource()    返回该对象的源代码。</li>
<li>toString()    把 Date 对象转换为字符串。</li>
<li>toTimeString()    把 Date 对象的时间部分转换为字符串。</li>
<li>toDateString()    把 Date 对象的日期部分转换为字符串。</li>
<li>toGMTString()    请使用 toUTCString() 方法代替。</li>
<li>toUTCString()    根据世界时，把 Date 对象转换为字符串。</li>
<li>toLocaleString()    根据本地时间格式，把 Date 对象转换为字符串。</li>
<li>toLocaleTimeString()    根据本地时间格式，把 Date 对象的时间部分转换为字符串。</li>
<li>toLocaleDateString()    根据本地时间格式，把 Date 对象的日期部分转换为字符串。</li>
<li>UTC()    根据世界时返回 1970 年 1 月 1 日 到指定日期的毫秒数。</li>
<li>valueOf()    返回 Date 对象的原始值。</li>
</ul>
<h4 id="正则表达式"><a href="#正则表达式" class="headerlink" title="正则表达式"></a>正则表达式</h4><h5 id="创建正则表达式"><a href="#创建正则表达式" class="headerlink" title="创建正则表达式"></a>创建正则表达式</h5><p>JavaScript有两种方式创建一个正则表达式：</p>
<ol>
<li>第一种方式是直接通过/正则表达式/写出来;</li>
<li>第二种方式是通过new RegExp(‘正则表达式’)创建一个RegExp对象;</li>
</ol>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> re1 = <span class="regexp">/ABC\-001/</span>;</span><br><span class="line"><span class="keyword">var</span> re2 = <span class="keyword">new</span> <span class="built_in">RegExp</span>(<span class="string">'ABC\\-001'</span>);</span><br><span class="line"></span><br><span class="line">re1; <span class="comment">// /ABC\-001/</span></span><br><span class="line">re2; <span class="comment">// /ABC\-001/</span></span><br></pre></td></tr></table></figure>
<h5 id="操作正则"><a href="#操作正则" class="headerlink" title="操作正则"></a>操作正则</h5><h6 id="正则匹配"><a href="#正则匹配" class="headerlink" title="正则匹配"></a>正则匹配</h6><p>test()方法：用于测试给定的字符串是否符合条件。</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> re = <span class="regexp">/^\d&#123;3&#125;\-\d&#123;3,8&#125;$/</span>;</span><br><span class="line">re.test(<span class="string">'010-12345'</span>); <span class="comment">// true</span></span><br><span class="line">re.test(<span class="string">'010-1234x'</span>); <span class="comment">// false</span></span><br><span class="line">re.test(<span class="string">'010 12345'</span>); <span class="comment">// false</span></span><br></pre></td></tr></table></figure>
<h6 id="切分字符串"><a href="#切分字符串" class="headerlink" title="切分字符串"></a>切分字符串</h6><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 按空格分割字符串</span></span><br><span class="line"><span class="string">'a b   c'</span>.split(<span class="regexp">/\s+/</span>); <span class="comment">// ['a', 'b', 'c']</span></span><br><span class="line"><span class="comment">// 按空格、都好、分号，分割字符串</span></span><br><span class="line"><span class="string">'a,b;; c  d'</span>.split(<span class="regexp">/[\s\,\;]+/</span>); <span class="comment">// ['a', 'b', 'c', 'd']</span></span><br></pre></td></tr></table></figure>
<h6 id="分组匹配"><a href="#分组匹配" class="headerlink" title="分组匹配"></a>分组匹配</h6><p>除了简单地判断是否匹配之外，正则表达式还有提取子串的强大功能。用()表示的就是要提取的分组（Group）。</p>
<ul>
<li>用exec()方法提取出子串来;</li>
<li>exec()方法在匹配成功后，会返回一个Array，第一个元素是正则表达式匹配到的整个字符串，后面的字符串表示匹配成功的子串。</li>
<li>exec()方法在匹配失败时返回null。</li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// ^(\d&#123;3&#125;)-(\d&#123;3,8&#125;)$分别定义了两个组，可以直接从匹配的字符串中提取出区号和本地号码：</span></span><br><span class="line"><span class="keyword">var</span> re = <span class="regexp">/^(\d&#123;3&#125;)-(\d&#123;3,8&#125;)$/</span>;</span><br><span class="line">re.exec(<span class="string">'010-12345'</span>); <span class="comment">// ['010-12345', '010', '12345']</span></span><br><span class="line">re.exec(<span class="string">'010 12345'</span>); <span class="comment">// null</span></span><br></pre></td></tr></table></figure>
<h6 id="贪婪匹配"><a href="#贪婪匹配" class="headerlink" title="贪婪匹配"></a>贪婪匹配</h6><ul>
<li>需要特别指出的是，正则匹配默认是贪婪匹配，也就是匹配尽可能多的字符。</li>
<li>加个?就可以让正则采用非贪婪匹配（也就是尽可能少匹配）；</li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> re = <span class="regexp">/^(\d+?)(0*)$/</span>;</span><br><span class="line">re.exec(<span class="string">'102300'</span>); <span class="comment">// ['102300', '1023', '00']</span></span><br></pre></td></tr></table></figure>
<h6 id="全局搜索匹配"><a href="#全局搜索匹配" class="headerlink" title="全局搜索匹配"></a>全局搜索匹配</h6><p>全局匹配类似搜索，因此不能使用/^…$/，那样只会最多匹配一次。</p>
<p>JavaScript的正则表达式还有几个特殊的匹配标志；<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">1&gt; 指定i标志，表示忽略大小写;</span><br><span class="line">2&gt; 指定m标志，表示执行多行匹配。</span><br><span class="line">3&gt; 指定g标志，表示全局匹配。</span><br></pre></td></tr></table></figure></p>
<ol>
<li>表示全局匹配标志g：</li>
</ol>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> r1 = <span class="regexp">/test/g</span>;</span><br><span class="line"><span class="comment">// 等价于:</span></span><br><span class="line"><span class="keyword">var</span> r2 = <span class="keyword">new</span> <span class="built_in">RegExp</span>(<span class="string">'test'</span>, <span class="string">'g'</span>);</span><br></pre></td></tr></table></figure>
<p>全局匹配流程：</p>
<p>全局匹配可以多次执行exec()方法来搜索一个匹配的字符串。当我们指定g标志后，每次运行exec()，正则表达式本身会更新lastIndex属性，表示上次匹配到的最后索引；</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> s = <span class="string">'JavaScript, VBScript, JScript and ECMAScript'</span>;</span><br><span class="line"><span class="keyword">var</span> re=<span class="regexp">/[a-zA-Z]+Script/g</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 使用全局匹配:</span></span><br><span class="line">re.exec(s); <span class="comment">// ['JavaScript']</span></span><br><span class="line">re.lastIndex; <span class="comment">// 10</span></span><br><span class="line"></span><br><span class="line">re.exec(s); <span class="comment">// ['VBScript']</span></span><br><span class="line">re.lastIndex; <span class="comment">// 20</span></span><br><span class="line"></span><br><span class="line">re.exec(s); <span class="comment">// ['JScript']</span></span><br><span class="line">re.lastIndex; <span class="comment">// 29</span></span><br><span class="line"></span><br><span class="line">re.exec(s); <span class="comment">// ['ECMAScript']</span></span><br><span class="line">re.lastIndex; <span class="comment">// 44</span></span><br><span class="line"></span><br><span class="line">re.exec(s); <span class="comment">// null，直到结束仍没有匹配到</span></span><br></pre></td></tr></table></figure>
<h4 id="Json"><a href="#Json" class="headerlink" title="Json"></a>Json</h4><p>JSON字符串规定必须用双引号””，Object的键也必须用双引号””；</p>
<h5 id="数据类型："><a href="#数据类型：" class="headerlink" title="数据类型："></a>数据类型：</h5><ul>
<li>number：和JavaScript的number完全一致；</li>
<li>boolean：就是JavaScript的true或false；</li>
<li>string：就是JavaScript的string；</li>
<li>null：就是JavaScript的null；</li>
<li>array：就是JavaScript的Array表示方式——[]；</li>
<li>object：就是JavaScript的{ … }表示方式。</li>
</ul>
<h5 id="序列化"><a href="#序列化" class="headerlink" title="序列化"></a>序列化</h5><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">对象转Json字符串；</span><br></pre></td></tr></table></figure>
<p>Json序列化方法：JSON.stringify(aimObj,replacer,space);</p>
<ol>
<li>aimObj：被序列化对象；</li>
<li>replacer：控制如何筛选对象的键值；</li>
<li>space: json格式化缩进占位符；</li>
</ol>
<h6 id="示例-4"><a href="#示例-4" class="headerlink" title="示例"></a>示例</h6><ol>
<li>简单序列化</li>
</ol>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> xiaoming = &#123;</span><br><span class="line">    name: <span class="string">'小明'</span>,</span><br><span class="line">    age: <span class="number">14</span>,</span><br><span class="line">    gender: <span class="literal">true</span>,</span><br><span class="line">    height: <span class="number">1.65</span>,</span><br><span class="line">    grade: <span class="literal">null</span>,</span><br><span class="line">    <span class="string">'middle-school'</span>: <span class="string">'\"W3C\" Middle School'</span>,</span><br><span class="line">    skills: [<span class="string">'JavaScript'</span>, <span class="string">'Java'</span>, <span class="string">'Python'</span>, <span class="string">'Lisp'</span>]</span><br><span class="line">&#125;;</span><br><span class="line"><span class="comment">// 对象转json字符串</span></span><br><span class="line"><span class="keyword">var</span> s = <span class="built_in">JSON</span>.stringify(xiaoming);</span><br><span class="line"><span class="built_in">console</span>.log(s);</span><br></pre></td></tr></table></figure>
<ol>
<li>按缩进输出</li>
</ol>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">JSON</span>.stringify(xiaoming, <span class="literal">null</span>, <span class="string">'  '</span>);</span><br></pre></td></tr></table></figure>
<ol>
<li>控制如何筛选对象的键值</li>
</ol>
<ul>
<li>仅输出指定的属性，可以传入Array：</li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">JSON</span>.stringify(xiaoming, [<span class="string">'name'</span>, <span class="string">'skills'</span>], <span class="string">'  '</span>);</span><br><span class="line">结果如下：</span><br><span class="line">&#123;</span><br><span class="line">  <span class="string">"name"</span>: <span class="string">"小明"</span>,</span><br><span class="line">  <span class="string">"skills"</span>: [</span><br><span class="line">    <span class="string">"JavaScript"</span>,</span><br><span class="line">    <span class="string">"Java"</span>,</span><br><span class="line">    <span class="string">"Python"</span>,</span><br><span class="line">    <span class="string">"Lisp"</span></span><br><span class="line">  ]</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<ul>
<li>传入处理函数(参数是：key,value)，这样对象的每个键值对都会被函数先处理：</li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">convert</span>(<span class="params">key, value</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">if</span> (<span class="keyword">typeof</span> value === <span class="string">'string'</span>) &#123;</span><br><span class="line">        <span class="keyword">return</span> value.toUpperCase();</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> value;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="built_in">JSON</span>.stringify(xiaoming, convert, <span class="string">'  '</span>);</span><br><span class="line"></span><br><span class="line">结果如下：</span><br><span class="line">&#123;</span><br><span class="line">  <span class="string">"name"</span>: <span class="string">"小明"</span>,</span><br><span class="line">  <span class="string">"age"</span>: <span class="number">14</span>,</span><br><span class="line">  <span class="string">"gender"</span>: <span class="literal">true</span>,</span><br><span class="line">  <span class="string">"height"</span>: <span class="number">1.65</span>,</span><br><span class="line">  <span class="string">"grade"</span>: <span class="literal">null</span>,</span><br><span class="line">  <span class="string">"middle-school"</span>: <span class="string">"\"W3C\" MIDDLE SCHOOL"</span>,</span><br><span class="line">  <span class="string">"skills"</span>: [</span><br><span class="line">    <span class="string">"JAVASCRIPT"</span>,</span><br><span class="line">    <span class="string">"JAVA"</span>,</span><br><span class="line">    <span class="string">"PYTHON"</span>,</span><br><span class="line">    <span class="string">"LISP"</span></span><br><span class="line">  ]</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<ul>
<li>精确控制序列化，可以给xiaoming定义一个toJSON()的方法，调用序列化方法，会直接返回toJson的结果：</li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> xiaoming = &#123;</span><br><span class="line">    name: <span class="string">'小明'</span>,</span><br><span class="line">    age: <span class="number">14</span>,</span><br><span class="line">    gender: <span class="literal">true</span>,</span><br><span class="line">    height: <span class="number">1.65</span>,</span><br><span class="line">    grade: <span class="literal">null</span>,</span><br><span class="line">    <span class="string">'middle-school'</span>: <span class="string">'\"W3C\" Middle School'</span>,</span><br><span class="line">    skills: [<span class="string">'JavaScript'</span>, <span class="string">'Java'</span>, <span class="string">'Python'</span>, <span class="string">'Lisp'</span>],</span><br><span class="line">    toJSON: <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> &#123; <span class="comment">// 只输出name和age，并且改变了key：</span></span><br><span class="line">            <span class="string">'Name'</span>: <span class="keyword">this</span>.name,</span><br><span class="line">            <span class="string">'Age'</span>: <span class="keyword">this</span>.age</span><br><span class="line">        &#125;;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="built_in">JSON</span>.stringify(xiaoming); <span class="comment">// '&#123;"Name":"小明","Age":14&#125;'</span></span><br></pre></td></tr></table></figure>
<h5 id="反序列化"><a href="#反序列化" class="headerlink" title="反序列化"></a>反序列化</h5><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">把JSON格式的字符串，转化为JavaScript对象；</span><br></pre></td></tr></table></figure>
<p>反序列化方法：JSON.parse(jsonString, function)</p>
<ol>
<li>jsonString: json字符串；</li>
<li>reviver: 处理反序列化结果；</li>
</ol>
<h6 id="示例-5"><a href="#示例-5" class="headerlink" title="示例"></a>示例</h6><ol>
<li>简单反序列化；</li>
</ol>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">JSON</span>.parse(<span class="string">'[1,2,3,true]'</span>); <span class="comment">// [1, 2, 3, true]</span></span><br><span class="line"><span class="built_in">JSON</span>.parse(<span class="string">'&#123;"name":"小明","age":14&#125;'</span>); <span class="comment">// Object &#123;name: '小明', age: 14&#125;</span></span><br><span class="line"><span class="built_in">JSON</span>.parse(<span class="string">'true'</span>); <span class="comment">// true</span></span><br><span class="line"><span class="built_in">JSON</span>.parse(<span class="string">'123.45'</span>); <span class="comment">// 123.45</span></span><br></pre></td></tr></table></figure>
<ol>
<li>反序列化前处理逻辑；</li>
</ol>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> obj = <span class="built_in">JSON</span>.parse(<span class="string">'&#123;"name":"小明","age":14&#125;'</span>, <span class="function"><span class="keyword">function</span> (<span class="params">key, value</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">if</span> (key === <span class="string">'name'</span>) &#123;</span><br><span class="line">        <span class="keyword">return</span> value + <span class="string">'同学'</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> value;</span><br><span class="line">&#125;);</span><br><span class="line"><span class="built_in">console</span>.log(<span class="built_in">JSON</span>.stringify(obj)); <span class="comment">// &#123;name: '小明同学', age: 14&#125;</span></span><br></pre></td></tr></table></figure>
<h3 id="面向对象编程"><a href="#面向对象编程" class="headerlink" title="面向对象编程"></a>面向对象编程</h3><h4 id="对象原型链"><a href="#对象原型链" class="headerlink" title="对象原型链"></a>对象原型链</h4><h5 id="原型对象"><a href="#原型对象" class="headerlink" title="原型对象"></a>原型对象</h5><ul>
<li>JavaScript对每个创建的对象X都会设置一个原型，指向它的原型对象X.prototype。</li>
<li>prototype允许您向对象添加属性和方法;</li>
</ul>
<h5 id="查找对象属性的原型链"><a href="#查找对象属性的原型链" class="headerlink" title="查找对象属性的原型链"></a>查找对象属性的原型链</h5><h6 id="概述-5"><a href="#概述-5" class="headerlink" title="概述"></a>概述</h6><p>用Obj.xxx访问一个对象的属性时，JavaScript引擎先在当前对象上查找该属性，如果没有找到，就到其原型对象上找，如果还没有找到，就一直上溯到Object.prototype对象，最后，如果还没有找到，就只能返回undefined。这个过程形成对象的原型链。</p>
<h6 id="实例-1"><a href="#实例-1" class="headerlink" title="实例"></a>实例</h6><p>访问某对象属性，执行的原型链具体如下：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">Obj ----&gt; Obj.prototype ----&gt; Object.prototype ----&gt; null</span><br><span class="line">// obj.prototype: 对象的原型，包含该对象的所有属性；</span><br></pre></td></tr></table></figure>
<h4 id="创建对象"><a href="#创建对象" class="headerlink" title="创建对象"></a>创建对象</h4><h5 id="创建方式"><a href="#创建方式" class="headerlink" title="创建方式"></a>创建方式</h5><ul>
<li>直接用{…}创建一个对象；</li>
<li>构造函数创建对象；</li>
</ul>
<h4 id="构造函数"><a href="#构造函数" class="headerlink" title="构造函数"></a>构造函数</h4><h5 id="创建对象-1"><a href="#创建对象-1" class="headerlink" title="创建对象"></a>创建对象</h5><ol>
<li>创建构造函数并生成对象：</li>
</ol>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">除了直接用&#123;...&#125;创建一个对象外，JavaScript还可以用一种构造函数的方法来创建对象。</span><br><span class="line">关键字new来调用这个函数，并返回一个对象;</span><br></pre></td></tr></table></figure>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">Student</span>(<span class="params">name</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">this</span>.name = name;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">this</span>.hello = <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">        alert(<span class="string">'Hello, '</span> + <span class="keyword">this</span>.name + <span class="string">'!'</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> xiaoming = <span class="keyword">new</span> Student(<span class="string">'小明'</span>);</span><br><span class="line">xiaoming.name; <span class="comment">// '小明'</span></span><br><span class="line">xiaoming.hello(); <span class="comment">// Hello, 小明!</span></span><br></pre></td></tr></table></figure>
<ol>
<li>用new Student()创建的对象还从原型上获得了一个constructor属性，它指向函数Student本身：</li>
</ol>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">xiaoming.constructor === Student.prototype.constructor; <span class="comment">// true</span></span><br><span class="line">Student.prototype.constructor === Student; <span class="comment">// true</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">Object</span>.getPrototypeOf(xiaoming) === Student.prototype; <span class="comment">// true</span></span><br><span class="line"></span><br><span class="line">xiaoming <span class="keyword">instanceof</span> Student; <span class="comment">// true</span></span><br></pre></td></tr></table></figure>
<ol>
<li>prototype设置共享原型对象的属性：</li>
</ol>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">Student</span>(<span class="params">name</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">this</span>.name = name;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">Student.prototype.hello = <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">    alert(<span class="string">'Hello, '</span> + <span class="keyword">this</span>.name + <span class="string">'!'</span>);</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>
<h5 id="创建对象注意"><a href="#创建对象注意" class="headerlink" title="创建对象注意"></a>创建对象注意</h5><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">如果不写new，这就是一个普通函数，它返回undefined。</span><br><span class="line">如果写了new，它就变成了一个构造函数，它绑定的this指向新创建的对象，并默认返回this，也就是说，不需要在最后写return this;。</span><br></pre></td></tr></table></figure>
<h5 id="设置属性默认值"><a href="#设置属性默认值" class="headerlink" title="设置属性默认值"></a>设置属性默认值</h5><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">Student</span>(<span class="params">props</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">this</span>.name = props.name || <span class="string">'匿名'</span>; <span class="comment">// 默认值为'匿名'</span></span><br><span class="line">    <span class="keyword">this</span>.grade = props.grade || <span class="number">1</span>; <span class="comment">// 默认值为1</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h5 id="对象实例类型判断"><a href="#对象实例类型判断" class="headerlink" title="对象实例类型判断"></a>对象实例类型判断</h5><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">xiaoming <span class="keyword">instanceof</span> Student; <span class="comment">// true</span></span><br></pre></td></tr></table></figure>
<h5 id="封装创建构造函数对象"><a href="#封装创建构造函数对象" class="headerlink" title="封装创建构造函数对象"></a>封装创建构造函数对象</h5><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">Student</span>(<span class="params">props</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">this</span>.name = props.name || <span class="string">'匿名'</span>; <span class="comment">// 默认值为'匿名'</span></span><br><span class="line">    <span class="keyword">this</span>.grade = props.grade || <span class="number">1</span>; <span class="comment">// 默认值为1</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">Student.prototype.hello = <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">    alert(<span class="string">'Hello, '</span> + <span class="keyword">this</span>.name + <span class="string">'!'</span>);</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">createStudent</span>(<span class="params">props</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">new</span> Student(props || &#123;&#125;)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 使用</span></span><br><span class="line"><span class="keyword">var</span> xiaoming = createStudent(&#123;</span><br><span class="line">    name: <span class="string">'小明'</span></span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line">xiaoming.grade; <span class="comment">// 1</span></span><br></pre></td></tr></table></figure>
<h4 id="原型继承"><a href="#原型继承" class="headerlink" title="原型继承"></a>原型继承</h4><p>原型继承：把一个对象的原型，指向另一个对象；</p>
<p>原型继承的原型链为：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">new ChildObject() ----&gt; ChildObject.prototype ----&gt; ParentObject.prototype ----&gt; Object.prototype ----&gt; null</span><br></pre></td></tr></table></figure></p>
<h5 id="创建方式-1"><a href="#创建方式-1" class="headerlink" title="创建方式"></a>创建方式</h5><h6 id="proto"><a href="#proto" class="headerlink" title="__proto__"></a>__proto__</h6><p>概述：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">1&gt; 通过obj1.__proto__=obj2，将obj的原型指向obj2，这样obj1就拥有了obj2的属性，包括属性值；</span><br><span class="line">2&gt; 不要直接用obj.__proto__去改变一个对象的原型，并且，低版本的IE也无法使用__proto__；</span><br></pre></td></tr></table></figure>
<p>示例：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> Student = &#123;</span><br><span class="line">    name: <span class="string">'Robot'</span>,</span><br><span class="line">    height: <span class="number">1.2</span>,</span><br><span class="line">    run: <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">        <span class="built_in">console</span>.log(<span class="keyword">this</span>.name + <span class="string">' is running...'</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> xiaoming = &#123;</span><br><span class="line">    name: <span class="string">'小明'</span></span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 让xiaoming继承Student,即把xiaoming的原型指向了对象Student；</span></span><br><span class="line">xiaoming.__proto__ = Student;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 测试</span></span><br><span class="line">xiaoming.name; <span class="comment">// '小明'</span></span><br><span class="line">xiaoming.run(); <span class="comment">// 小明 is running</span></span><br></pre></td></tr></table></figure>
<h6 id="Object-create"><a href="#Object-create" class="headerlink" title="Object.create()"></a>Object.create()</h6><ul>
<li>Object.create()方法可以传入一个原型对象，并创建一个基于该原型的新对象；</li>
<li>Object.create()创建的新对象什么属性都没有，因此，我们可以编写一个函数来创建xiaoming；</li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 原型对象:</span></span><br><span class="line"><span class="keyword">var</span> Student = &#123;</span><br><span class="line">    name: <span class="string">'Robot'</span>,</span><br><span class="line">    height: <span class="number">1.2</span>,</span><br><span class="line">    run: <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">        <span class="built_in">console</span>.log(<span class="keyword">this</span>.name + <span class="string">' is running...'</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">createStudent</span>(<span class="params">name</span>) </span>&#123;</span><br><span class="line">    <span class="comment">// 基于Student原型创建一个新对象:</span></span><br><span class="line">    <span class="keyword">var</span> s = <span class="built_in">Object</span>.create(Student);</span><br><span class="line">    <span class="comment">// 初始化新对象:</span></span><br><span class="line">    s.name = name;</span><br><span class="line">    <span class="keyword">return</span> s;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> xiaoming = createStudent(<span class="string">'小明'</span>);</span><br><span class="line">xiaoming.run(); <span class="comment">// 小明 is running...</span></span><br><span class="line">xiaoming.__proto__ === Student; <span class="comment">// true</span></span><br></pre></td></tr></table></figure>
<h6 id="中间对象"><a href="#中间对象" class="headerlink" title="中间对象"></a>中间对象</h6><ol>
<li>借助一个中间对象来实现正确的原型链，这个中间对象的原型要指向Student.prototype；</li>
</ol>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// PrimaryStudent构造函数:</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">PrimaryStudent</span>(<span class="params">props</span>) </span>&#123;</span><br><span class="line">    <span class="comment">// 调用Student构造函数，绑定this变量:</span></span><br><span class="line">    Student.call(<span class="keyword">this</span>, props);</span><br><span class="line">    <span class="keyword">this</span>.grade = props.grade || <span class="number">1</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 空函数F:</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">F</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 把F的原型指向Student.prototype:</span></span><br><span class="line">F.prototype = Student.prototype;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 把PrimaryStudent的原型指向一个新的F对象，F对象的原型正好指向Student.prototype:</span></span><br><span class="line">PrimaryStudent.prototype = <span class="keyword">new</span> F();</span><br><span class="line"></span><br><span class="line"><span class="comment">// 把PrimaryStudent原型的构造函数修复为PrimaryStudent:</span></span><br><span class="line">PrimaryStudent.prototype.constructor = PrimaryStudent;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 继续在PrimaryStudent原型（就是new F()对象）上定义方法：</span></span><br><span class="line">PrimaryStudent.prototype.getGrade = <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">this</span>.grade;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 创建xiaoming:</span></span><br><span class="line"><span class="keyword">var</span> xiaoming = <span class="keyword">new</span> PrimaryStudent(&#123;</span><br><span class="line">    name: <span class="string">'小明'</span>,</span><br><span class="line">    grade: <span class="number">2</span></span><br><span class="line">&#125;);</span><br><span class="line">xiaoming.name; <span class="comment">// '小明'</span></span><br><span class="line">xiaoming.grade; <span class="comment">// 2</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 验证原型:</span></span><br><span class="line">xiaoming.__proto__ === PrimaryStudent.prototype; <span class="comment">// true</span></span><br><span class="line">xiaoming.__proto__.__proto__ === Student.prototype; <span class="comment">// true</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 验证继承关系:</span></span><br><span class="line">xiaoming <span class="keyword">instanceof</span> PrimaryStudent; <span class="comment">// true</span></span><br><span class="line">xiaoming <span class="keyword">instanceof</span> Student; <span class="comment">// true</span></span><br></pre></td></tr></table></figure>
<ol>
<li>继承简化 </li>
</ol>
<p>继承这个动作用一个inherits()函数封装起来，还可以隐藏F的定义，并简化代码：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 封装可复用的继承函数</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">inherits</span>(<span class="params">Child, Parent</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">var</span> F = <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;&#125;;</span><br><span class="line">    F.prototype = Parent.prototype;</span><br><span class="line">    Child.prototype = <span class="keyword">new</span> F();</span><br><span class="line">    Child.prototype.constructor = Child;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 父对象</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">Student</span>(<span class="params">props</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">this</span>.name = props.name || <span class="string">'Unnamed'</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">Student.prototype.hello = <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">    alert(<span class="string">'Hello, '</span> + <span class="keyword">this</span>.name + <span class="string">'!'</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 子对象</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">PrimaryStudent</span>(<span class="params">props</span>) </span>&#123;</span><br><span class="line">    <span class="comment">// 调用Student构造函数，绑定this变量:</span></span><br><span class="line">    Student.call(<span class="keyword">this</span>, props);</span><br><span class="line">    <span class="keyword">this</span>.grade = props.grade || <span class="number">1</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 实现原型继承链:</span></span><br><span class="line">inherits(PrimaryStudent, Student);</span><br><span class="line"></span><br><span class="line"><span class="comment">// 绑定其他方法到PrimaryStudent原型:</span></span><br><span class="line">PrimaryStudent.prototype.getGrade = <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">this</span>.grade;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>
<h4 id="类"><a href="#类" class="headerlink" title="类"></a>类</h4><p>关键字class从ES6开始正式被引入到JavaScript中。class的目的就是让定义类更简单。</p>
<h5 id="定义-1"><a href="#定义-1" class="headerlink" title="定义"></a>定义</h5><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 定义类</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Student</span> </span>&#123;</span><br><span class="line">    <span class="keyword">constructor</span>(name) &#123;</span><br><span class="line">        <span class="keyword">this</span>.name = name;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    hello() &#123;</span><br><span class="line">        alert(<span class="string">'Hello, '</span> + <span class="keyword">this</span>.name + <span class="string">'!'</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 创建对象</span></span><br><span class="line"><span class="keyword">var</span> xiaoming = <span class="keyword">new</span> Student(<span class="string">'小明'</span>);</span><br><span class="line">xiaoming.hello();</span><br></pre></td></tr></table></figure>
<h5 id="继承"><a href="#继承" class="headerlink" title="继承"></a>继承</h5><ol>
<li>extends则表示原型链对象来继承自Student。</li>
<li>子类的构造函数参数任意，但是需要通过super(params)来调用父类的构造函数，否则父类的name属性无法正常初始化。</li>
<li>子类继承父类，就拥有了父类的属性和方法；</li>
</ol>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">PrimaryStudent</span> <span class="keyword">extends</span> <span class="title">Student</span> </span>&#123;</span><br><span class="line">    <span class="keyword">constructor</span>(name, grade) &#123;</span><br><span class="line">        <span class="keyword">super</span>(name); <span class="comment">// 记得用super调用父类的构造方法!</span></span><br><span class="line">        <span class="keyword">this</span>.grade = grade;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    myGrade() &#123;</span><br><span class="line">        alert(<span class="string">'I am at grade '</span> + <span class="keyword">this</span>.grade);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="模块"><a href="#模块" class="headerlink" title="模块"></a>模块</h3><blockquote>
<p><span style="color:red">浏览器目前还不支持ES6模块</span>，为了现在就能使用，可以将转为ES5的写法。</p>
</blockquote>
<p>js模块化，将每个js文件看做一个模块，可以将js文件中的成员导出，或者导入别的模块的成员；</p>
<h4 id="导入导出"><a href="#导入导出" class="headerlink" title="导入导出"></a>导入导出</h4><ul>
<li>使用export关键字导出js模块中的成员,利用import导入js模块成员；</li>
<li>导入时：可用as定义别名，导入的类要放在最前面，模块成员放在{}内；</li>
<li>同一模块内既可以导入也可以发生导出；</li>
</ul>
<h5 id="示例-6"><a href="#示例-6" class="headerlink" title="示例"></a>示例</h5><p>【a.js文件】<br><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//直接导出单个</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">let</span> str = <span class="string">'string'</span>;</span><br><span class="line"><span class="keyword">let</span> obj = &#123;</span><br><span class="line">    name: <span class="string">'jason'</span></span><br><span class="line">&#125;;</span><br><span class="line"><span class="keyword">let</span> fn = <span class="function"><span class="params">()</span> =&gt;</span> &#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">'es6 fn'</span>)</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="comment">//导出多个</span></span><br><span class="line"><span class="keyword">export</span> &#123;</span><br><span class="line">    obj,</span><br><span class="line">    fn</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="comment">//默认导出，导入时可以使用任意名称</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="class"><span class="keyword">class</span> <span class="title">Student</span> </span>&#123;</span><br><span class="line">    <span class="keyword">constructor</span>()&#123;</span><br><span class="line">        <span class="keyword">this</span>.age=<span class="number">12</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    getAge() &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">this</span>.age;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure></p>
<p>【b.js文件】</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> Student, &#123;str <span class="keyword">as</span> type, obj, fn&#125; <span class="keyword">from</span> <span class="string">"./module"</span>;</span><br><span class="line"></span><br><span class="line"><span class="built_in">console</span>.log(<span class="string">'str:'</span>+type);</span><br><span class="line"><span class="built_in">console</span>.log(<span class="string">'obj:'</span>+obj.name);</span><br><span class="line"><span class="built_in">console</span>.log(<span class="string">'fn:'</span>+fn);</span><br><span class="line">fn();</span><br><span class="line"><span class="keyword">let</span> student=<span class="keyword">new</span> Student();</span><br><span class="line"><span class="built_in">console</span>.log(<span class="string">'Student:'</span>+student.getAge());</span><br></pre></td></tr></table></figure>
<h3 id="浏览器"><a href="#浏览器" class="headerlink" title="浏览器"></a>浏览器</h3><h4 id="主流浏览器"><a href="#主流浏览器" class="headerlink" title="主流浏览器"></a>主流浏览器</h4><ul>
<li>IE 6~11：国内用得最多的IE浏览器，历来对W3C标准支持差。从IE10开始支持ES6标准；</li>
<li>Chrome：Google出品的基于Webkit内核浏览器，内置了非常强悍的JavaScript引擎——V8。由于Chrome一经安装就时刻保持自升级，所以不用管它的版本，最新版早就支持ES6了；</li>
<li>Safari：Apple的Mac系统自带的基于Webkit内核的浏览器，从OS X 10.7 Lion自带的6.1版本开始支持ES6，目前最新的OS X 10.11 El Capitan自带的Safari版本是9.x，早已支持ES6；</li>
<li>Firefox：Mozilla自己研制的Gecko内核和JavaScript引擎OdinMonkey。早期的Firefox按版本发布，后来终于聪明地学习Chrome的做法进行自升级，时刻保持最新；</li>
<li>移动设备上目前iOS和Android两大阵营分别主要使用Apple的Safari和Google的Chrome，由于两者都是Webkit核心，结果HTML5首先在手机上全面普及（桌面绝对是Microsoft拖了后腿），对JavaScript的标准支持也很好，最新版本均支持ES6。</li>
</ul>
<h5 id="浏览器差异"><a href="#浏览器差异" class="headerlink" title="浏览器差异"></a>浏览器差异</h5><ul>
<li>不同的浏览器对JavaScript支持的差异主要是，有些API的接口不一样，比如AJAX，File接口。</li>
<li>对于ES6标准，不同的浏览器对各个特性支持也不一样。</li>
</ul>
<h4 id="浏览器对象"><a href="#浏览器对象" class="headerlink" title="浏览器对象"></a>浏览器对象</h4><p>window</p>
<ul>
<li>JavaScript可以获取浏览器提供的很多对象，并进行操作。</li>
<li>window对象不但充当全局作用域，而且表示浏览器窗口.</li>
</ul>
<h5 id="浏览器尺寸属性图示"><a href="#浏览器尺寸属性图示" class="headerlink" title="浏览器尺寸属性图示"></a>浏览器尺寸属性图示</h5><p><img src="https://raw.githubusercontent.com/cnlius/GP-Resource/master/Web/browser/browser-analysis.png" alt="image"></p>
<h5 id="净宽高"><a href="#净宽高" class="headerlink" title="净宽高"></a>净宽高</h5><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">window对象有innerWidth和innerHeight属性，可以获取浏览器窗口的内部宽度和高度。</span><br><span class="line">内部宽高是指除去菜单栏、工具栏、边框等占位元素后，用于显示网页的净宽高。</span><br></pre></td></tr></table></figure>
<h5 id="全宽高"><a href="#全宽高" class="headerlink" title="全宽高"></a>全宽高</h5><p>outerWidth和outerHeight属性，可以获取浏览器窗口的整个宽高。</p>
<h5 id="浏览器的信息"><a href="#浏览器的信息" class="headerlink" title="浏览器的信息"></a>浏览器的信息</h5><p>navigator对象表示浏览器的信息，最常用的属性包括：</p>
<ul>
<li>navigator.appName：浏览器名称；</li>
<li>navigator.appVersion：浏览器版本；</li>
<li>navigator.language：浏览器设置的语言；</li>
<li>navigator.platform：操作系统类型；</li>
<li>navigator.userAgent：浏览器设定的User-Agent（用户代理）字符串。</li>
</ul>
<h6 id="根据浏览器获取信息"><a href="#根据浏览器获取信息" class="headerlink" title="根据浏览器获取信息"></a>根据浏览器获取信息</h6><p>navigator的信息可以很容易地被用户修改，所以JavaScript读取的值不一定是正确的。</p>
<ul>
<li>错误的方式：</li>
</ul>
<p>很多初学者为了针对不同浏览器编写不同的代码，喜欢用if判断浏览器版本，例如：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> width;</span><br><span class="line"><span class="keyword">if</span> (getIEVersion(navigator.userAgent) &lt; <span class="number">9</span>) &#123;</span><br><span class="line">    width = <span class="built_in">document</span>.body.clientWidth;</span><br><span class="line">&#125; <span class="keyword">else</span> &#123;</span><br><span class="line">    width = <span class="built_in">window</span>.innerWidth;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<ul>
<li>正确的方式</li>
</ul>
<p>确的方法是充分利用JavaScript对不存在属性返回undefined的特性，直接用短路运算符||计算：<br><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> width = <span class="built_in">window</span>.innerWidth || <span class="built_in">document</span>.body.clientWidth;</span><br></pre></td></tr></table></figure></p>
<h5 id="屏幕信息"><a href="#屏幕信息" class="headerlink" title="屏幕信息"></a>屏幕信息</h5><p>window.screen 对象包含有关用户屏幕的信息。</p>
<p>screen对象表示屏幕的信息，常用的属性有：</p>
<ul>
<li>screen.width：屏幕宽度，以像素为单位；</li>
<li>screen.height：屏幕高度，以像素为单位；</li>
<li>screen.colorDepth：返回颜色位数，如8、16、24。</li>
<li>screen.availHeight: 可用高度；</li>
</ul>
<h5 id="URL信息"><a href="#URL信息" class="headerlink" title="URL信息"></a>URL信息</h5><p>location</p>
<h6 id="URL信息-1"><a href="#URL信息-1" class="headerlink" title="URL信息"></a>URL信息</h6><p>location对象获取当前页面的URL信息。</p>
<p>一个完整的URL：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">http://www.example.com:8080/path/index.html?a=1&amp;b=2#TOP</span><br></pre></td></tr></table></figure>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">location.href; <span class="comment">// 完整地址</span></span><br><span class="line">location.protocol; <span class="comment">// 'http'</span></span><br><span class="line">location.host; <span class="comment">// 'www.example.com'</span></span><br><span class="line">location.port; <span class="comment">// '8080'</span></span><br><span class="line">location.pathname; <span class="comment">// '/path/index.html'</span></span><br><span class="line">location.search; <span class="comment">// '?a=1&amp;b=2'</span></span><br><span class="line">location.hash; <span class="comment">// 'TOP'</span></span><br></pre></td></tr></table></figure>
<h6 id="加载URL"><a href="#加载URL" class="headerlink" title="加载URL"></a>加载URL</h6><ul>
<li>要加载一个新页面，可以调用location.assign(URL)。</li>
<li>如果要重新加载当前页面，调用location.reload()方法非常方便。</li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">if</span> (confirm(<span class="string">'重新加载当前页'</span> + location.href + <span class="string">'?'</span>)) &#123;</span><br><span class="line">    location.reload();</span><br><span class="line">&#125; <span class="keyword">else</span> &#123;</span><br><span class="line">    location.assign(<span class="string">'/'</span>); <span class="comment">// 设置一个新的URL地址</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h5 id="history"><a href="#history" class="headerlink" title="history"></a>history</h5><p>history对象保存了浏览器的历史记录;</p>
<h6 id="history的方法"><a href="#history的方法" class="headerlink" title="history的方法"></a>history的方法</h6><ul>
<li>history.back()：用户点击了浏览器的“后退”按钮。</li>
<li>history.forwar()：用户点击了浏览器的“前进”按钮。</li>
</ul>
<h5 id="window相关方法"><a href="#window相关方法" class="headerlink" title="window相关方法"></a>window相关方法</h5><h6 id="open"><a href="#open" class="headerlink" title="open"></a>open</h6><p>window.open() 方法用于打开一个新的浏览器窗口或查找一个已命名的窗口。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">语法： window.open(URL,name,features,replace)</span><br></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">URL	一个可选的字符串，声明了要在新窗口中显示的文档的 URL。如果省略了这个参数，或者它的值是空字符串，那么新窗口就不会显示任何文档。</span><br><span class="line">name	一个可选的字符串，该字符串是一个由逗号分隔的特征列表，其中包括数字、字母和下划线，该字符声明了新窗口的名称。这个名称可以用作标记 &lt;a&gt; 和 &lt;form&gt; 的属性 target 的值。如果该参数指定了一个已经存在的窗口，那么 open() 方法就不再创建一个新窗口，而只是返回对指定窗口的引用。在这种情况下，features 将被忽略。</span><br><span class="line">features	一个可选的字符串，声明了新窗口要显示的标准浏览器的特征。如果省略该参数，新窗口将具有所有标准特征。在窗口特征这个表格中，我们对该字符串的格式进行了详细的说明。</span><br><span class="line">replace</span><br><span class="line">一个可选的布尔值。规定了装载到窗口的 URL 是在窗口的浏览历史中创建一个新条目，还是替换浏览历史中的当前条目。支持下面的值：</span><br><span class="line">true - URL 替换浏览历史中的当前条目。</span><br><span class="line">false - URL 在浏览历史中创建新的条目。</span><br></pre></td></tr></table></figure>
<h4 id="cookie"><a href="#cookie" class="headerlink" title="cookie"></a>cookie</h4><h5 id="概念-5"><a href="#概念-5" class="headerlink" title="概念"></a>概念</h5><ul>
<li>cookie是以分号分割的多个k-v字段组成的字符串；</li>
<li>cookie存储是用户端保存请求信息的机制；</li>
<li>存储在本地的加密文件里，用户不能直接访问，需要用浏览器访问；</li>
<li>cookie的存储有路径和域名的限制，一个请求只能操作自己有权限的cookie; </li>
<li>document.cookie.toString获取的是所有cookies的key+value拼接字符串；</li>
</ul>
<h5 id="cookie信息"><a href="#cookie信息" class="headerlink" title="cookie信息"></a>cookie信息</h5><ul>
<li>name: cookie的名称；</li>
<li>domain: cookie生效的域名，这个域名有作用域的限制，如：一个二级域名可以访问一级域名的cookie,但是不能操作其他二级域名的cookie,也不能操作所属的三级域名的cookie;</li>
<li>path: cookie的生效路径，比如同一个域名下不同路径的cookie也是无法操作的；</li>
<li>expires:cookie的过期时间，超过这个时间cookie就会被删除，如果不设置此属性，cookie只会存在于一次会话中，那么浏览器关闭时cookie就会被删除；</li>
<li>HttpOnly: 表示cookie是由服务端设置的，不允许在用户端进行更改，这种类型的cookie，js无法进行操作。</li>
</ul>
<h5 id="设置cookie"><a href="#设置cookie" class="headerlink" title="设置cookie"></a>设置cookie</h5><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 设置cookie</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">setCookie</span>(<span class="params">keyName, value</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">var</span> days = <span class="number">30</span>;</span><br><span class="line">    <span class="keyword">var</span> exp = <span class="keyword">new</span> <span class="built_in">Date</span>();</span><br><span class="line">    exp.setTime(exp.getTime() + days);</span><br><span class="line">    <span class="built_in">document</span>.cookie = name + <span class="string">"="</span> + <span class="built_in">escape</span>(value) + <span class="string">";expires="</span> + exp.getDate();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h5 id="获取cookis"><a href="#获取cookis" class="headerlink" title="获取cookis"></a>获取cookis</h5><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">getXCookie</span>(<span class="params">key</span>) </span>&#123;</span><br><span class="line">    alert(<span class="built_in">document</span>.cookie.toString());</span><br><span class="line">    <span class="keyword">if</span> (<span class="built_in">document</span>.cookie.length &gt; <span class="number">0</span>) &#123;</span><br><span class="line">        <span class="keyword">let</span> key_start = <span class="built_in">document</span>.cookie.indexOf(key + <span class="string">"="</span>);</span><br><span class="line">        <span class="keyword">if</span> (key_start !== <span class="number">-1</span>) &#123;</span><br><span class="line">            key_start = key_start + key.length + <span class="number">1</span>;</span><br><span class="line">            <span class="keyword">let</span> key_end = <span class="built_in">document</span>.cookie.indexOf(<span class="string">";"</span>, key_start);</span><br><span class="line">            <span class="keyword">if</span> (key_end === <span class="number">-1</span>) &#123;</span><br><span class="line">                key_end = <span class="built_in">document</span>.cookie.length;</span><br><span class="line">            &#125;</span><br><span class="line">            alert(<span class="built_in">document</span>.cookie.substring(key_start, key_end))</span><br><span class="line">        &#125;</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        alert(<span class="string">"no cookie"</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h4 id="session"><a href="#session" class="headerlink" title="session"></a>session</h4><ul>
<li><p>session是服务端保存请求信息的机制；</p>
<blockquote>
<p>session是用在服务端记录请求者身份的，服务端接到http请求后，服务端生成一个sessionId,这个sessionId种到用户的cookie里，这样同一用户再发一次这个请求，服务端根据cookie就知道是哪个用户发来的。</p>
</blockquote>
</li>
<li><p>sessionId并不一定都是用cookie实现的，也可以放在请求参数里，或者在http请求头里开辟一个token字段。</p>
</li>
<li>会话由浏览器控制，如果没有设置过期时间，会话结束，session就失效；</li>
</ul>
<h4 id="消息框"><a href="#消息框" class="headerlink" title="消息框"></a>消息框</h4><p>可以在 JavaScript 中创建三种消息框：警告框、确认框、提示框。</p>
<h5 id="警告框"><a href="#警告框" class="headerlink" title="警告框"></a>警告框</h5><ul>
<li>警告框经常用于确保用户可以得到某些信息。</li>
<li>当警告框出现后，用户需要点击确定按钮才能继续进行操作。</li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">alert(<span class="string">"文本"</span>);</span><br></pre></td></tr></table></figure>
<h5 id="确认框"><a href="#确认框" class="headerlink" title="确认框"></a>确认框</h5><ul>
<li>确认框用于使用户可以验证或者接受某些信息。</li>
<li>当确认框出现后，用户需要点击确定或者取消按钮才能继续进行操作。</li>
<li>如果用户点击确认，那么返回值为 true。如果用户点击取消，那么返回值为 false。</li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">confirm(<span class="string">"文本"</span>)</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> result = confirm(<span class="string">"确定要这么做吗？"</span>);</span><br><span class="line"><span class="keyword">if</span>(result)&#123;<span class="comment">//true</span></span><br><span class="line">    alert(<span class="string">'点了确定'</span>);</span><br><span class="line">&#125; <span class="keyword">else</span> &#123; <span class="comment">//false</span></span><br><span class="line">    alert(<span class="string">'点了取消'</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h5 id="提示框"><a href="#提示框" class="headerlink" title="提示框"></a>提示框</h5><ul>
<li>提示框经常用于提示用户在进入页面前输入某个值。</li>
<li>当提示框出现后，用户需要输入某个值，然后点击确认或取消按钮才能继续操纵。</li>
<li>如果用户点击确认，那么返回值为输入的值。如果用户点击取消，那么返回值为 null。</li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">prompt(<span class="string">"文本"</span>,<span class="string">"默认值"</span>)</span><br></pre></td></tr></table></figure>
<h3 id="HTTP"><a href="#HTTP" class="headerlink" title="HTTP"></a>HTTP</h3><h4 id="路由"><a href="#路由" class="headerlink" title="路由"></a>路由</h4><h5 id="路由的种类"><a href="#路由的种类" class="headerlink" title="路由的种类"></a>路由的种类</h5><ol>
<li>页面路由：</li>
<li>hash路由：</li>
<li>H5路由：</li>
</ol>
<h5 id="页面路由"><a href="#页面路由" class="headerlink" title="页面路由"></a>页面路由</h5><p>直接在当前页面进行跳转，js代码如下：<br><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//当前页面跳转到指定页面：</span></span><br><span class="line"><span class="built_in">window</span>.location.href=<span class="string">'https://www.baidu.com/'</span>;</span><br><span class="line"><span class="comment">//回退功能，回退到上一页：</span></span><br><span class="line">history.back();</span><br></pre></td></tr></table></figure></p>
<h5 id="hash路由"><a href="#hash路由" class="headerlink" title="hash路由"></a>hash路由</h5><p>通过window.location方法直接指定一个hash值，页面的地址会追加这个哈希值作为新的请求地址，通过window.onhashchange方法监听页面的hash变化，实现代码如下：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//为当前页面地址追加指定hash值</span></span><br><span class="line"><span class="built_in">window</span>.location=<span class="string">"#test"</span>;</span><br><span class="line"><span class="comment">//获取页面地址的hash值</span></span><br><span class="line"><span class="built_in">window</span>.location.hash</span><br><span class="line"><span class="comment">//监听页面hash的变化</span></span><br><span class="line"><span class="built_in">window</span>.onhashchange=<span class="function"><span class="params">()</span>=&gt;</span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">"current hash: "</span>+<span class="built_in">window</span>.location.hash);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h5 id="H5路由"><a href="#H5路由" class="headerlink" title="H5路由"></a>H5路由</h5><ul>
<li>添加并定位到一个新地址：</li>
</ul>
<p>H5提供的路由，通过history.pushState推入一个状态，当前地址会追加一个hash值或者一个路径地址：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//推入一个hash：</span></span><br><span class="line">history.pushState(<span class="string">"name"</span>,<span class="string">"title"</span>,<span class="string">"#hash1"</span>);</span><br><span class="line"><span class="comment">//推入一个路径：</span></span><br><span class="line">history.pushState(<span class="string">"name"</span>,<span class="string">"title"</span>,<span class="string">"/path"</span>);</span><br></pre></td></tr></table></figure>
<ul>
<li>替换当前页面地址追加的部分的hash或者地址名：</li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">history.replaceState(<span class="string">"name"</span>,<span class="string">"title"</span>,<span class="string">"xxxx"</span>);</span><br><span class="line"><span class="comment">//监听页面通过回退和前进页面历史改变页面时,回调：</span></span><br><span class="line"><span class="built_in">window</span>.onpopstate=<span class="function"><span class="params">()</span>=&gt;</span>&#123;</span><br><span class="line">	<span class="built_in">console</span>.log(<span class="string">"href="</span>+<span class="built_in">window</span>.location.href+<span class="string">"\n"</span>);</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">"pathname="</span>+<span class="built_in">window</span>.location.pathname+<span class="string">"\n"</span>);</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">"hash="</span>+<span class="built_in">window</span>.location.hash+<span class="string">"\n"</span>);</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">"search="</span>+<span class="built_in">window</span>.location.search+<span class="string">"\n"</span>);</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>
<h3 id="DOM"><a href="#DOM" class="headerlink" title="DOM"></a>DOM</h3><h4 id="document"><a href="#document" class="headerlink" title="document"></a>document</h4><p>当前页面</p>
<h5 id="概述-6"><a href="#概述-6" class="headerlink" title="概述"></a>概述</h5><ul>
<li>document对象表示当前页面。</li>
<li>由于HTML在浏览器中以DOM形式表示为树形结构，document对象就是整个DOM树的根节点。</li>
<li>查找DOM树的某个节点，需要从document对象开始查找。最常用的查找是根据ID和Tag Name。</li>
</ul>
<h5 id="页面属性"><a href="#页面属性" class="headerlink" title="页面属性"></a>页面属性</h5><h6 id="标题"><a href="#标题" class="headerlink" title="标题"></a>标题</h6><p>标题：document.title;</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// document的title属性是从HTML文档中的&lt;title&gt;xxx&lt;/title&gt;读取的，但是可以动态改变：</span></span><br><span class="line"><span class="built_in">document</span>.title; <span class="comment">// 读取标题</span></span><br><span class="line"><span class="built_in">document</span>.title = <span class="string">'努力学习JavaScript!'</span>; <span class="comment">// 改变标题</span></span><br></pre></td></tr></table></figure>
<h6 id="cookies"><a href="#cookies" class="headerlink" title="cookies"></a>cookies</h6><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">js可以获取网页的cookie信息；</span><br><span class="line">防止外部第三方js读取cookies,服务器端设置Cookie时，应该始终坚持使用httpOnly来设置；</span><br></pre></td></tr></table></figure>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">document</span>.cookie; <span class="comment">// 获取页面设置的cookie信息；</span></span><br></pre></td></tr></table></figure>
<h6 id="body属性"><a href="#body属性" class="headerlink" title="body属性"></a>body属性</h6><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">网页可见区域宽： document.body.clientWidth</span><br><span class="line">网页可见区域高： document.body.clientHeight</span><br><span class="line">网页可见区域宽： document.body.offsetWidth (包括边线的宽)</span><br><span class="line">网页可见区域高： document.body.offsetHeight (包括边线的高)</span><br><span class="line">网页正文全文宽： document.body.scrollWidth</span><br><span class="line">网页正文全文高： document.body.scrollHeight</span><br><span class="line">网页被卷去的高： document.body.scrollTop</span><br><span class="line">网页被卷去的左： document.body.scrollLeft</span><br></pre></td></tr></table></figure>
<h6 id="dom节点元素"><a href="#dom节点元素" class="headerlink" title="dom节点元素"></a>dom节点元素</h6><p>dom详细内容见操作dom</p>
<ol>
<li>document.getElementById(“x_id”)：按ID获得一个DOM节点；</li>
<li>document.getElementsByTagName(“x_tag”)：按html标签Tag名称获得一组DOM节点；</li>
<li>获取节点的内容innerHTML：document.getElementById(‘x_id’).innerHTML ;</li>
</ol>
<p>示例：</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">dl</span> <span class="attr">id</span>=<span class="string">"drink-menu"</span> <span class="attr">style</span>=<span class="string">"border:solid 1px #ccc;padding:6px;"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">dt</span>&gt;</span>摩卡<span class="tag">&lt;/<span class="name">dt</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">dd</span>&gt;</span>热摩卡咖啡<span class="tag">&lt;/<span class="name">dd</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">dt</span>&gt;</span>酸奶<span class="tag">&lt;/<span class="name">dt</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">dd</span>&gt;</span>北京老酸奶<span class="tag">&lt;/<span class="name">dd</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">dt</span>&gt;</span>果汁<span class="tag">&lt;/<span class="name">dt</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">dd</span>&gt;</span>鲜榨苹果汁<span class="tag">&lt;/<span class="name">dd</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dl</span>&gt;</span></span><br></pre></td></tr></table></figure>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 根据id获取dom节点元素</span></span><br><span class="line"><span class="keyword">var</span> menu = <span class="built_in">document</span>.getElementById(<span class="string">'drink-menu'</span>);</span><br><span class="line"><span class="comment">// 根据标签名获取dom节点元素</span></span><br><span class="line"><span class="keyword">var</span> drinks = <span class="built_in">document</span>.getElementsByTagName(<span class="string">'dt'</span>);</span><br><span class="line"><span class="keyword">var</span> i, s, menu, drinks;</span><br><span class="line"></span><br><span class="line">menu = <span class="built_in">document</span>.getElementById(<span class="string">'drink-menu'</span>);</span><br><span class="line">menu.tagName; <span class="comment">// 'DL'</span></span><br><span class="line"></span><br><span class="line">drinks = <span class="built_in">document</span>.getElementsByTagName(<span class="string">'dt'</span>);</span><br><span class="line">s = <span class="string">'提供的饮料有:'</span>;</span><br><span class="line"><span class="keyword">for</span> (i=<span class="number">0</span>; i&lt;drinks.length; i++) &#123;</span><br><span class="line">    s = s + drinks[i].innerHTML + <span class="string">','</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="built_in">console</span>.log(s);</span><br></pre></td></tr></table></figure>
<h4 id="DOM事件处理"><a href="#DOM事件处理" class="headerlink" title="DOM事件处理"></a>DOM事件处理</h4><p>dom对象提供如下两个方法处理监听事件：</p>
<ol>
<li>addEventListener() 方法用于向指定元素添加事件句柄。</li>
<li>removeEventListener()方法来移除addEventListener()方法添加的事件句柄。</li>
</ol>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 添加 &lt;div&gt; 事件句柄 </span></span><br><span class="line"><span class="built_in">document</span>.getElementById(<span class="string">"myDIV"</span>).addEventListener(<span class="string">"mousemove"</span>, myFunction);</span><br><span class="line"></span><br><span class="line"><span class="comment">// 移除 &lt;div&gt; 事件句柄 </span></span><br><span class="line"><span class="built_in">document</span>.getElementById(<span class="string">"myDIV"</span>).removeEventListener(<span class="string">"mousemove"</span>, myFunction);</span><br></pre></td></tr></table></figure>
<h5 id="event对象"><a href="#event对象" class="headerlink" title="event对象"></a>event对象</h5><p>event时dom自带的事件对象</p>
<ul>
<li>event.preventDefault()：该方法将通知 Web 浏览器不要执行与事件关联的默认动作（如果存在这样的动作）。</li>
<li>event.stopPropagation()：该方法不能阻止同一个 Document 节点上的其他事件句柄被调用，但是它可以阻止把事件分派到其他节点。</li>
</ul>
<h4 id="操作DOM"><a href="#操作DOM" class="headerlink" title="操作DOM"></a>操作DOM</h4><h5 id="创建节点"><a href="#创建节点" class="headerlink" title="创建节点"></a>创建节点</h5><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 1. 创建新节点；</span></span><br><span class="line"><span class="keyword">let</span> d = <span class="built_in">document</span>.createElement(<span class="string">'style'</span>);</span><br><span class="line"><span class="comment">// 2. 设置节点属性；</span></span><br><span class="line">d.setAttribute(<span class="string">'type'</span>, <span class="string">'text/css'</span>);</span><br><span class="line">d.setAttribute(<span class="string">"id"</span>, <span class="string">"container"</span>);</span><br><span class="line"><span class="comment">// 也可以直接属性赋值：d.id="container";</span></span><br><span class="line"><span class="comment">// 获取目标节点，追加元素</span></span><br><span class="line"><span class="keyword">let</span> list = <span class="built_in">document</span>.getElementById(<span class="string">'list'</span>);</span><br><span class="line">list.appendChild(d);</span><br></pre></td></tr></table></figure>
<h5 id="插入DOM"><a href="#插入DOM" class="headerlink" title="插入DOM"></a>插入DOM</h5><p>如果DOM节点是空的，可以直接使用innerHTML “插入”新的DOM节点。</p>
<h6 id="appendChild"><a href="#appendChild" class="headerlink" title="appendChild"></a>appendChild</h6><ul>
<li>把一个子节点添加到父节点的最后一个子节点,首先会从原先的位置删除，再插入到新的位置。</li>
<li>从零创建一个新的节点，然后插入到指定位置;</li>
</ul>
<p>【实例1】增加节点：<br><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- HTML结构 --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">p</span> <span class="attr">id</span>=<span class="string">"js"</span>&gt;</span>JavaScript<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">"list"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">p</span> <span class="attr">id</span>=<span class="string">"java"</span>&gt;</span>Java<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">p</span> <span class="attr">id</span>=<span class="string">"python"</span>&gt;</span>Python<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">p</span> <span class="attr">id</span>=<span class="string">"scheme"</span>&gt;</span>Scheme<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="undefined"></span></span><br><span class="line"><span class="javascript">    <span class="comment">// 把原有节点添加到的最后一项</span></span></span><br><span class="line"><span class="javascript">    <span class="keyword">let</span> js = <span class="built_in">document</span>.getElementById(<span class="string">'js'</span>),</span></span><br><span class="line"><span class="javascript">    <span class="keyword">let</span> list = <span class="built_in">document</span>.getElementById(<span class="string">'list'</span>);</span></span><br><span class="line"><span class="undefined">    list.appendChild(js);</span></span><br><span class="line"><span class="undefined">    </span></span><br><span class="line"><span class="javascript">    <span class="comment">// 创建新节点，并添加</span></span></span><br><span class="line"><span class="javascript">    <span class="keyword">let</span> list = <span class="built_in">document</span>.getElementById(<span class="string">'list'</span>),</span></span><br><span class="line"><span class="javascript">    <span class="keyword">let</span> haskell = <span class="built_in">document</span>.createElement(<span class="string">'p'</span>);</span></span><br><span class="line"><span class="javascript">    haskell.id = <span class="string">'haskell'</span>;</span></span><br><span class="line"><span class="javascript">    haskell.innerText = <span class="string">'Haskell'</span>;</span></span><br><span class="line"><span class="undefined">    list.appendChild(haskell);</span></span><br><span class="line"><span class="undefined"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure></p>
<p>【实例2】向head添加css样式：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> d = <span class="built_in">document</span>.createElement(<span class="string">'style'</span>);</span><br><span class="line">d.setAttribute(<span class="string">'type'</span>, <span class="string">'text/css'</span>);</span><br><span class="line">d.innerHTML = <span class="string">'p &#123; color: red &#125;'</span>;</span><br><span class="line"><span class="built_in">document</span>.getElementsByTagName(<span class="string">'head'</span>)[<span class="number">0</span>].appendChild(d);</span><br></pre></td></tr></table></figure>
<h6 id="insertBefore"><a href="#insertBefore" class="headerlink" title="insertBefore"></a>insertBefore</h6><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">// 把子节点插入到指定的位置referenceElement元素之前</span><br><span class="line">parentElement.insertBefore(newElement, referenceElement);</span><br></pre></td></tr></table></figure>
<h5 id="删除DOM"><a href="#删除DOM" class="headerlink" title="删除DOM"></a>删除DOM</h5><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">removeChild</span><br></pre></td></tr></table></figure>
<p>删除Dom的步骤：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">要删除一个节点，首先要获得该节点本身以及它的父节点，然后，调用父节点的removeChild把自己删掉;</span><br></pre></td></tr></table></figure>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 拿到待删除节点:</span></span><br><span class="line"><span class="keyword">var</span> self = <span class="built_in">document</span>.getElementById(<span class="string">'to-be-removed'</span>);</span><br><span class="line"><span class="comment">// 拿到父节点:</span></span><br><span class="line"><span class="keyword">var</span> parent = self.parentElement;</span><br><span class="line"><span class="comment">// 删除:</span></span><br><span class="line"><span class="keyword">var</span> removed = parent.removeChild(self);</span><br><span class="line">removed === self; <span class="comment">// true</span></span><br></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">【注意】删除后的节点虽然不在文档树中了，但其实它还在内存中，可以随时再次被添加到别的位置。</span><br></pre></td></tr></table></figure>
<h5 id="更新DOM"><a href="#更新DOM" class="headerlink" title="更新DOM"></a>更新DOM</h5><h6 id="innerHTML"><a href="#innerHTML" class="headerlink" title="innerHTML"></a>innerHTML</h6><ul>
<li>不但可以修改一个DOM节点的文本内容，还可以直接通过HTML片段修改DOM节点内部的子树;</li>
<li>用innerHTML时要注意，是否需要写入HTML。如果写入的字符串是通过网络拿到了，要注意对字符编码来避免XSS攻击。</li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> p = <span class="built_in">document</span>.getElementById(<span class="string">'container'</span>);</span><br><span class="line"><span class="comment">// 修改内容</span></span><br><span class="line">p.innerHTML=<span class="string">"hello world"</span>;</span><br><span class="line"><span class="comment">// 修改内容并添加子元素</span></span><br><span class="line">p.innerHTML=<span class="string">"hello &lt;span style='color:red'&gt;RED&lt;/span&gt;"</span>;</span><br></pre></td></tr></table></figure>
<h6 id="write"><a href="#write" class="headerlink" title="write"></a>write</h6><ul>
<li>document.write() 仅仅向文档输出写内容。</li>
<li>如果在文档已完成加载后执行 document.write，整个 HTML 页面将被覆盖;</li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">document</span>.write(<span class="string">"糟糕！文档消失了。"</span>);</span><br></pre></td></tr></table></figure>
<h6 id="innerText"><a href="#innerText" class="headerlink" title="innerText"></a>innerText</h6><ul>
<li>向标签元素中添加纯文本内容，即使是html代码也会被原样输出；</li>
<li>innerText不返回隐藏元素的文本</li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> p = <span class="built_in">document</span>.getElementById(<span class="string">'container'</span>);</span><br><span class="line">p.innerText=<span class="string">"hello &lt;span style='color:red'&gt;RED&lt;/span&gt;"</span>;</span><br><span class="line"><span class="comment">// hello &lt;span style='color:red'&gt;RED&lt;/span&gt;</span></span><br></pre></td></tr></table></figure>
<h6 id="textContent"><a href="#textContent" class="headerlink" title="textContent"></a>textContent</h6><ul>
<li>向标签元素中添加纯文本内容，即使是html代码也会被原样输出；</li>
<li>innerText会输出所有文本，包括隐藏的；</li>
<li>注意IE&lt;9不支持textContent。</li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> p = <span class="built_in">document</span>.getElementById(<span class="string">'container'</span>);</span><br><span class="line">p.textContent=<span class="string">"&lt;p&gt;hello&lt;/p&gt;&lt;p&gt;hello&lt;/p&gt;&lt;p&gt;hello&lt;/p&gt;"</span>;</span><br></pre></td></tr></table></figure>
<h5 id="查询DOM"><a href="#查询DOM" class="headerlink" title="查询DOM"></a>查询DOM</h5><h6 id="操作方法"><a href="#操作方法" class="headerlink" title="操作方法"></a>操作方法</h6><ul>
<li>document.getElementById()：根据元素id获取唯一的DOM节点；</li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 1. 获取ID为'test'的节点：</span></span><br><span class="line"><span class="keyword">var</span> test = <span class="built_in">document</span>.getElementById(<span class="string">'test'</span>);</span><br><span class="line"><span class="comment">// 2. 获取节点test下的所有直属子节点:</span></span><br><span class="line"><span class="keyword">var</span> cs = test.children;</span><br><span class="line"><span class="comment">// 3. 获取节点test下第一个、最后一个子节点：</span></span><br><span class="line"><span class="keyword">var</span> first = test.firstElementChild;</span><br><span class="line"><span class="keyword">var</span> last = test.lastElementChild;</span><br></pre></td></tr></table></figure>
<ul>
<li>document.getElementsByTagName()：根据元素名称获取一组DOM节点；</li>
<li>document.getElementsByClassName()：根据css选择器类名获取一组DOM节点；</li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">【查找某节点下的一组节点】</span><br><span class="line"><span class="comment">// 先定位ID为'test-table'的节点，再返回其内部所有tr节点：</span></span><br><span class="line"><span class="keyword">var</span> trs = <span class="built_in">document</span>.getElementById(<span class="string">'test-table'</span>).getElementsByTagName(<span class="string">'tr'</span>);</span><br><span class="line"><span class="comment">// 先定位ID为'test-div'的节点，再返回其内部所有class包含red的节点：</span></span><br><span class="line"><span class="keyword">var</span> reds = <span class="built_in">document</span>.getElementById(<span class="string">'test-div'</span>).getElementsByClassName(<span class="string">'red'</span>);</span><br></pre></td></tr></table></figure>
<ul>
<li>querySelector()和querySelectorAll()（更加方便）</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">1&gt; querySelector() 根据选择器名称获取节点元素；</span><br><span class="line">2&gt; querySelectorAll() 根据选择器名称获取所有符合条件的一组节点；</span><br></pre></td></tr></table></figure>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 通过querySelector获取ID为q1的节点：</span></span><br><span class="line"><span class="keyword">var</span> q1 = <span class="built_in">document</span>.querySelector(<span class="string">'#q1'</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">// 通过querySelectorAll获取q1节点内的符合条件的所有节点：</span></span><br><span class="line"><span class="keyword">var</span> ps = q1.querySelectorAll(<span class="string">'div.highlighted &gt; p'</span>);</span><br></pre></td></tr></table></figure>
<h6 id="【注意】"><a href="#【注意】" class="headerlink" title="【注意】"></a>【注意】</h6><ol>
<li>低版本的IE&lt;8不支持querySelector和querySelectorAll。IE8仅有限支持。</li>
<li>严格地讲，我们这里的DOM节点是指Element，但是DOM节点实际上是Node。（详见：w3cschool文档节点类型）</li>
</ol>
<h6 id="遍历节点"><a href="#遍历节点" class="headerlink" title="遍历节点"></a>遍历节点</h6><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span></span><br><span class="line">    i, c,</span><br><span class="line">    list = <span class="built_in">document</span>.getElementById(<span class="string">'list'</span>);</span><br><span class="line"><span class="keyword">for</span> (i = <span class="number">0</span>; i &lt; list.children.length; i++) &#123;</span><br><span class="line">    c = list.children[i]; <span class="comment">// 拿到第i个子节点</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h6 id="dom宽高"><a href="#dom宽高" class="headerlink" title="dom宽高"></a>dom宽高</h6><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">元素的实际高度：document.getElementById(&quot;div&quot;).offsetHeight</span><br><span class="line">元素的实际宽度：document.getElementById(&quot;div&quot;).offsetWidth</span><br><span class="line">元素的实际距离左边界的距离：document.getElementById(&quot;div&quot;).offsetLeft</span><br><span class="line">元素的实际距离上边界的距离：document.getElementById(&quot;div&quot;).offsetTop</span><br></pre></td></tr></table></figure>
<h5 id="Dom相关方法"><a href="#Dom相关方法" class="headerlink" title="Dom相关方法"></a>Dom相关方法</h5><h6 id="属性"><a href="#属性" class="headerlink" title="属性"></a>属性</h6><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">// 获取属性值</span><br><span class="line">domX.getAttribute(&quot;data-animal-type&quot;);</span><br><span class="line">// 设置属性值</span><br><span class="line">domX.setAttribute(&apos;type&apos;, &apos;text/css&apos;);</span><br></pre></td></tr></table></figure>
<h4 id="操作表单"><a href="#操作表单" class="headerlink" title="操作表单"></a>操作表单</h4><ul>
<li>用JavaScript操作表单和操作DOM是类似的，因为表单本身也是DOM树。</li>
<li>表单的输入框、下拉框等可以接收用户输入，JavaScript来操作表单，可以获得用户输入的内容，或者对一个输入框设置新的内容。</li>
</ul>
<h5 id="表单输入控件"><a href="#表单输入控件" class="headerlink" title="表单输入控件"></a>表单输入控件</h5><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">文本框，对应的&lt;input type=&quot;text&quot;&gt;，用于输入文本；</span><br><span class="line">口令框，对应的&lt;input type=&quot;password&quot;&gt;，用于输入口令；</span><br><span class="line">单选框，对应的&lt;input type=&quot;radio&quot;&gt;，用于选择一项；</span><br><span class="line">复选框，对应的&lt;input type=&quot;checkbox&quot;&gt;，用于选择多项；</span><br><span class="line">下拉框，对应的&lt;select&gt;，用于选择一项；</span><br><span class="line">隐藏文本(多用于密码)，对应的&lt;input type=&quot;hidden&quot;&gt;，用户不可见，但表单提交时会把隐藏文本发送到服务器。</span><br></pre></td></tr></table></figure>
<h5 id="控件值"><a href="#控件值" class="headerlink" title="控件值"></a>控件值</h5><ol>
<li>text、password、hidden、select控件</li>
</ol>
<ul>
<li>获得了一个input节点的引用，就可以直接调用value获得对应的用户输入值；</li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// &lt;input type="text" id="email"&gt;</span></span><br><span class="line"><span class="keyword">var</span> input = <span class="built_in">document</span>.getElementById(<span class="string">'email'</span>);</span><br><span class="line"><span class="comment">// 获取值</span></span><br><span class="line">input.value; </span><br><span class="line"><span class="comment">// 设置值</span></span><br><span class="line">input.value = <span class="string">'test@example.com'</span>;</span><br></pre></td></tr></table></figure>
<ol>
<li>单选框和复选框</li>
</ol>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">对于单选框和复选框，value属性返回的永远是HTML预设的值，而我们需要获得的实际是用户是否“勾上了”选项，所以应该用checked判断</span><br></pre></td></tr></table></figure>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// &lt;label&gt;&lt;input type="radio" name="weekday" id="monday" value="1"&gt; Monday&lt;/label&gt;</span></span><br><span class="line"><span class="comment">// &lt;label&gt;&lt;input type="radio" name="weekday" id="tuesday" value="2"&gt; Tuesday&lt;/label&gt;</span></span><br><span class="line"><span class="keyword">var</span> mon = <span class="built_in">document</span>.getElementById(<span class="string">'monday'</span>);</span><br><span class="line"><span class="keyword">var</span> tue = <span class="built_in">document</span>.getElementById(<span class="string">'tuesday'</span>);</span><br><span class="line">mon.value; <span class="comment">// '1'</span></span><br><span class="line">tue.value; <span class="comment">// '2'</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 获取选择的状态</span></span><br><span class="line">mon.checked; <span class="comment">// true或者false</span></span><br><span class="line">tue.checked; <span class="comment">// true或者false</span></span><br><span class="line"><span class="comment">// 设置选择的状态</span></span><br><span class="line">input.checked=<span class="literal">true</span>;</span><br></pre></td></tr></table></figure>
<ol>
<li>HTML5控件</li>
</ol>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">不支持HTML5的浏览器无法识别新的控件，会把它们当做type=&quot;text&quot;来显示。</span><br><span class="line">支持HTML5的浏览器将获得格式化的字符串。</span><br><span class="line">例如，type=&quot;date&quot;类型的input的value将保证是一个有效的YYYY-MM-DD格式的日期，或者空字符串。</span><br></pre></td></tr></table></figure>
<p>HTML5控件date、datetime、datetime-local、color等，它们都使用input标签，通过value获取值；</p>
<h5 id="提交表单"><a href="#提交表单" class="headerlink" title="提交表单"></a>提交表单</h5><ul>
<li>一旦用户点击“Submit”按钮，表单开始提交，浏览器就会刷新页面，然后在新页面里告诉你操作是成功了还是失败了。</li>
<li>如果不幸由于网络太慢或者其他原因，就会得到一个404页面。</li>
</ul>
<h6 id="响应onsubmit"><a href="#响应onsubmit" class="headerlink" title="响应onsubmit"></a>响应onsubmit</h6><ul>
<li>浏览器默认点击submit时提交表单，或者用户在最后一个输入框按回车键。</li>
<li>return true来告诉浏览器继续提交，如果return false，浏览器将不会继续提交form，这种情况通常对应用户输入有误，提示用户错误信息后终止提交form。</li>
</ul>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- HTML --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">form</span> <span class="attr">id</span>=<span class="string">"test-form"</span> <span class="attr">onsubmit</span>=<span class="string">"return checkForm()"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"text"</span> <span class="attr">name</span>=<span class="string">"test"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">button</span> <span class="attr">type</span>=<span class="string">"submit"</span>&gt;</span>Submit<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">form</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">form</span> <span class="attr">id</span>=<span class="string">"test-form"</span> <span class="attr">onsubmit</span>=<span class="string">"checkForm()"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"text"</span> <span class="attr">name</span>=<span class="string">"test"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">button</span> <span class="attr">type</span>=<span class="string">"submit"</span>&gt;</span>Submit<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">form</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="undefined"></span></span><br><span class="line"><span class="javascript"><span class="function"><span class="keyword">function</span> <span class="title">checkForm</span>(<span class="params"></span>) </span>&#123;</span></span><br><span class="line"><span class="javascript">    <span class="keyword">var</span> form = <span class="built_in">document</span>.getElementById(<span class="string">'test-form'</span>);</span></span><br><span class="line"><span class="javascript">    <span class="comment">// 可以在此修改form的input...</span></span></span><br><span class="line"><span class="javascript">    <span class="comment">// 继续下一步:</span></span></span><br><span class="line"><span class="javascript">    <span class="keyword">return</span> <span class="literal">true</span>;</span></span><br><span class="line"><span class="undefined">&#125;</span></span><br><span class="line"><span class="undefined"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure>
<h6 id="点击事件提交"><a href="#点击事件提交" class="headerlink" title="点击事件提交"></a>点击事件提交</h6><ul>
<li>缺点是扰乱了浏览器对form的正常提交;</li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">&lt;!-- HTML --&gt;</span><br><span class="line">&lt;form id=<span class="string">"test-form"</span>&gt;</span><br><span class="line">    &lt;input type=<span class="string">"text"</span> name=<span class="string">"test"</span>&gt;</span><br><span class="line">    &lt;button type=<span class="string">"button"</span> onclick=<span class="string">"doSubmitForm()"</span>&gt;Submit&lt;<span class="regexp">/button&gt;</span></span><br><span class="line"><span class="regexp">&lt;/</span>form&gt;</span><br><span class="line"></span><br><span class="line">&lt;script&gt;</span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">doSubmitForm</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="keyword">var</span> form = <span class="built_in">document</span>.getElementById(<span class="string">'test-form'</span>);</span><br><span class="line">    <span class="comment">// 可以在此修改form的input...</span></span><br><span class="line">    <span class="comment">// 提交form:</span></span><br><span class="line">    form.submit();</span><br><span class="line">&#125;</span><br><span class="line">&lt;<span class="regexp">/script&gt;</span></span><br></pre></td></tr></table></figure>
<h6 id="实例-2"><a href="#实例-2" class="headerlink" title="实例"></a>实例</h6><ol>
<li>密码加密</li>
</ol>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">1. 提交表单，对密码加密，利用隐藏元素提交表单。</span><br><span class="line">2. md5: https://github.com/blueimp/JavaScript-MD5</span><br></pre></td></tr></table></figure>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- HTML --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">form</span> <span class="attr">id</span>=<span class="string">"login-form"</span> <span class="attr">method</span>=<span class="string">"post"</span> <span class="attr">onsubmit</span>=<span class="string">"return checkForm()"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"text"</span> <span class="attr">id</span>=<span class="string">"username"</span> <span class="attr">name</span>=<span class="string">"username"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"password"</span> <span class="attr">id</span>=<span class="string">"input-password"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"hidden"</span> <span class="attr">id</span>=<span class="string">"md5-password"</span> <span class="attr">name</span>=<span class="string">"password"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">button</span> <span class="attr">type</span>=<span class="string">"submit"</span>&gt;</span>Submit<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">form</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="undefined"></span></span><br><span class="line"><span class="javascript">    <span class="function"><span class="keyword">function</span> <span class="title">checkForm</span>(<span class="params"></span>) </span>&#123;</span></span><br><span class="line"><span class="javascript">        <span class="keyword">var</span> input_pwd = <span class="built_in">document</span>.getElementById(<span class="string">'input-password'</span>);</span></span><br><span class="line"><span class="javascript">        <span class="keyword">var</span> md5_pwd = <span class="built_in">document</span>.getElementById(<span class="string">'md5-password'</span>);</span></span><br><span class="line"><span class="javascript">        <span class="comment">// 把用户输入的明文变为MD5:</span></span></span><br><span class="line"><span class="undefined">        md5_pwd.value = toMD5(input_pwd.value);</span></span><br><span class="line"><span class="javascript">        <span class="comment">// 继续下一步:</span></span></span><br><span class="line"><span class="javascript">        <span class="keyword">return</span> <span class="literal">true</span>;</span></span><br><span class="line"><span class="undefined">    &#125;</span></span><br><span class="line"><span class="undefined"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure>
<h4 id="操作文件"><a href="#操作文件" class="headerlink" title="操作文件"></a>操作文件</h4><h5 id="普通文件"><a href="#普通文件" class="headerlink" title="普通文件"></a>普通文件</h5><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">// 上传文件的唯一控件</span><br><span class="line"><span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"file"</span>&gt;</span>;</span><br></pre></td></tr></table></figure>
<h6 id="特点-2"><a href="#特点-2" class="headerlink" title="特点"></a>特点</h6><ol>
<li>input.value赋值是没有任何效果的;</li>
<li>JavaScript也无法获得该文件的真实路径；</li>
<li>当表单包含file时，表单的enctype必须指定为multipart/form-data，method必须指定为post，浏览器才能正确编码并以multipart/form-data格式发送表单的数据。</li>
</ol>
<h6 id="文件信息"><a href="#文件信息" class="headerlink" title="文件信息"></a>文件信息</h6><ol>
<li>表单文件改变监听：</li>
</ol>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> fileInput = <span class="built_in">document</span>.getElementById(<span class="string">'test-file-upload'</span>);</span><br><span class="line"><span class="comment">// 监听file的改变获取file的值</span></span><br><span class="line">fileInput.addEventListener(<span class="string">'change'</span>, <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="keyword">var</span> filePath = fileInput.value;</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>
<ol>
<li>提交表单前校验文件： </li>
</ol>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> f = <span class="built_in">document</span>.getElementById(<span class="string">'test-file-upload'</span>);</span><br><span class="line"><span class="keyword">var</span> filename = f.value; <span class="comment">// 'C:\fakepath\test.png'</span></span><br><span class="line"><span class="keyword">if</span> (!filename || !(filename.endsWith(<span class="string">'.jpg'</span>) || filename.endsWith(<span class="string">'.png'</span>) || filename.endsWith(<span class="string">'.gif'</span>))) &#123;</span><br><span class="line">    alert(<span class="string">'Can only upload image file.'</span>);</span><br><span class="line">    <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h5 id="HTML5-File"><a href="#HTML5-File" class="headerlink" title="HTML5 File"></a>HTML5 File</h5><ul>
<li>HTML5新增的File API允许JavaScript读取文件内容，获得更多的文件信息。</li>
<li>File API提供了File和FileReader两个主要对象，可以获得文件信息并读取文件。</li>
</ul>
<h6 id="File"><a href="#File" class="headerlink" title="File"></a>File</h6><ul>
<li>文件名：file.name;</li>
<li>文件大小：file.size;</li>
<li>文件最终修改时间：file.lastModifiedDate;</li>
</ul>
<h6 id="FileReader"><a href="#FileReader" class="headerlink" title="FileReader"></a>FileReader</h6><p>FileReader用于异步读取文件:</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> reader = <span class="keyword">new</span> FileReader();</span><br><span class="line">reader.onload = <span class="function"><span class="keyword">function</span>(<span class="params">e</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">var</span> data = e.target.result; <span class="comment">// 'data:image/jpeg;base64,/9j/4AAQSk...(base64编码)...'            </span></span><br><span class="line">    preview.style.backgroundImage = <span class="string">'url('</span> + data + <span class="string">')'</span>;</span><br><span class="line">&#125;;</span><br><span class="line"><span class="comment">// 以DataURL的形式读取文件:</span></span><br><span class="line">reader.readAsDataURL(file);</span><br></pre></td></tr></table></figure>
<p>【注意】<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">1&gt; 以DataURL的形式读取到的文件是一个字符串，类似于data:image/jpeg;base64,/9j/4AAQSk...(base64编码)...，常用于设置图像。</span><br><span class="line">2&gt; 如果需要服务器端处理，把字符串base64,后面的字符发送给服务器并用Base64解码就可以得到原始文件的二进制内容。</span><br></pre></td></tr></table></figure></p>
<h6 id="实例-3"><a href="#实例-3" class="headerlink" title="实例"></a>实例</h6><ol>
<li>选择图片并回显；</li>
</ol>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">"show_image"</span> <span class="attr">style</span>=<span class="string">"width: 100px; height: 100px;border: 1px solid black;background-size: 100%;"</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"file"</span> <span class="attr">id</span>=<span class="string">"avatar"</span> <span class="attr">name</span>=<span class="string">"image"</span> <span class="attr">onchange</span>=<span class="string">"changeImage()"</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">"info"</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">type</span>=<span class="string">"text/javascript"</span>&gt;</span><span class="undefined"></span></span><br><span class="line"><span class="javascript">    <span class="function"><span class="keyword">function</span> <span class="title">changeImage</span>(<span class="params"></span>) </span>&#123;</span></span><br><span class="line"><span class="javascript">        <span class="built_in">console</span>.log(<span class="string">"----------------------------"</span>);</span></span><br><span class="line"><span class="javascript">        <span class="keyword">let</span> fileInput = <span class="built_in">document</span>.getElementById(<span class="string">'avatar'</span>);</span></span><br><span class="line"><span class="javascript">        <span class="keyword">let</span> preview = <span class="built_in">document</span>.getElementById(<span class="string">'show_image'</span>);</span></span><br><span class="line"><span class="javascript">        <span class="keyword">let</span> info = <span class="built_in">document</span>.getElementById(<span class="string">'info'</span>);</span></span><br><span class="line"><span class="undefined"></span></span><br><span class="line"><span class="javascript">        <span class="comment">// 清除背景图片:</span></span></span><br><span class="line"><span class="javascript">        preview.style.backgroundImage = <span class="string">""</span>;</span></span><br><span class="line"><span class="undefined"></span></span><br><span class="line"><span class="javascript">        <span class="comment">// 检查文件是否选择:</span></span></span><br><span class="line"><span class="javascript">        <span class="keyword">if</span> (!fileInput.value) &#123;</span></span><br><span class="line"><span class="javascript">            info.innerHTML = <span class="string">'没有选择文件'</span>;</span></span><br><span class="line"><span class="javascript">            <span class="keyword">return</span>;</span></span><br><span class="line"><span class="undefined">        &#125;</span></span><br><span class="line"><span class="javascript">        <span class="comment">// 获取File引用:</span></span></span><br><span class="line"><span class="javascript">        <span class="keyword">let</span> file = fileInput.files[<span class="number">0</span>];</span></span><br><span class="line"><span class="undefined"></span></span><br><span class="line"><span class="javascript">        <span class="comment">// 文件名</span></span></span><br><span class="line"><span class="javascript">        <span class="built_in">console</span>.log(<span class="string">"文件名："</span>+file.name);</span></span><br><span class="line"><span class="javascript">        <span class="comment">// 文件大小</span></span></span><br><span class="line"><span class="javascript">        <span class="built_in">console</span>.log(<span class="string">"文件大小："</span>+file.size);</span></span><br><span class="line"><span class="javascript">        <span class="comment">// 文件最后修改的时间</span></span></span><br><span class="line"><span class="javascript">        <span class="built_in">console</span>.log(<span class="string">"文件最终修改时间："</span>+file.lastModifiedDate);</span></span><br><span class="line"><span class="undefined"></span></span><br><span class="line"><span class="javascript">        <span class="keyword">if</span> (file.type !== <span class="string">'image/jpeg'</span> &amp;&amp; file.type !== <span class="string">'image/png'</span> &amp;&amp; file.type !== <span class="string">'image/gif'</span>) &#123;</span></span><br><span class="line"><span class="javascript">            alert(<span class="string">'不是有效的图片文件!'</span>);</span></span><br><span class="line"><span class="javascript">            <span class="keyword">return</span>;</span></span><br><span class="line"><span class="undefined">        &#125;</span></span><br><span class="line"><span class="undefined"></span></span><br><span class="line"><span class="javascript">        <span class="comment">// 读取文件:</span></span></span><br><span class="line"><span class="javascript">        <span class="keyword">let</span> reader = <span class="keyword">new</span> FileReader();</span></span><br><span class="line"><span class="javascript">        reader.onload = <span class="function"><span class="params">e</span>=&gt;</span>&#123;</span></span><br><span class="line"><span class="javascript">            <span class="keyword">let</span> data = e.target.result; <span class="comment">// 'data:image/jpeg;base64,/9j/4AAQSk...(base64编码)...'</span></span></span><br><span class="line"><span class="javascript">            <span class="comment">// 填充文件到div</span></span></span><br><span class="line"><span class="javascript">            preview.style.backgroundImage = <span class="string">'url('</span> + data + <span class="string">')'</span>;</span></span><br><span class="line"><span class="undefined">        &#125;;</span></span><br><span class="line"><span class="javascript">        <span class="comment">// 以DataURL的形式读取文件:</span></span></span><br><span class="line"><span class="undefined">        reader.readAsDataURL(file);</span></span><br><span class="line"><span class="undefined">    &#125;</span></span><br><span class="line"><span class="undefined"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure>
<h3 id="Ajax"><a href="#Ajax" class="headerlink" title="Ajax"></a>Ajax</h3><ul>
<li>Ajax(Asynchronous JavaScript and XML)意思就是用JavaScript执行异步网络请求;</li>
<li>AJAX = 异步 JavaScript 和 XML；</li>
<li>AJAX请求是异步执行的，也就是说，要通过回调函数获得响应。</li>
</ul>
<h4 id="XMLHttpRequest"><a href="#XMLHttpRequest" class="headerlink" title="XMLHttpRequest"></a>XMLHttpRequest</h4><ul>
<li>XMLHttpRequest用于发送请求；</li>
<li>所有现代浏览器均支持 XMLHttpRequest 对象（IE5 和 IE6 使用 ActiveXObject）。</li>
<li>所有现代浏览器（IE7+、Firefox、Chrome、Safari 以及 Opera）均内建 XMLHttpRequest 对象。</li>
</ul>
<h4 id="ajax使用"><a href="#ajax使用" class="headerlink" title="ajax使用"></a>ajax使用</h4><ol>
<li>创建XMLHttpRequest请求对象：</li>
</ol>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> request;</span><br><span class="line"><span class="keyword">if</span> (<span class="built_in">window</span>.XMLHttpRequest) &#123; <span class="comment">// code for IE7+, Firefox, Chrome, Opera, Safari</span></span><br><span class="line">    request = <span class="keyword">new</span> XMLHttpRequest();</span><br><span class="line">&#125; <span class="keyword">else</span> &#123; <span class="comment">// code for IE6, IE5</span></span><br><span class="line">    request = <span class="keyword">new</span> ActiveXObject(<span class="string">'Microsoft.XMLHTTP'</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<ol>
<li>设置请求返回处理：</li>
</ol>
<ul>
<li>当请求被发送到服务器时，我们需要执行一些基于响应的任务。</li>
<li>每当 readyState 改变时，就会触发 onreadystatechange 事件。</li>
<li>readyState 属性存有 XMLHttpRequest 的状态信息；</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">readyState	</span><br><span class="line">存有 XMLHttpRequest 的状态。从 0 到 4 发生变化。</span><br><span class="line">0: 请求未初始化</span><br><span class="line">1: 服务器连接已建立</span><br><span class="line">2: 请求已接收</span><br><span class="line">3: 请求处理中</span><br><span class="line">4: 请求已完成，且响应已就绪</span><br></pre></td></tr></table></figure>
<ul>
<li>http状态码</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">status	</span><br><span class="line">200: &quot;OK&quot;</span><br><span class="line">404: 未找到页面</span><br></pre></td></tr></table></figure>
<p>配置实例：<br><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">success</span>(<span class="params">text</span>) </span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">"success="</span>+text);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">fail</span>(<span class="params">code</span>) </span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">"error code is "</span>+code);</span><br><span class="line">&#125;</span><br><span class="line">        </span><br><span class="line">request.onreadystatechange = <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="keyword">if</span> (request.readyState === <span class="number">4</span>) &#123; <span class="comment">// 成功完成</span></span><br><span class="line">        <span class="comment">// 判断响应结果:</span></span><br><span class="line">        <span class="keyword">if</span> (request.status === <span class="number">200</span>) &#123;</span><br><span class="line">            <span class="comment">// request.responseXML; // XML格式的数据</span></span><br><span class="line">            <span class="comment">// 成功，通过responseText拿到响应的文本:</span></span><br><span class="line">            <span class="keyword">return</span> success(request.responseText);</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            <span class="comment">// 失败，根据响应码判断失败原因:</span></span><br><span class="line">            <span class="keyword">return</span> fail(request.status);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        <span class="comment">// HTTP请求还在继续...</span></span><br><span class="line">        <span class="built_in">console</span>.log(<span class="string">"链接异常..."</span>)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<ol>
<li>open方法发起请求</li>
</ol>
<blockquote>
<p>open()规定请求的类型、URL 以及是否异步处理请求。</p>
</blockquote>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">【语法格式】</span><br><span class="line">request.open(method,url,<span class="keyword">async</span>);</span><br><span class="line">【参数说明】</span><br><span class="line">- method：请求的类型；GET 或 POST</span><br><span class="line">- url：文件在服务器上的位置</span><br><span class="line">- <span class="keyword">async</span>：<span class="literal">true</span>（异步）或 <span class="literal">false</span>（同步）</span><br></pre></td></tr></table></figure>
<p>【GET请求】<br><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 设置请求</span></span><br><span class="line">request.open(<span class="string">"GET"</span>,<span class="string">"url?param1=1&amp;params2=2"</span>,<span class="literal">true</span>);</span><br><span class="line"><span class="comment">// 发送请求</span></span><br><span class="line">request.send();</span><br></pre></td></tr></table></figure></p>
<p>【POST请求】<br><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 设置请求</span></span><br><span class="line">request.open(<span class="string">"POST"</span>,<span class="string">"url"</span>,<span class="literal">true</span>);</span><br><span class="line"><span class="comment">// 发送请求带参数</span></span><br><span class="line">request.send(params);</span><br></pre></td></tr></table></figure></p>
<ol>
<li>设置请求头信息</li>
</ol>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 请求头信息设置</span></span><br><span class="line">request.setRequestHeader(<span class="string">"Content-type"</span>,<span class="string">"application/x-www-form-urlencoded"</span>);</span><br></pre></td></tr></table></figure>
<h4 id="跨域"><a href="#跨域" class="headerlink" title="跨域"></a>跨域</h4><p>a.com访问b.com就发生了跨域，<br>跨域的解决方案见：<a href="http://liusong.site/2016/03/06/%E5%A4%A7%E5%89%8D%E7%AB%AF/JavaScript/%E7%BB%86%E8%AF%B4ajax%E8%B7%A8%E5%9F%9F/">细说ajax跨域</a></p>
<h3 id="Promise"><a href="#Promise" class="headerlink" title="Promise"></a>Promise</h3><h4 id="概念-6"><a href="#概念-6" class="headerlink" title="概念"></a>概念</h4><ul>
<li>Promise主要用于在异步执行的流程中，把执行代码和处理结果的代码清晰地分离了;</li>
<li>支持链式调用；</li>
</ul>
<h5 id="语法格式"><a href="#语法格式" class="headerlink" title="语法格式"></a>语法格式</h5><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//写法1：</span></span><br><span class="line"><span class="keyword">new</span> <span class="built_in">Promise</span>(<span class="function">(<span class="params">resolve,reject</span>)=&gt;</span>&#123;&#125;).then(<span class="function"><span class="params">result</span>=&gt;</span>&#123;&#125;,error=&gt;&#123;&#125;);</span><br><span class="line"><span class="comment">//写法2：</span></span><br><span class="line"><span class="keyword">new</span> <span class="built_in">Promise</span>(<span class="function">(<span class="params">resolve,reject</span>)=&gt;</span>&#123;&#125;).then(<span class="function"><span class="params">result</span>=&gt;</span>&#123;&#125;).catch(<span class="function"><span class="params">error</span>=&gt;</span>&#123;&#125;);</span><br></pre></td></tr></table></figure>
<p>【参数说明】</p>
<ul>
<li>Promise对象接受一个匿名函数作为参数，匿名函数有两个参数(resolve,reject),可以看成两个方法；</li>
<li>写法1中：</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">- 调用resolve方法，会回调then方法的第一个匿名函数；</span><br><span class="line">- 调用reject方法会回调then方法的第二个匿名函数；</span><br></pre></td></tr></table></figure>
<ul>
<li>写法2中：</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">- 调用resolve方法，会回调then方法中的匿名函数；</span><br><span class="line">- 调用reject方法会回调catch方法中的匿名函数；</span><br></pre></td></tr></table></figure>
<h4 id="异步任务"><a href="#异步任务" class="headerlink" title="异步任务"></a>异步任务</h4><h5 id="单异步任务"><a href="#单异步任务" class="headerlink" title="单异步任务"></a>单异步任务</h5><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">test</span>(<span class="params">resolve, reject</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">var</span> timeOut = <span class="built_in">Math</span>.random() * <span class="number">2</span>;</span><br><span class="line">    setTimeout(<span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">        <span class="keyword">if</span> (timeOut &lt; <span class="number">1</span>) &#123;</span><br><span class="line">            resolve(<span class="string">'200 OK'</span>);</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            reject(<span class="string">'timeout is'</span> + timeOut);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;, timeOut * <span class="number">1000</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">testMethod</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="keyword">new</span> <span class="built_in">Promise</span>(test)</span><br><span class="line">        .then(<span class="function"><span class="keyword">function</span> (<span class="params">result</span>) </span>&#123;</span><br><span class="line">            <span class="built_in">console</span>.log(<span class="string">'成功：'</span> + result);</span><br><span class="line">        &#125;)</span><br><span class="line">        .catch(<span class="function"><span class="keyword">function</span> (<span class="params">reason</span>) </span>&#123;</span><br><span class="line">            <span class="built_in">console</span>.log(<span class="string">'失败：'</span> + reason);</span><br><span class="line">        &#125;);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h5 id="串异步任务"><a href="#串异步任务" class="headerlink" title="串异步任务"></a>串异步任务</h5><p>串行执行若干异步任务</p>
<p>问题描述：若干个异步任务，需要先做任务1，如果成功后再做任务2，任何任务失败则不再继续并执行错误处理函数？</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> job1=<span class="keyword">new</span> <span class="built_in">Promise</span>(task1Fn());</span><br><span class="line"><span class="keyword">let</span> job2=<span class="keyword">new</span> <span class="built_in">Promise</span>(task2n());</span><br><span class="line"><span class="keyword">let</span> job3=<span class="keyword">new</span> <span class="built_in">Promise</span>(task3Fn());</span><br><span class="line"><span class="comment">// 写法1：</span></span><br><span class="line">job1.then(<span class="function"><span class="params">()</span>=&gt;</span>&#123;<span class="keyword">return</span> job2;&#125;).then(<span class="function"><span class="params">()</span>=&gt;</span>&#123;&#125;);</span><br><span class="line"><span class="comment">// 写法2：</span></span><br><span class="line">job1.then(job2).then(job3).catch(handleError);</span><br></pre></td></tr></table></figure>
<h5 id="并行异步任务"><a href="#并行异步任务" class="headerlink" title="并行异步任务"></a>并行异步任务</h5><h6 id="Promise-all"><a href="#Promise-all" class="headerlink" title="Promise.all"></a>Promise.all</h6><p>描述：并行执行两个任务p1,p2,全部结束后打印结果？</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> p1 = <span class="keyword">new</span> <span class="built_in">Promise</span>(<span class="function"><span class="keyword">function</span> (<span class="params">resolve, reject</span>) </span>&#123;</span><br><span class="line">    setTimeout(resolve, <span class="number">500</span>, <span class="string">'P1'</span>);</span><br><span class="line">&#125;);</span><br><span class="line"><span class="keyword">var</span> p2 = <span class="keyword">new</span> <span class="built_in">Promise</span>(<span class="function"><span class="keyword">function</span> (<span class="params">resolve, reject</span>) </span>&#123;</span><br><span class="line">    setTimeout(resolve, <span class="number">600</span>, <span class="string">'P2'</span>);</span><br><span class="line">&#125;);</span><br><span class="line"><span class="comment">// 同时执行p1和p2，并在它们都完成后执行then:</span></span><br><span class="line"><span class="built_in">Promise</span>.all([p1, p2]).then(<span class="function"><span class="keyword">function</span> (<span class="params">results</span>) </span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(results); <span class="comment">// 获得一个Array: ['P1', 'P2']</span></span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>
<h6 id="Promise-race"><a href="#Promise-race" class="headerlink" title="Promise.race"></a>Promise.race</h6><p>描述：并行执行执行多个异步任务，任意任务执行结束，丢弃其他任务？</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> p1 = <span class="keyword">new</span> <span class="built_in">Promise</span>(<span class="function"><span class="keyword">function</span> (<span class="params">resolve, reject</span>) </span>&#123;</span><br><span class="line">    setTimeout(resolve, <span class="number">500</span>, <span class="string">'P1'</span>);</span><br><span class="line">&#125;);</span><br><span class="line"><span class="keyword">var</span> p2 = <span class="keyword">new</span> <span class="built_in">Promise</span>(<span class="function"><span class="keyword">function</span> (<span class="params">resolve, reject</span>) </span>&#123;</span><br><span class="line">    setTimeout(resolve, <span class="number">600</span>, <span class="string">'P2'</span>);</span><br><span class="line">&#125;);</span><br><span class="line"><span class="built_in">Promise</span>.race([p1, p2]).then(<span class="function"><span class="keyword">function</span> (<span class="params">result</span>) </span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(result); <span class="comment">// 'P1'</span></span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>
<h4 id="执行ajax"><a href="#执行ajax" class="headerlink" title="执行ajax"></a>执行ajax</h4><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// ajax函数将返回Promise对象:</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">ajax</span>(<span class="params">method, url, data</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">var</span> request = <span class="keyword">new</span> XMLHttpRequest();</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">new</span> <span class="built_in">Promise</span>(<span class="function"><span class="keyword">function</span> (<span class="params">resolve, reject</span>) </span>&#123;</span><br><span class="line">        request.onreadystatechange = <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">            <span class="keyword">if</span> (request.readyState === <span class="number">4</span>) &#123;</span><br><span class="line">                <span class="keyword">if</span> (request.status === <span class="number">200</span>) &#123;</span><br><span class="line">                    resolve(request.responseText);</span><br><span class="line">                &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                    reject(request.status);</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;;</span><br><span class="line">        request.open(method, url);</span><br><span class="line">        request.send(data);</span><br><span class="line">    &#125;);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 入口</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">mainFn</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">    <span class="keyword">var</span> p = ajax(<span class="string">'GET'</span>, <span class="string">'/api/categories'</span>);</span><br><span class="line">    p.then(<span class="function"><span class="keyword">function</span> (<span class="params">text</span>) </span>&#123; <span class="comment">// 如果AJAX成功，获得响应内容</span></span><br><span class="line">        log.innerText = text;</span><br><span class="line">    &#125;).catch(<span class="function"><span class="keyword">function</span> (<span class="params">status</span>) </span>&#123; <span class="comment">// 如果AJAX失败，获得响应代码</span></span><br><span class="line">        log.innerText = <span class="string">'ERROR: '</span> + status;</span><br><span class="line">    &#125;);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="fetch"><a href="#fetch" class="headerlink" title="fetch"></a>fetch</h3><p>fetch用于访问和操纵HTTP请求；</p>
<h4 id="对比ajax"><a href="#对比ajax" class="headerlink" title="对比ajax"></a>对比ajax</h4><ul>
<li>除非网络故障，否则fetch()返回的Promise 不会被标记为reject，只有resolve状态，但是可以通过resolve的ok属性来判断请求结果是否被拒（404 or 500）；</li>
<li>默认情况下，fetch不会从服务端发送或接收任何 cookies, 要发送cookies，必须设置<span style="color:red">credentials</span>选项。</li>
</ul>
<h4 id="fetch语法"><a href="#fetch语法" class="headerlink" title="fetch语法"></a>fetch语法</h4><p>【语法格式】<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Promise&lt;Response&gt; fetch(input[, init]);</span><br></pre></td></tr></table></figure></p>
<p>【参数解释】</p>
<ul>
<li>input：（必须参数）url或request对象；</li>
<li>init: （可选参数）配置请求信息的对象；</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">配置参数如下：</span><br><span class="line">- method: 请求使用的方法，如 GET、POST。</span><br><span class="line">- headers: 请求的头信息，形式为 Headers 的对象或包含 ByteString 值的对象字面量。</span><br><span class="line">- body: 请求的 body 信息：可能是一个 Blob、BufferSource、FormData、URLSearchParams 或者 USVString 对象。注意 GET 或 HEAD 方法的请求不能包含 body 信息。</span><br><span class="line">- mode: 请求的模式，如 cors、 no-cors 或者 same-origin。</span><br><span class="line">- credentials: 请求的凭据credentials，如omit（不在请求中包含凭据）、same-origin（在请求URL与调用脚本位于同一起源处时发送凭据）或者 include（发送包含凭据的请求）。为了在当前域名内自动发送cookie， 必须提供这个选项， 从Chrome50开始，这个属性也可以接受FederatedCredential 实例或是一个PasswordCredential实例。</span><br><span class="line">- cache:  请求的 cache 模式: default 、 no-store 、 reload 、 no-cache 、 force-cache 或者 only-if-cached 。</span><br><span class="line">- redirect: 可用的 redirect 模式: follow (自动重定向), error (如果产生重定向将自动终止并且抛出一个错误), 或者 manual (手动处理重定向). 在Chrome中，Chrome 47之前的默认值是 follow，从 Chrome 47开始是 manual。</span><br><span class="line">- referrer: 一个 USVString 可以是 no-referrer、client或一个 URL。默认是 client。</span><br><span class="line">- referrerPolicy: Specifies the value of the referer HTTP header. May be one of no-referrer、 no-referrer-when-downgrade、 origin、 origin-when-cross-origin、 unsafe-url 。</span><br><span class="line">- integrity: 包括请求的  subresource integrity 值 （ 例如： sha256-BpfBw7ivV8q2jLiT13fxDYAe2tJllusRSZ273h2nFSE=）。</span><br></pre></td></tr></table></figure>
<h5 id="Request对象"><a href="#Request对象" class="headerlink" title="Request对象"></a>Request对象</h5><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> myHeaders = <span class="keyword">new</span> Headers();</span><br><span class="line"><span class="keyword">var</span> myInit = &#123; <span class="attr">method</span>: <span class="string">'GET'</span>,</span><br><span class="line">               headers: myHeaders,</span><br><span class="line">               mode: <span class="string">'cors'</span>,</span><br><span class="line">               cache: <span class="string">'default'</span> &#125;;</span><br><span class="line"><span class="keyword">var</span> myRequest = <span class="keyword">new</span> Request(<span class="string">'flowers.jpg'</span>, myInit);</span><br><span class="line"><span class="comment">//请求</span></span><br><span class="line">fetch(myRequest).then(<span class="function"><span class="keyword">function</span>(<span class="params">response</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> response.blob();</span><br><span class="line">&#125;).then(<span class="function"><span class="keyword">function</span>(<span class="params">myBlob</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">var</span> objectURL = URL.createObjectURL(myBlob);</span><br><span class="line">  myImage.src = objectURL;</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>
<h5 id="Response对象"><a href="#Response对象" class="headerlink" title="Response对象"></a>Response对象</h5><p>Response实例是在fetch()处理完promises之后返回的.</p>
<h6 id="创建Response"><a href="#创建Response" class="headerlink" title="创建Response"></a>创建Response</h6><p>Response() 构造方法接受两个可选参数—response的数据体和一个初始化对象(与Request()所接受的init参数类似.)</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> myBody = <span class="keyword">new</span> Blob();</span><br><span class="line"></span><br><span class="line">addEventListener(<span class="string">'fetch'</span>, <span class="function"><span class="keyword">function</span>(<span class="params">event</span>) </span>&#123;</span><br><span class="line">  event.respondWith(<span class="keyword">new</span> Response(myBody, &#123;</span><br><span class="line">    headers: &#123; <span class="string">"Content-Type"</span> : <span class="string">"text/plain"</span> &#125;</span><br><span class="line">  &#125;);</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>
<h6 id="response常见属性"><a href="#response常见属性" class="headerlink" title="response常见属性"></a>response常见属性</h6><ul>
<li>Response.status — 整数(默认值为200) 为response的状态码.</li>
<li>Response.statusText — 字符串(默认值为”OK”),该值与HTTP状态码消息对应.</li>
<li>Response.ok — 如上所示, 该属性是来检查response的状态是否在200-299(包括200,299)这个范围内.该属性返回一个Boolean值.</li>
</ul>
<h5 id="Headers"><a href="#Headers" class="headerlink" title="Headers"></a>Headers</h5><p>headers配置也创建Headers对象来设置：<br><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> myHeaders = <span class="keyword">new</span> Headers(&#123;</span><br><span class="line">    <span class="string">"Content-Length"</span>: content.length.toString(),</span><br><span class="line">    <span class="string">"X-Custom-Header"</span>: <span class="string">"ProcessThisImmediately"</span>,</span><br><span class="line">&#125;);</span><br><span class="line"><span class="comment">//添加配置</span></span><br><span class="line">myHeaders.append(<span class="string">"Content-Type"</span>, <span class="string">"text/plain"</span>);</span><br><span class="line"><span class="comment">//更新写入配置（有一些属性不可以写入，如Origin）</span></span><br><span class="line">myHeaders.set(<span class="string">"Content-Type"</span>, <span class="string">"application/json"</span>);</span><br><span class="line"><span class="comment">//获取配置</span></span><br><span class="line"><span class="built_in">console</span>.log(myHeaders.get(<span class="string">"Content-Length"</span>)); <span class="comment">// 11</span></span><br><span class="line"><span class="built_in">console</span>.log(myHeaders.getAll(<span class="string">"X-Custom-Header"</span>)); <span class="comment">// ["ProcessThisImmediately", "AnotherValue"]</span></span><br><span class="line"><span class="comment">//删除配置</span></span><br><span class="line">myHeaders.delete(<span class="string">"X-Custom-Header"</span>);</span><br></pre></td></tr></table></figure></p>
<h5 id="Body"><a href="#Body" class="headerlink" title="Body"></a>Body</h5><p>body用于指定提交请求的参数；</p>
<p>body参数类型可以是以下任意类型的实例：</p>
<ul>
<li>ArrayBuffer</li>
<li>ArrayBufferView (Uint8Array and friends)</li>
<li>Blob/File</li>
<li>string</li>
<li>URLSearchParams(用于form-data格式提交请求参数)</li>
<li>FormData(用于图文格式提交请求参数)</li>
</ul>
<p>Body类定义了以下方法 (这些方法都被 Request 和Response所实现)以获取body内容. 这些方法都会返回一个被解析后的promise对象和数据：</p>
<ul>
<li>arrayBuffer()</li>
<li>blob()： Response流</li>
<li>json()：Body mixin的json()方法使用一个Response 流，并将其读取完成。它返回一个 promise ，解析结果是将文本体解析为JSON。</li>
<li>text()</li>
<li>formData()：将Response对象中的所承载的数据流读取并封装成为一个对象。</li>
</ul>
<h4 id="请求示例"><a href="#请求示例" class="headerlink" title="请求示例"></a>请求示例</h4><h5 id="Get请求"><a href="#Get请求" class="headerlink" title="Get请求"></a>Get请求</h5><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//get请求</span></span><br><span class="line">fetch(<span class="string">"http://localhost:8080/test-api/get"</span>)</span><br><span class="line">    .then(<span class="function"><span class="keyword">function</span> (<span class="params">response</span>) </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> response.json(); <span class="comment">//返回一个Promise对象</span></span><br><span class="line">    &#125;)</span><br><span class="line">    .then(<span class="function"><span class="keyword">function</span> (<span class="params">myJson</span>) </span>&#123; <span class="comment">//需要二次处理才会返回处理结果</span></span><br><span class="line">        <span class="built_in">console</span>.log(myJson);</span><br><span class="line">    &#125;);</span><br></pre></td></tr></table></figure>
<h5 id="Get请求-带参数"><a href="#Get请求-带参数" class="headerlink" title="Get请求-带参数"></a>Get请求-带参数</h5><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">testGetByParams</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="keyword">let</span> url = <span class="string">"http://localhost:8080/test-api/get"</span>;</span><br><span class="line">    <span class="keyword">let</span> params=&#123;<span class="attr">tag</span>:<span class="string">'tag'</span>&#125;;</span><br><span class="line">    <span class="keyword">if</span> (params) &#123;</span><br><span class="line">        <span class="keyword">let</span> paramsArray = [];</span><br><span class="line">        <span class="comment">//拼接参数</span></span><br><span class="line">        <span class="built_in">Object</span>.keys(params).forEach(<span class="function"><span class="params">key</span> =&gt;</span> paramsArray.push(key + <span class="string">'='</span> + params[key]));</span><br><span class="line">        <span class="keyword">if</span> (url.search(<span class="regexp">/\?/</span>) === <span class="number">-1</span>) &#123;</span><br><span class="line">            url += <span class="string">'?'</span> + paramsArray.join(<span class="string">'&amp;'</span>)</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            url += <span class="string">'&amp;'</span> + paramsArray.join(<span class="string">'&amp;'</span>)</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    fetch(url, &#123;</span><br><span class="line">        method: <span class="string">'GET'</span></span><br><span class="line">    &#125;).then(<span class="function"><span class="keyword">function</span> (<span class="params">response</span>) </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> response.json(); <span class="comment">//返回一个Promise对象</span></span><br><span class="line">    &#125;).then(<span class="function"><span class="keyword">function</span> (<span class="params">myJson</span>) </span>&#123; <span class="comment">//需要二次处理才会返回处理结果</span></span><br><span class="line">        <span class="built_in">console</span>.log(myJson);</span><br><span class="line">    &#125;);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h5 id="post请求-body形式"><a href="#post请求-body形式" class="headerlink" title="post请求-body形式"></a>post请求-body形式</h5><p>JSON.stringify()来组织参数：<br><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">testPostBody</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    fetch(<span class="string">"http://localhost:8080/test-api/postBody"</span>, &#123;</span><br><span class="line">        method: <span class="string">'POST'</span>,</span><br><span class="line">        headers: &#123;</span><br><span class="line">            <span class="string">'Content-Type'</span>: <span class="string">'application/json'</span></span><br><span class="line">        &#125;,</span><br><span class="line">        body: <span class="built_in">JSON</span>.stringify(&#123;<span class="attr">tag</span>: <span class="string">'this'</span>&#125;),</span><br><span class="line">        credentials: <span class="string">'same-origin'</span>, <span class="comment">//请求可以带cookie</span></span><br><span class="line">    &#125;).then(<span class="function"><span class="params">response</span> =&gt;</span> &#123;</span><br><span class="line">        <span class="keyword">if</span> (response.ok) &#123;</span><br><span class="line">            <span class="keyword">return</span> response.json();</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">throw</span> <span class="keyword">new</span> <span class="built_in">Error</span>(<span class="string">'Network response was not ok.'</span>);</span><br><span class="line">    &#125;).catch(<span class="function"><span class="params">error</span> =&gt;</span> &#123;</span><br><span class="line">        <span class="built_in">console</span>.error(<span class="string">'Error:'</span>, error)</span><br><span class="line">    &#125;).then(<span class="function"><span class="params">response</span> =&gt;</span> &#123;</span><br><span class="line">        <span class="built_in">console</span>.log(<span class="string">'Success:'</span>, response)</span><br><span class="line">    &#125;);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<h5 id="post请求-FormData形式"><a href="#post请求-FormData形式" class="headerlink" title="post请求-FormData形式"></a>post请求-FormData形式</h5><p>URLSearchParams来组织参数：<br><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">testPostFormData</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="keyword">let</span> params = <span class="keyword">new</span> URLSearchParams();</span><br><span class="line">    params.append(<span class="string">'tag'</span>, <span class="string">'tag'</span>);</span><br><span class="line"></span><br><span class="line">    fetch(<span class="string">"http://localhost:8080/test-api/postFormData"</span>, &#123;</span><br><span class="line">        method: <span class="string">'POST'</span>,</span><br><span class="line">        headers: &#123;</span><br><span class="line">            <span class="string">'Content-Type'</span>: <span class="string">'application/x-www-form-urlencoded'</span></span><br><span class="line">        &#125;,</span><br><span class="line">        body: params,</span><br><span class="line">        credentials: <span class="string">'same-origin'</span>, <span class="comment">//请求可以带cookie</span></span><br><span class="line">    &#125;).then(<span class="function"><span class="params">response</span> =&gt;</span> &#123;</span><br><span class="line">        <span class="keyword">if</span> (response.ok) &#123;</span><br><span class="line">            <span class="keyword">return</span> response.json();</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">throw</span> <span class="keyword">new</span> <span class="built_in">Error</span>(<span class="string">'Network response was not ok.'</span>);</span><br><span class="line">    &#125;).catch(<span class="function"><span class="params">error</span> =&gt;</span> &#123;</span><br><span class="line">        <span class="built_in">console</span>.error(<span class="string">'Error:'</span>, error)</span><br><span class="line">    &#125;).then(<span class="function"><span class="params">response</span> =&gt;</span> &#123;</span><br><span class="line">        <span class="built_in">console</span>.log(<span class="string">'Success:'</span>, response)</span><br><span class="line">    &#125;);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<h5 id="post请求-form-data提交文件文字"><a href="#post请求-form-data提交文件文字" class="headerlink" title="post请求-form-data提交文件文字"></a>post请求-form-data提交文件文字</h5><p>表单的形式提交文件和文字，参数是FormData对象，不用指定Content-Type：<br><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> formData = <span class="keyword">new</span> FormData();</span><br><span class="line"><span class="keyword">let</span> fileField = <span class="built_in">document</span>.querySelector(<span class="string">"input[type='file']"</span>);</span><br><span class="line"></span><br><span class="line">formData.append(<span class="string">'username'</span>, <span class="string">'abc123'</span>);</span><br><span class="line">formData.append(<span class="string">'avatar'</span>, fileField.files[<span class="number">0</span>]);</span><br><span class="line"></span><br><span class="line">fetch(<span class="string">'https://example.com/profile/avatar'</span>, &#123;</span><br><span class="line">  method: <span class="string">'POST'</span>,</span><br><span class="line">  body: formData</span><br><span class="line">&#125;)</span><br><span class="line">.then(<span class="function"><span class="params">response</span> =&gt;</span> response.json())</span><br><span class="line">.catch(<span class="function"><span class="params">error</span> =&gt;</span> <span class="built_in">console</span>.error(<span class="string">'Error:'</span>, error))</span><br><span class="line">.then(<span class="function"><span class="params">response</span> =&gt;</span> <span class="built_in">console</span>.log(<span class="string">'Success:'</span>, response));</span><br></pre></td></tr></table></figure></p>
<h3 id="Generator"><a href="#Generator" class="headerlink" title="Generator"></a>Generator</h3><p>Generator 函数是协程在 ES6 的实现，最大特点就是可以交出函数的执行权（即暂停执行）。</p>
<h4 id="概述-7"><a href="#概述-7" class="headerlink" title="概述"></a>概述</h4><ul>
<li>generator和函数不同的是，generator由function<em>定义（注意多出的</em>号），并且，除了return语句，还可以用yield返回多次。</li>
<li>调用一个generator和调用函数不一样，调用生成器g()，仅仅是创建了一个generator对象，还没有去执行它，调用generator对象的next()方法才会执行。</li>
<li>整个 Generator 函数就是一个封装的异步任务，或者说是异步任务的容器。异步操作需要暂停的地方，都用yield语句注明。</li>
</ul>
<h5 id="基本示例"><a href="#基本示例" class="headerlink" title="基本示例"></a>基本示例</h5><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">handleFn</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">1</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> gen = <span class="function"><span class="keyword">function</span>* (<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="keyword">yield</span> handleFn();</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> g = gen();</span><br><span class="line"><span class="keyword">let</span> result = g.next();</span><br><span class="line"></span><br><span class="line"><span class="built_in">console</span>.log(result); <span class="comment">//&#123; value: 1, done: false &#125;</span></span><br></pre></td></tr></table></figure>
<h4 id="使用方式"><a href="#使用方式" class="headerlink" title="使用方式"></a>使用方式</h4><p>执行generator对象有两个方法：</p>
<ol>
<li>一是不断地调用generator对象的next()方法；</li>
<li>直接用for … of循环迭代generator对象，这种方式不需要我们自己判断done；</li>
</ol>
<h5 id="实例-4"><a href="#实例-4" class="headerlink" title="实例"></a>实例</h5><ol>
<li>打印一个菲波那切数列；</li>
</ol>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span>* <span class="title">fib</span>(<span class="params">max</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">var</span></span><br><span class="line">        t,</span><br><span class="line">        a = <span class="number">0</span>,</span><br><span class="line">        b = <span class="number">1</span>,</span><br><span class="line">        n = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">while</span> (n &lt; max) &#123;</span><br><span class="line">        <span class="keyword">yield</span> a;</span><br><span class="line">        [a, b] = [b, a + b];</span><br><span class="line">        n ++;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 1. next()方法输出结果</span></span><br><span class="line"><span class="keyword">var</span> f = fib(<span class="number">5</span>);</span><br><span class="line">f.next(); <span class="comment">// &#123;value: 0, done: false&#125;</span></span><br><span class="line">f.next(); <span class="comment">// &#123;value: 1, done: false&#125;</span></span><br><span class="line">f.next(); <span class="comment">// &#123;value: 1, done: false&#125;</span></span><br><span class="line">f.next(); <span class="comment">// &#123;value: 2, done: false&#125;</span></span><br><span class="line">f.next(); <span class="comment">// &#123;value: 3, done: false&#125;</span></span><br><span class="line">f.next(); <span class="comment">// &#123;value: undefined, done: true&#125;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 2. for ... of循环迭代generator对象输出结果</span></span><br><span class="line"><span class="keyword">for</span> (<span class="keyword">var</span> x <span class="keyword">of</span> fib(<span class="number">5</span>)) &#123;</span><br><span class="line">    <span class="built_in">console</span>.log(x); <span class="comment">// 依次输出0, 1, 1, 2, 3, ...</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h4 id="执行异步任务"><a href="#执行异步任务" class="headerlink" title="执行异步任务"></a>执行异步任务</h4><blockquote>
<p> Generator 函数将异步操作表示得很简洁，但是流程管理却不方便（即何时执行第一阶段、何时执行第二阶段）。</p>
</blockquote>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span>* <span class="title">gen</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="keyword">let</span> url = <span class="string">"http://localhost:8080/test-api/testGet"</span>;</span><br><span class="line">    <span class="keyword">yield</span> fetch(url);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">testGenerator</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="keyword">let</span> g = gen();</span><br><span class="line">    <span class="keyword">let</span> result = g.next();</span><br><span class="line">    result.value.then(<span class="function"><span class="keyword">function</span> (<span class="params">data</span>) </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> data.json();</span><br><span class="line">    &#125;).then(<span class="function"><span class="keyword">function</span> (<span class="params">data</span>) </span>&#123;</span><br><span class="line">        <span class="built_in">console</span>.log(data);</span><br><span class="line">    &#125;);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>【上述代码执行流程】<br>首先执行 Generator 函数，获取遍历器对象，然后使用next方法（第二行），执行异步任务的第一阶段。由于Fetch模块返回的是一个 Promise 对象，因此要用then方法调用下一个next方法。</p>
<h3 id="异步"><a href="#异步" class="headerlink" title="异步"></a>异步</h3><p>ES6中用Generator将异步操作表示得很简洁，但是流程管理却不方便（即何时执行第一阶段、何时执行第二阶段）。</p>
<p>es8引入async/await异步函数，即在async标识的函数体内部，使用await调用异步方法，就会立刻执行，并将结果返回；</p>
<h4 id="语法-2"><a href="#语法-2" class="headerlink" title="语法"></a>语法</h4><h5 id="四种写法"><a href="#四种写法" class="headerlink" title="四种写法"></a>四种写法</h5><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">1&gt; 函数声明： async function foo() &#123;&#125;</span><br><span class="line">2&gt; 函数表达式： const foo = async function() &#123;&#125;</span><br><span class="line">3&gt; 对象的方式： let obj = &#123; async foo() &#123;&#125; &#125;</span><br><span class="line">4&gt; 箭头函数： const foo = async () =&gt; &#123;&#125;</span><br></pre></td></tr></table></figure>
<h5 id="错误处理"><a href="#错误处理" class="headerlink" title="错误处理"></a>错误处理</h5><p>使用try..catch来处理错误：<br><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">async</span> <span class="function"><span class="keyword">function</span> <span class="title">asyncFunc</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="keyword">try</span> &#123;</span><br><span class="line">        <span class="keyword">await</span> fetch(asyncTask());</span><br><span class="line">    &#125;<span class="keyword">catch</span> (e) &#123;</span><br><span class="line">        <span class="built_in">console</span>.error(e);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<h4 id="fetch-1"><a href="#fetch-1" class="headerlink" title="fetch"></a>fetch</h4><p>async/wait与fetch结合，可以像写同步代码一样写异步；</p>
<h5 id="处理单个异步任务"><a href="#处理单个异步任务" class="headerlink" title="处理单个异步任务"></a>处理单个异步任务</h5><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">async</span> <span class="function"><span class="keyword">function</span> <span class="title">asyncFunc</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="keyword">let</span> url = <span class="string">"http://localhost:8080/test-api/testGet"</span>;</span><br><span class="line">    <span class="keyword">let</span> response = <span class="keyword">await</span> fetch(url);</span><br><span class="line">    <span class="keyword">let</span> data = <span class="keyword">await</span> response.json(); <span class="comment">//注意此处返回Promise对象</span></span><br><span class="line">    <span class="built_in">console</span>.log(data);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h5 id="顺序处理多个异步任务"><a href="#顺序处理多个异步任务" class="headerlink" title="顺序处理多个异步任务"></a>顺序处理多个异步任务</h5><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">async</span> <span class="function"><span class="keyword">function</span> <span class="title">asyncFunc</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="keyword">let</span> url = <span class="string">"http://localhost:8080/test-api/testGet"</span>;</span><br><span class="line">    <span class="keyword">let</span> response1 = <span class="keyword">await</span> fetch(url);</span><br><span class="line">    <span class="keyword">let</span> response2 = <span class="keyword">await</span> fetch(url);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h5 id="并行处理多个异步任务"><a href="#并行处理多个异步任务" class="headerlink" title="并行处理多个异步任务"></a>并行处理多个异步任务</h5><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">async</span> <span class="function"><span class="keyword">function</span> <span class="title">asyncFunc</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="keyword">let</span> url = <span class="string">"http://localhost:8080/test-api/testGet"</span>;</span><br><span class="line">    <span class="keyword">const</span> [res1, res2] = <span class="keyword">await</span> <span class="built_in">Promise</span>.all([</span><br><span class="line">        <span class="keyword">await</span> fetch(url),</span><br><span class="line">        <span class="keyword">await</span> fetch(url)</span><br><span class="line">    ]);</span><br><span class="line">    <span class="built_in">console</span>.log(res1, res2);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="错误处理-1"><a href="#错误处理-1" class="headerlink" title="错误处理"></a>错误处理</h3><h4 id="捕获异常"><a href="#捕获异常" class="headerlink" title="捕获异常"></a>捕获异常</h4><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">try</span> &#123;</span><br><span class="line">    ...</span><br><span class="line">&#125; <span class="keyword">catch</span> (e) &#123;</span><br><span class="line">    ...</span><br><span class="line">&#125; <span class="keyword">finally</span> &#123;</span><br><span class="line">    ...</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h4 id="错误类型"><a href="#错误类型" class="headerlink" title="错误类型"></a>错误类型</h4><ul>
<li>JavaScript有一个标准的Error对象表示错误，还有从Error派生的TypeError、ReferenceError等错误对象。</li>
<li>我们在处理错误时，可以通过catch(e)捕获的变量e访问错误对象。</li>
</ul>
<h4 id="抛出错误"><a href="#抛出错误" class="headerlink" title="抛出错误"></a>抛出错误</h4><ul>
<li>程序也可以主动抛出一个错误，让执行流程直接跳转到catch块。</li>
<li>抛出错误使用throw语句。</li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">throw</span> <span class="keyword">new</span> <span class="built_in">Error</span>(<span class="string">'输入错误'</span>);</span><br></pre></td></tr></table></figure>
<h3 id="参考"><a href="#参考" class="headerlink" title="参考"></a>参考</h3><h4 id="计时操作"><a href="#计时操作" class="headerlink" title="计时操作"></a>计时操作</h4><ul>
<li>setTimeout()未来的某时执行代码</li>
<li>clearTimeout()取消setTimeout()</li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">callback</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">'Done'</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">testMethod</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">'before setTimeout()'</span>);</span><br><span class="line">    setTimeout(callback, <span class="number">1000</span>); <span class="comment">// 1秒钟后调用callback函数</span></span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">'after setTimeout()'</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h4 id="全局函数"><a href="#全局函数" class="headerlink" title="全局函数"></a>全局函数</h4><p>可在全局直接调用；</p>
<ul>
<li>decodeURI()    解码某个编码的 URI。</li>
<li>decodeURIComponent()    解码一个编码的 URI 组件。</li>
<li>encodeURI()    把字符串编码为 URI。</li>
<li>encodeURIComponent()    把字符串编码为 URI 组件。</li>
<li>escape()    对字符串进行编码。</li>
<li>eval()    计算 JavaScript 字符串，并把它作为脚本代码来执行。</li>
<li>getClass()    返回一个 JavaObject 的 JavaClass。</li>
<li>isFinite()    检查某个值是否为有穷大的数。</li>
<li>isNaN()    检查某个值是否是数字。</li>
<li>Number()    把对象的值转换为数字。</li>
<li>parseFloat()    解析一个字符串并返回一个浮点数。</li>
<li>parseInt()    解析一个字符串并返回一个整数。</li>
<li>String()    把对象的值转换为字符串。</li>
<li>unescape()    对由 escape() 编码的字符串进行解码。</li>
</ul>
<h4 id="常见事件"><a href="#常见事件" class="headerlink" title="常见事件"></a>常见事件</h4><p>事件通常与函数配合使用，这样就可以通过发生的事件来驱动函数执行。</p>
<p>下面是一个属性列表，这些属性可插入 HTML 标签来定义事件动作：</p>
<ul>
<li>onabort    图像加载被中断    </li>
<li>onblur    元素失去焦点    </li>
<li>onchange    用户改变域的内容</li>
<li>onclick    鼠标点击某个对象    </li>
<li>ondblclick    鼠标双击某个对象    </li>
<li>onerror    当加载文档或图像时发生某个错误</li>
<li>onfocus    元素获得焦点    </li>
<li>onkeydown    某个键盘的键被按下    </li>
<li>onkeypress    某个键盘的键被按下或按住</li>
<li>onkeyup    某个键盘的键被松开    </li>
<li>onload    某个页面或图像被完成加载</li>
<li>onmousedown    某个鼠标按键被按下</li>
<li>onmousemove    鼠标被移动    </li>
<li>onmouseout    鼠标从某元素移开</li>
<li>onmouseover    鼠标被移到某元素之上</li>
<li>onmouseup    某个鼠标按键被松开</li>
<li>onreset    重置按钮被点击    </li>
<li>onresize    窗口或框架被调整尺寸</li>
<li>onselect    文本被选定    </li>
<li>onsubmit    提交按钮被点击    </li>
<li>onunload    用户退出页面</li>
</ul>

      
    </div>
    
    
    

    

    
      <div>
        <div style="padding: 10px 0; margin: 20px auto; width: 90%; text-align: center;">
  <div>坚持原创技术分享，您的支持将鼓励我继续创作！</div>
  <button id="rewardButton" disable="enable" onclick="var qr = document.getElementById('QR'); if (qr.style.display === 'none') {qr.style.display='block';} else {qr.style.display='none'}">
    <span>打赏</span>
  </button>
  <div id="QR" style="display: none;">

    
      <div id="wechat" style="display: inline-block">
        <img id="wechat_qr" src="/uploads/images/reward/wechat-reward-image.jpg" alt="ethancalc 微信支付">
        <p>微信支付</p>
      </div>
    

    
      <div id="alipay" style="display: inline-block">
        <img id="alipay_qr" src="/uploads/images/reward/alipay-reward-image.jpg" alt="ethancalc 支付宝">
        <p>支付宝</p>
      </div>
    

    

  </div>
</div>

      </div>
    

    

    <footer class="post-footer">
      
        <div class="post-tags">
          
            <a href="/tags/大前端/" rel="tag"><i class="fa fa-tag"></i> 大前端</a>
          
            <a href="/tags/JavaScript/" rel="tag"><i class="fa fa-tag"></i> JavaScript</a>
          
        </div>
      

      
      
      

      
        <div class="post-nav">
          <div class="post-nav-next post-nav-item">
            
              <a href="/2016/01/09/web/CSS/CSS笔记/" rel="next" title="CSS笔记">
                <i class="fa fa-chevron-left"></i> CSS笔记
              </a>
            
          </div>

          <span class="post-nav-divider"></span>

          <div class="post-nav-prev post-nav-item">
            
              <a href="/2016/01/23/web/jQuery/jQuery笔记/" rel="prev" title="jQuery笔记">
                jQuery笔记 <i class="fa fa-chevron-right"></i>
              </a>
            
          </div>
        </div>
      

      
      
    </footer>
  </div>
  
  
  
  </article>



    <div class="post-spread">
      
        <!-- JiaThis Button BEGIN -->
<div class="jiathis_style">
<span class="jiathis_txt">分享到：</span>
<a class="jiathis_button_fav">收藏夹</a>
<a class="jiathis_button_copy">复制网址</a>
<a class="jiathis_button_email">邮件</a>
<a class="jiathis_button_weixin">微信</a>
<a class="jiathis_button_qzone">QQ空间</a>
<a class="jiathis_button_tqq">腾讯微博</a>
<a class="jiathis_button_douban">豆瓣</a>
<a class="jiathis_button_share">一键分享</a>

<a href="http://www.jiathis.com/share?uid=2140465" class="jiathis jiathis_txt jiathis_separator jtico jtico_jiathis" target="_blank">更多</a>
<a class="jiathis_counter_style"></a>
</div>
<script type="text/javascript">
var jiathis_config={
  data_track_clickback:true,
  summary:"",
  shortUrl:false,
  hideMore:false
}
</script>
<script type="text/javascript" src="http://v3.jiathis.com/code/jia.js?uid=" charset="utf-8"></script>
<!-- JiaThis Button END -->
      
    </div>
  </div>


          </div>
          


          
  <div class="comments" id="comments">
    
      <div id="SOHUCS"></div>
    
  </div>


        </div>
        
          
  
  <div class="sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>

  <aside id="sidebar" class="sidebar">
    
    <div class="sidebar-inner">

      

      
        <ul class="sidebar-nav motion-element">
          <li class="sidebar-nav-toc sidebar-nav-active" data-target="post-toc-wrap">
            文章目录
          </li>
          <li class="sidebar-nav-overview" data-target="site-overview">
            站点概览
          </li>
        </ul>
      

      <section class="site-overview sidebar-panel">
        <div class="site-author motion-element" itemprop="author" itemscope="" itemtype="http://schema.org/Person">
          
            <img class="site-author-image" itemprop="image" src="/uploads/images/head/avatar.jpg" alt="ethancalc">
          
            <p class="site-author-name" itemprop="name">ethancalc</p>
            <p class="site-description motion-element" itemprop="description">操千曲而后晓声，观千剑而后识器.</p>
        </div>

        <nav class="site-state motion-element">

          
            <div class="site-state-item site-state-posts">
            
              <a href="/archives/">
            
                <span class="site-state-item-count">35</span>
                <span class="site-state-item-name">日志</span>
              </a>
            </div>
          

          
            
            
            <div class="site-state-item site-state-categories">
              <a href="/categories/index.html">
                <span class="site-state-item-count">21</span>
                <span class="site-state-item-name">分类</span>
              </a>
            </div>
          

          
            
            
            <div class="site-state-item site-state-tags">
              <a href="/tags/index.html">
                <span class="site-state-item-count">21</span>
                <span class="site-state-item-name">标签</span>
              </a>
            </div>
          

        </nav>

        

        <div class="links-of-author motion-element">
          
            
              <span class="links-of-author-item">
                <a href="https://github.com/ethancalc" target="_blank" title="GitHub">
                  
                    <i class="fa fa-fw fa-github"></i>GitHub</a>
              </span>
            
          
        </div>

        
        

        
        
          <div class="links-of-blogroll motion-element links-of-blogroll-block">
            <div class="links-of-blogroll-title">
              <i class="fa  fa-fw fa-globe"></i>
              友情链接
            </div>
            <ul class="links-of-blogroll-list">
              
                <li class="links-of-blogroll-item">
                  <a href="https://www.google.com/" title="google" target="_blank">google</a>
                </li>
              
            </ul>
          </div>
        

        


      </section>

      
      <!--noindex-->
        <section class="post-toc-wrap motion-element sidebar-panel sidebar-panel-active">
          <div class="post-toc">

            
              
            

            
              <div class="post-toc-content"><ol class="nav"><li class="nav-item nav-level-3"><a class="nav-link" href="#文章概述"><span class="nav-number">1.</span> <span class="nav-text">文章概述</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#参考资料"><span class="nav-number">2.</span> <span class="nav-text">参考资料</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#ES的官方链接"><span class="nav-number">2.1.</span> <span class="nav-text">ES的官方链接</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#文档资料"><span class="nav-number">2.2.</span> <span class="nav-text">文档资料</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#基础语法"><span class="nav-number">3.</span> <span class="nav-text">基础语法</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#js代码"><span class="nav-number">3.1.</span> <span class="nav-text">js代码</span></a><ol class="nav-child"><li class="nav-item nav-level-5"><a class="nav-link" href="#内嵌js"><span class="nav-number">3.1.1.</span> <span class="nav-text">内嵌js</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#外联js"><span class="nav-number">3.1.2.</span> <span class="nav-text">外联js</span></a></li></ol></li><li class="nav-item nav-level-4"><a class="nav-link" href="#js调试"><span class="nav-number">3.2.</span> <span class="nav-text">js调试</span></a><ol class="nav-child"><li class="nav-item nav-level-5"><a class="nav-link" href="#chrome"><span class="nav-number">3.2.1.</span> <span class="nav-text">chrome</span></a><ol class="nav-child"><li class="nav-item nav-level-6"><a class="nav-link" href="#控制台"><span class="nav-number">3.2.1.1.</span> <span class="nav-text">控制台</span></a></li></ol></li></ol></li><li class="nav-item nav-level-4"><a class="nav-link" href="#js基本语句"><span class="nav-number">3.3.</span> <span class="nav-text">js基本语句</span></a><ol class="nav-child"><li class="nav-item nav-level-5"><a class="nav-link" href="#语句结构"><span class="nav-number">3.3.1.</span> <span class="nav-text">语句结构</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#strict模式"><span class="nav-number">3.3.2.</span> <span class="nav-text">strict模式</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#注释"><span class="nav-number">3.3.3.</span> <span class="nav-text">注释</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#语法规则"><span class="nav-number">3.3.4.</span> <span class="nav-text">语法规则</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#允许语句尾部逗号-ES8"><span class="nav-number">3.3.5.</span> <span class="nav-text">允许语句尾部逗号(ES8)</span></a></li></ol></li><li class="nav-item nav-level-4"><a class="nav-link" href="#条件判断"><span class="nav-number">3.4.</span> <span class="nav-text">条件判断</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#循环语句"><span class="nav-number">3.5.</span> <span class="nav-text">循环语句</span></a><ol class="nav-child"><li class="nav-item nav-level-5"><a class="nav-link" href="#for循环"><span class="nav-number">3.5.1.</span> <span class="nav-text">for循环</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#for…in"><span class="nav-number">3.5.2.</span> <span class="nav-text">for…in</span></a><ol class="nav-child"><li class="nav-item nav-level-6"><a class="nav-link" href="#遍历对象"><span class="nav-number">3.5.2.1.</span> <span class="nav-text">遍历对象</span></a></li><li class="nav-item nav-level-6"><a class="nav-link" href="#遍历数组"><span class="nav-number">3.5.2.2.</span> <span class="nav-text">遍历数组</span></a></li></ol></li><li class="nav-item nav-level-5"><a class="nav-link" href="#while循环"><span class="nav-number">3.5.3.</span> <span class="nav-text">while循环</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#do…while"><span class="nav-number">3.5.4.</span> <span class="nav-text">do…while</span></a></li></ol></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#数据类型"><span class="nav-number">4.</span> <span class="nav-text">数据类型</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#undefined"><span class="nav-number">4.1.</span> <span class="nav-text">undefined</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#null"><span class="nav-number">4.2.</span> <span class="nav-text">null</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#数字"><span class="nav-number">4.3.</span> <span class="nav-text">数字</span></a><ol class="nav-child"><li class="nav-item nav-level-5"><a class="nav-link" href="#概述"><span class="nav-number">4.3.1.</span> <span class="nav-text">概述</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#常用语法"><span class="nav-number">4.3.2.</span> <span class="nav-text">常用语法</span></a><ol class="nav-child"><li class="nav-item nav-level-6"><a class="nav-link" href="#常见属性"><span class="nav-number">4.3.2.1.</span> <span class="nav-text">常见属性</span></a></li><li class="nav-item nav-level-6"><a class="nav-link" href="#类型转换"><span class="nav-number">4.3.2.2.</span> <span class="nav-text">类型转换</span></a></li><li class="nav-item nav-level-6"><a class="nav-link" href="#常用方法"><span class="nav-number">4.3.2.3.</span> <span class="nav-text">常用方法</span></a></li></ol></li><li class="nav-item nav-level-5"><a class="nav-link" href="#数学运算"><span class="nav-number">4.3.3.</span> <span class="nav-text">数学运算</span></a><ol class="nav-child"><li class="nav-item nav-level-6"><a class="nav-link" href="#求幂运算符-ES7"><span class="nav-number">4.3.3.1.</span> <span class="nav-text">求幂运算符(ES7)</span></a></li></ol></li></ol></li><li class="nav-item nav-level-4"><a class="nav-link" href="#布尔值"><span class="nav-number">4.4.</span> <span class="nav-text">布尔值</span></a><ol class="nav-child"><li class="nav-item nav-level-5"><a class="nav-link" href="#布尔值运算"><span class="nav-number">4.4.1.</span> <span class="nav-text">布尔值运算</span></a></li></ol></li><li class="nav-item nav-level-4"><a class="nav-link" href="#字符串"><span class="nav-number">4.5.</span> <span class="nav-text">字符串</span></a><ol class="nav-child"><li class="nav-item nav-level-5"><a class="nav-link" href="#常见字符串"><span class="nav-number">4.5.1.</span> <span class="nav-text">常见字符串</span></a><ol class="nav-child"><li class="nav-item nav-level-6"><a class="nav-link" href="#转义字符"><span class="nav-number">4.5.1.1.</span> <span class="nav-text">转义字符</span></a></li><li class="nav-item nav-level-6"><a class="nav-link" href="#多行字符串"><span class="nav-number">4.5.1.2.</span> <span class="nav-text">多行字符串</span></a></li><li class="nav-item nav-level-6"><a class="nav-link" href="#字符串模板"><span class="nav-number">4.5.1.3.</span> <span class="nav-text">字符串模板</span></a></li></ol></li><li class="nav-item nav-level-5"><a class="nav-link" href="#常用操作"><span class="nav-number">4.5.2.</span> <span class="nav-text">常用操作</span></a><ol class="nav-child"><li class="nav-item nav-level-6"><a class="nav-link" href="#访问字符串"><span class="nav-number">4.5.2.1.</span> <span class="nav-text">访问字符串</span></a></li><li class="nav-item nav-level-6"><a class="nav-link" href="#大小写转换"><span class="nav-number">4.5.2.2.</span> <span class="nav-text">大小写转换</span></a></li><li class="nav-item nav-level-6"><a class="nav-link" href="#索引"><span class="nav-number">4.5.2.3.</span> <span class="nav-text">索引</span></a></li><li class="nav-item nav-level-6"><a class="nav-link" href="#真实长度"><span class="nav-number">4.5.2.4.</span> <span class="nav-text">真实长度</span></a></li><li class="nav-item nav-level-6"><a class="nav-link" href="#截取"><span class="nav-number">4.5.2.5.</span> <span class="nav-text">截取</span></a></li><li class="nav-item nav-level-6"><a class="nav-link" href="#拷贝"><span class="nav-number">4.5.2.6.</span> <span class="nav-text">拷贝</span></a></li><li class="nav-item nav-level-6"><a class="nav-link" href="#字符串补全长度-ES8"><span class="nav-number">4.5.2.7.</span> <span class="nav-text">字符串补全长度(ES8)</span></a></li><li class="nav-item nav-level-6"><a class="nav-link" href="#raw转义和拼接"><span class="nav-number">4.5.2.8.</span> <span class="nav-text">raw转义和拼接</span></a></li></ol></li><li class="nav-item nav-level-5"><a class="nav-link" href="#特点"><span class="nav-number">4.5.3.</span> <span class="nav-text">特点</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#常用属性"><span class="nav-number">4.5.4.</span> <span class="nav-text">常用属性</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#常用方法-1"><span class="nav-number">4.5.5.</span> <span class="nav-text">常用方法</span></a></li></ol></li><li class="nav-item nav-level-4"><a class="nav-link" href="#数组"><span class="nav-number">4.6.</span> <span class="nav-text">数组</span></a><ol class="nav-child"><li class="nav-item nav-level-5"><a class="nav-link" href="#概述-1"><span class="nav-number">4.6.1.</span> <span class="nav-text">概述</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#创建数组"><span class="nav-number">4.6.2.</span> <span class="nav-text">创建数组</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#操作数组"><span class="nav-number">4.6.3.</span> <span class="nav-text">操作数组</span></a><ol class="nav-child"><li class="nav-item nav-level-6"><a class="nav-link" href="#索引-1"><span class="nav-number">4.6.3.1.</span> <span class="nav-text">索引</span></a></li><li class="nav-item nav-level-6"><a class="nav-link" href="#长度"><span class="nav-number">4.6.3.2.</span> <span class="nav-text">长度</span></a></li><li class="nav-item nav-level-6"><a class="nav-link" href="#截取-1"><span class="nav-number">4.6.3.3.</span> <span class="nav-text">截取</span></a></li><li class="nav-item nav-level-6"><a class="nav-link" href="#增删元素"><span class="nav-number">4.6.3.4.</span> <span class="nav-text">增删元素</span></a></li><li class="nav-item nav-level-6"><a class="nav-link" href="#排序"><span class="nav-number">4.6.3.5.</span> <span class="nav-text">排序</span></a></li><li class="nav-item nav-level-6"><a class="nav-link" href="#反转"><span class="nav-number">4.6.3.6.</span> <span class="nav-text">反转</span></a></li><li class="nav-item nav-level-6"><a class="nav-link" href="#连接字符串"><span class="nav-number">4.6.3.7.</span> <span class="nav-text">连接字符串</span></a></li><li class="nav-item nav-level-6"><a class="nav-link" href="#连接子元素"><span class="nav-number">4.6.3.8.</span> <span class="nav-text">连接子元素</span></a></li></ol></li><li class="nav-item nav-level-5"><a class="nav-link" href="#常用属性-1"><span class="nav-number">4.6.4.</span> <span class="nav-text">常用属性</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#常用方法-2"><span class="nav-number">4.6.5.</span> <span class="nav-text">常用方法</span></a><ol class="nav-child"><li class="nav-item nav-level-6"><a class="nav-link" href="#concat"><span class="nav-number">4.6.5.1.</span> <span class="nav-text">concat()</span></a></li><li class="nav-item nav-level-6"><a class="nav-link" href="#join"><span class="nav-number">4.6.5.2.</span> <span class="nav-text">join()</span></a></li><li class="nav-item nav-level-6"><a class="nav-link" href="#pop"><span class="nav-number">4.6.5.3.</span> <span class="nav-text">pop()</span></a></li><li class="nav-item nav-level-6"><a class="nav-link" href="#push"><span class="nav-number">4.6.5.4.</span> <span class="nav-text">push()</span></a></li><li class="nav-item nav-level-6"><a class="nav-link" href="#reverse"><span class="nav-number">4.6.5.5.</span> <span class="nav-text">reverse()</span></a></li><li class="nav-item nav-level-6"><a class="nav-link" href="#shift"><span class="nav-number">4.6.5.6.</span> <span class="nav-text">shift()</span></a></li><li class="nav-item nav-level-6"><a class="nav-link" href="#slice"><span class="nav-number">4.6.5.7.</span> <span class="nav-text">slice()</span></a></li><li class="nav-item nav-level-6"><a class="nav-link" href="#sort"><span class="nav-number">4.6.5.8.</span> <span class="nav-text">sort()</span></a></li><li class="nav-item nav-level-6"><a class="nav-link" href="#splice"><span class="nav-number">4.6.5.9.</span> <span class="nav-text">splice()</span></a></li><li class="nav-item nav-level-6"><a class="nav-link" href="#toSource"><span class="nav-number">4.6.5.10.</span> <span class="nav-text">toSource()</span></a></li><li class="nav-item nav-level-6"><a class="nav-link" href="#toString-NaN"><span class="nav-number">4.6.5.11.</span> <span class="nav-text">toString()</span></a></li><li class="nav-item nav-level-6"><a class="nav-link" href="#toLocaleString-NaN"><span class="nav-number">4.6.5.12.</span> <span class="nav-text">toLocaleString()</span></a></li><li class="nav-item nav-level-6"><a class="nav-link" href="#unshift"><span class="nav-number">4.6.5.13.</span> <span class="nav-text">unshift()</span></a></li><li class="nav-item nav-level-6"><a class="nav-link" href="#valueOf-NaN"><span class="nav-number">4.6.5.14.</span> <span class="nav-text">valueOf()</span></a></li><li class="nav-item nav-level-6"><a class="nav-link" href="#索引-2"><span class="nav-number">4.6.5.15.</span> <span class="nav-text">索引</span></a></li><li class="nav-item nav-level-6"><a class="nav-link" href="#包含-ES7"><span class="nav-number">4.6.5.16.</span> <span class="nav-text">包含(ES7)</span></a></li></ol></li></ol></li><li class="nav-item nav-level-4"><a class="nav-link" href="#对象"><span class="nav-number">4.7.</span> <span class="nav-text">对象</span></a><ol class="nav-child"><li class="nav-item nav-level-5"><a class="nav-link" href="#概念与访问"><span class="nav-number">4.7.1.</span> <span class="nav-text">概念与访问</span></a><ol class="nav-child"><li class="nav-item nav-level-6"><a class="nav-link" href="#示例："><span class="nav-number">4.7.1.1.</span> <span class="nav-text">示例：</span></a></li></ol></li><li class="nav-item nav-level-5"><a class="nav-link" href="#对象的方法"><span class="nav-number">4.7.2.</span> <span class="nav-text">对象的方法</span></a><ol class="nav-child"><li class="nav-item nav-level-6"><a class="nav-link" href="#增删属性"><span class="nav-number">4.7.2.1.</span> <span class="nav-text">增删属性</span></a></li><li class="nav-item nav-level-6"><a class="nav-link" href="#包含"><span class="nav-number">4.7.2.2.</span> <span class="nav-text">包含</span></a></li></ol></li></ol></li><li class="nav-item nav-level-4"><a class="nav-link" href="#Map"><span class="nav-number">4.8.</span> <span class="nav-text">Map</span></a><ol class="nav-child"><li class="nav-item nav-level-5"><a class="nav-link" href="#使用方法"><span class="nav-number">4.8.1.</span> <span class="nav-text">使用方法</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#常用操作-1"><span class="nav-number">4.8.2.</span> <span class="nav-text">常用操作</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#遍历"><span class="nav-number">4.8.3.</span> <span class="nav-text">遍历</span></a></li></ol></li><li class="nav-item nav-level-4"><a class="nav-link" href="#Set"><span class="nav-number">4.9.</span> <span class="nav-text">Set</span></a><ol class="nav-child"><li class="nav-item nav-level-5"><a class="nav-link" href="#简介"><span class="nav-number">4.9.1.</span> <span class="nav-text">简介</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#常用操作-2"><span class="nav-number">4.9.2.</span> <span class="nav-text">常用操作</span></a></li></ol></li><li class="nav-item nav-level-4"><a class="nav-link" href="#iterable"><span class="nav-number">4.10.</span> <span class="nav-text">iterable</span></a><ol class="nav-child"><li class="nav-item nav-level-5"><a class="nav-link" href="#概述-2"><span class="nav-number">4.10.1.</span> <span class="nav-text">概述</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#遍历元素"><span class="nav-number">4.10.2.</span> <span class="nav-text">遍历元素</span></a><ol class="nav-child"><li class="nav-item nav-level-6"><a class="nav-link" href="#for…of"><span class="nav-number">4.10.2.1.</span> <span class="nav-text">for…of</span></a></li><li class="nav-item nav-level-6"><a class="nav-link" href="#forEach"><span class="nav-number">4.10.2.2.</span> <span class="nav-text">forEach</span></a></li></ol></li></ol></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#变量"><span class="nav-number">5.</span> <span class="nav-text">变量</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#var变量"><span class="nav-number">5.1.</span> <span class="nav-text">var变量</span></a><ol class="nav-child"><li class="nav-item nav-level-5"><a class="nav-link" href="#变量的定义："><span class="nav-number">5.1.1.</span> <span class="nav-text">变量的定义：</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#全局变量"><span class="nav-number">5.1.2.</span> <span class="nav-text">全局变量</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#变量注意事项"><span class="nav-number">5.1.3.</span> <span class="nav-text">变量注意事项</span></a></li></ol></li><li class="nav-item nav-level-4"><a class="nav-link" href="#ES6变量"><span class="nav-number">5.2.</span> <span class="nav-text">ES6变量</span></a><ol class="nav-child"><li class="nav-item nav-level-5"><a class="nav-link" href="#let"><span class="nav-number">5.2.1.</span> <span class="nav-text">let</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#常量"><span class="nav-number">5.2.2.</span> <span class="nav-text">常量</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#const"><span class="nav-number">5.2.3.</span> <span class="nav-text">const</span></a></li></ol></li><li class="nav-item nav-level-4"><a class="nav-link" href="#解构赋值"><span class="nav-number">5.3.</span> <span class="nav-text">解构赋值</span></a><ol class="nav-child"><li class="nav-item nav-level-5"><a class="nav-link" href="#概念"><span class="nav-number">5.3.1.</span> <span class="nav-text">概念</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#不完全解构"><span class="nav-number">5.3.2.</span> <span class="nav-text">不完全解构</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#解构目标类型"><span class="nav-number">5.3.3.</span> <span class="nav-text">解构目标类型</span></a><ol class="nav-child"><li class="nav-item nav-level-6"><a class="nav-link" href="#数组-1"><span class="nav-number">5.3.3.1.</span> <span class="nav-text">数组</span></a></li><li class="nav-item nav-level-6"><a class="nav-link" href="#字符串-1"><span class="nav-number">5.3.3.2.</span> <span class="nav-text">字符串</span></a></li><li class="nav-item nav-level-6"><a class="nav-link" href="#Set-1"><span class="nav-number">5.3.3.3.</span> <span class="nav-text">Set</span></a></li><li class="nav-item nav-level-6"><a class="nav-link" href="#对象-1"><span class="nav-number">5.3.3.4.</span> <span class="nav-text">对象</span></a></li><li class="nav-item nav-level-6"><a class="nav-link" href="#数值和布尔值"><span class="nav-number">5.3.3.5.</span> <span class="nav-text">数值和布尔值</span></a></li><li class="nav-item nav-level-6"><a class="nav-link" href="#函数"><span class="nav-number">5.3.3.6.</span> <span class="nav-text">函数</span></a></li><li class="nav-item nav-level-6"><a class="nav-link" href="#Iterator"><span class="nav-number">5.3.3.7.</span> <span class="nav-text">Iterator</span></a></li><li class="nav-item nav-level-6"><a class="nav-link" href="#Generator函数"><span class="nav-number">5.3.3.8.</span> <span class="nav-text">Generator函数</span></a></li></ol></li><li class="nav-item nav-level-5"><a class="nav-link" href="#用途"><span class="nav-number">5.3.4.</span> <span class="nav-text">用途</span></a><ol class="nav-child"><li class="nav-item nav-level-6"><a class="nav-link" href="#交换变量的值"><span class="nav-number">5.3.4.1.</span> <span class="nav-text">交换变量的值</span></a></li><li class="nav-item nav-level-6"><a class="nav-link" href="#从函数返回多个值"><span class="nav-number">5.3.4.2.</span> <span class="nav-text">从函数返回多个值</span></a></li><li class="nav-item nav-level-6"><a class="nav-link" href="#函数参数的定义"><span class="nav-number">5.3.4.3.</span> <span class="nav-text">函数参数的定义</span></a></li><li class="nav-item nav-level-6"><a class="nav-link" href="#提取JSON数据"><span class="nav-number">5.3.4.4.</span> <span class="nav-text">提取JSON数据</span></a></li><li class="nav-item nav-level-6"><a class="nav-link" href="#函数参数的默认值"><span class="nav-number">5.3.4.5.</span> <span class="nav-text">函数参数的默认值</span></a></li><li class="nav-item nav-level-6"><a class="nav-link" href="#遍历Map结构"><span class="nav-number">5.3.4.6.</span> <span class="nav-text">遍历Map结构</span></a></li><li class="nav-item nav-level-6"><a class="nav-link" href="#取出模板库成员"><span class="nav-number">5.3.4.7.</span> <span class="nav-text">取出模板库成员</span></a></li></ol></li></ol></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#函数-1"><span class="nav-number">6.</span> <span class="nav-text">函数</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#函数语法"><span class="nav-number">6.1.</span> <span class="nav-text">函数语法</span></a><ol class="nav-child"><li class="nav-item nav-level-5"><a class="nav-link" href="#普通函数"><span class="nav-number">6.1.1.</span> <span class="nav-text">普通函数</span></a><ol class="nav-child"><li class="nav-item nav-level-6"><a class="nav-link" href="#概述-3"><span class="nav-number">6.1.1.1.</span> <span class="nav-text">概述</span></a></li></ol></li><li class="nav-item nav-level-5"><a class="nav-link" href="#匿名函数"><span class="nav-number">6.1.2.</span> <span class="nav-text">匿名函数</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#自执行函数"><span class="nav-number">6.1.3.</span> <span class="nav-text">自执行函数</span></a><ol class="nav-child"><li class="nav-item nav-level-6"><a class="nav-link" href="#写法"><span class="nav-number">6.1.3.1.</span> <span class="nav-text">写法</span></a></li><li class="nav-item nav-level-6"><a class="nav-link" href="#示例"><span class="nav-number">6.1.3.2.</span> <span class="nav-text">示例</span></a></li></ol></li><li class="nav-item nav-level-5"><a class="nav-link" href="#函数参数检查"><span class="nav-number">6.1.4.</span> <span class="nav-text">函数参数检查</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#全参关键字"><span class="nav-number">6.1.5.</span> <span class="nav-text">全参关键字</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#多余参数"><span class="nav-number">6.1.6.</span> <span class="nav-text">多余参数</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#函数返回多个值"><span class="nav-number">6.1.7.</span> <span class="nav-text">函数返回多个值</span></a></li></ol></li><li class="nav-item nav-level-4"><a class="nav-link" href="#作用域"><span class="nav-number">6.2.</span> <span class="nav-text">作用域</span></a><ol class="nav-child"><li class="nav-item nav-level-5"><a class="nav-link" href="#全局作用域"><span class="nav-number">6.2.1.</span> <span class="nav-text">全局作用域</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#名字空间"><span class="nav-number">6.2.2.</span> <span class="nav-text">名字空间</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#局部作用域"><span class="nav-number">6.2.3.</span> <span class="nav-text">局部作用域</span></a></li></ol></li><li class="nav-item nav-level-4"><a class="nav-link" href="#方法"><span class="nav-number">6.3.</span> <span class="nav-text">方法</span></a><ol class="nav-child"><li class="nav-item nav-level-5"><a class="nav-link" href="#概念-1"><span class="nav-number">6.3.1.</span> <span class="nav-text">概念</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#this关键字"><span class="nav-number">6.3.2.</span> <span class="nav-text">this关键字</span></a><ol class="nav-child"><li class="nav-item nav-level-6"><a class="nav-link" href="#对象内部方法使用"><span class="nav-number">6.3.2.1.</span> <span class="nav-text">对象内部方法使用</span></a></li><li class="nav-item nav-level-6"><a class="nav-link" href="#对象外部函数使用"><span class="nav-number">6.3.2.2.</span> <span class="nav-text">对象外部函数使用</span></a></li></ol></li></ol></li><li class="nav-item nav-level-4"><a class="nav-link" href="#高阶函数"><span class="nav-number">6.4.</span> <span class="nav-text">高阶函数</span></a><ol class="nav-child"><li class="nav-item nav-level-5"><a class="nav-link" href="#定义"><span class="nav-number">6.4.1.</span> <span class="nav-text">定义</span></a><ol class="nav-child"><li class="nav-item nav-level-6"><a class="nav-link" href="#简单的高阶函数"><span class="nav-number">6.4.1.1.</span> <span class="nav-text">简单的高阶函数</span></a></li></ol></li><li class="nav-item nav-level-5"><a class="nav-link" href="#map"><span class="nav-number">6.4.2.</span> <span class="nav-text">map</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#reduce"><span class="nav-number">6.4.3.</span> <span class="nav-text">reduce</span></a><ol class="nav-child"><li class="nav-item nav-level-6"><a class="nav-link" href="#reduce效果公式"><span class="nav-number">6.4.3.1.</span> <span class="nav-text">reduce效果公式</span></a></li><li class="nav-item nav-level-6"><a class="nav-link" href="#语法"><span class="nav-number">6.4.3.2.</span> <span class="nav-text">语法</span></a></li><li class="nav-item nav-level-6"><a class="nav-link" href="#示例-1"><span class="nav-number">6.4.3.3.</span> <span class="nav-text">示例</span></a></li></ol></li><li class="nav-item nav-level-5"><a class="nav-link" href="#filter"><span class="nav-number">6.4.4.</span> <span class="nav-text">filter</span></a><ol class="nav-child"><li class="nav-item nav-level-6"><a class="nav-link" href="#概念-2"><span class="nav-number">6.4.4.1.</span> <span class="nav-text">概念</span></a></li><li class="nav-item nav-level-6"><a class="nav-link" href="#示例-2"><span class="nav-number">6.4.4.2.</span> <span class="nav-text">示例</span></a></li></ol></li><li class="nav-item nav-level-5"><a class="nav-link" href="#sort-1"><span class="nav-number">6.4.5.</span> <span class="nav-text">sort</span></a></li></ol></li><li class="nav-item nav-level-4"><a class="nav-link" href="#闭包"><span class="nav-number">6.5.</span> <span class="nav-text">闭包</span></a><ol class="nav-child"><li class="nav-item nav-level-5"><a class="nav-link" href="#概念-3"><span class="nav-number">6.5.1.</span> <span class="nav-text">概念</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#实例"><span class="nav-number">6.5.2.</span> <span class="nav-text">实例</span></a></li></ol></li><li class="nav-item nav-level-4"><a class="nav-link" href="#箭头函数"><span class="nav-number">6.6.</span> <span class="nav-text">箭头函数</span></a><ol class="nav-child"><li class="nav-item nav-level-5"><a class="nav-link" href="#概述-4"><span class="nav-number">6.6.1.</span> <span class="nav-text">概述</span></a><ol class="nav-child"><li class="nav-item nav-level-6"><a class="nav-link" href="#特点-1"><span class="nav-number">6.6.1.1.</span> <span class="nav-text">特点</span></a></li><li class="nav-item nav-level-6"><a class="nav-link" href="#示例-3"><span class="nav-number">6.6.1.2.</span> <span class="nav-text">示例</span></a></li></ol></li><li class="nav-item nav-level-5"><a class="nav-link" href="#this"><span class="nav-number">6.6.2.</span> <span class="nav-text">this</span></a></li></ol></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#内置对象"><span class="nav-number">7.</span> <span class="nav-text">内置对象</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#Object"><span class="nav-number">7.1.</span> <span class="nav-text">Object</span></a><ol class="nav-child"><li class="nav-item nav-level-5"><a class="nav-link" href="#获取属性名"><span class="nav-number">7.1.1.</span> <span class="nav-text">获取属性名</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#获取属性值"><span class="nav-number">7.1.2.</span> <span class="nav-text">获取属性值</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#对象转二维数组"><span class="nav-number">7.1.3.</span> <span class="nav-text">对象转二维数组</span></a><ol class="nav-child"><li class="nav-item nav-level-6"><a class="nav-link" href="#使用场景"><span class="nav-number">7.1.3.1.</span> <span class="nav-text">使用场景</span></a></li></ol></li><li class="nav-item nav-level-5"><a class="nav-link" href="#浅拷贝"><span class="nav-number">7.1.4.</span> <span class="nav-text">浅拷贝</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#属性和属性描述"><span class="nav-number">7.1.5.</span> <span class="nav-text">属性和属性描述</span></a><ol class="nav-child"><li class="nav-item nav-level-6"><a class="nav-link" href="#语法-1"><span class="nav-number">7.1.5.1.</span> <span class="nav-text">语法</span></a></li><li class="nav-item nav-level-6"><a class="nav-link" href="#使用实例"><span class="nav-number">7.1.5.2.</span> <span class="nav-text">使用实例</span></a></li><li class="nav-item nav-level-6"><a class="nav-link" href="#使用场景-拷贝"><span class="nav-number">7.1.5.3.</span> <span class="nav-text">使用场景-拷贝</span></a></li></ol></li><li class="nav-item nav-level-5"><a class="nav-link" href="#冻结对象"><span class="nav-number">7.1.6.</span> <span class="nav-text">冻结对象</span></a></li></ol></li><li class="nav-item nav-level-4"><a class="nav-link" href="#对象类型"><span class="nav-number">7.2.</span> <span class="nav-text">对象类型</span></a><ol class="nav-child"><li class="nav-item nav-level-5"><a class="nav-link" href="#基础对象类型"><span class="nav-number">7.2.1.</span> <span class="nav-text">基础对象类型</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#简单类型转换"><span class="nav-number">7.2.2.</span> <span class="nav-text">简单类型转换</span></a><ol class="nav-child"><li class="nav-item nav-level-6"><a class="nav-link" href="#toString"><span class="nav-number">7.2.2.1.</span> <span class="nav-text">toString()</span></a></li><li class="nav-item nav-level-6"><a class="nav-link" href="#转换成数字"><span class="nav-number">7.2.2.2.</span> <span class="nav-text">转换成数字</span></a></li></ol></li><li class="nav-item nav-level-5"><a class="nav-link" href="#强制类型转换"><span class="nav-number">7.2.3.</span> <span class="nav-text">强制类型转换</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#包装对象"><span class="nav-number">7.2.4.</span> <span class="nav-text">包装对象</span></a><ol class="nav-child"><li class="nav-item nav-level-6"><a class="nav-link" href="#概念-4"><span class="nav-number">7.2.4.1.</span> <span class="nav-text">概念</span></a></li><li class="nav-item nav-level-6"><a class="nav-link" href="#常见的包装对象"><span class="nav-number">7.2.4.2.</span> <span class="nav-text">常见的包装对象</span></a></li><li class="nav-item nav-level-6"><a class="nav-link" href="#要点"><span class="nav-number">7.2.4.3.</span> <span class="nav-text">要点</span></a></li></ol></li></ol></li><li class="nav-item nav-level-4"><a class="nav-link" href="#Math对象"><span class="nav-number">7.3.</span> <span class="nav-text">Math对象</span></a><ol class="nav-child"><li class="nav-item nav-level-5"><a class="nav-link" href="#Math对象属性"><span class="nav-number">7.3.1.</span> <span class="nav-text">Math对象属性</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#Math对象方法"><span class="nav-number">7.3.2.</span> <span class="nav-text">Math对象方法</span></a></li></ol></li><li class="nav-item nav-level-4"><a class="nav-link" href="#日期和时间"><span class="nav-number">7.4.</span> <span class="nav-text">日期和时间</span></a><ol class="nav-child"><li class="nav-item nav-level-5"><a class="nav-link" href="#Date对象"><span class="nav-number">7.4.1.</span> <span class="nav-text">Date对象</span></a><ol class="nav-child"><li class="nav-item nav-level-6"><a class="nav-link" href="#创建Date对象"><span class="nav-number">7.4.1.1.</span> <span class="nav-text">创建Date对象</span></a></li></ol></li><li class="nav-item nav-level-5"><a class="nav-link" href="#时区"><span class="nav-number">7.4.2.</span> <span class="nav-text">时区</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#当前时间"><span class="nav-number">7.4.3.</span> <span class="nav-text">当前时间</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#Date对象属性"><span class="nav-number">7.4.4.</span> <span class="nav-text">Date对象属性</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#Date对象方法"><span class="nav-number">7.4.5.</span> <span class="nav-text">Date对象方法</span></a></li></ol></li><li class="nav-item nav-level-4"><a class="nav-link" href="#正则表达式"><span class="nav-number">7.5.</span> <span class="nav-text">正则表达式</span></a><ol class="nav-child"><li class="nav-item nav-level-5"><a class="nav-link" href="#创建正则表达式"><span class="nav-number">7.5.1.</span> <span class="nav-text">创建正则表达式</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#操作正则"><span class="nav-number">7.5.2.</span> <span class="nav-text">操作正则</span></a><ol class="nav-child"><li class="nav-item nav-level-6"><a class="nav-link" href="#正则匹配"><span class="nav-number">7.5.2.1.</span> <span class="nav-text">正则匹配</span></a></li><li class="nav-item nav-level-6"><a class="nav-link" href="#切分字符串"><span class="nav-number">7.5.2.2.</span> <span class="nav-text">切分字符串</span></a></li><li class="nav-item nav-level-6"><a class="nav-link" href="#分组匹配"><span class="nav-number">7.5.2.3.</span> <span class="nav-text">分组匹配</span></a></li><li class="nav-item nav-level-6"><a class="nav-link" href="#贪婪匹配"><span class="nav-number">7.5.2.4.</span> <span class="nav-text">贪婪匹配</span></a></li><li class="nav-item nav-level-6"><a class="nav-link" href="#全局搜索匹配"><span class="nav-number">7.5.2.5.</span> <span class="nav-text">全局搜索匹配</span></a></li></ol></li></ol></li><li class="nav-item nav-level-4"><a class="nav-link" href="#Json"><span class="nav-number">7.6.</span> <span class="nav-text">Json</span></a><ol class="nav-child"><li class="nav-item nav-level-5"><a class="nav-link" href="#数据类型："><span class="nav-number">7.6.1.</span> <span class="nav-text">数据类型：</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#序列化"><span class="nav-number">7.6.2.</span> <span class="nav-text">序列化</span></a><ol class="nav-child"><li class="nav-item nav-level-6"><a class="nav-link" href="#示例-4"><span class="nav-number">7.6.2.1.</span> <span class="nav-text">示例</span></a></li></ol></li><li class="nav-item nav-level-5"><a class="nav-link" href="#反序列化"><span class="nav-number">7.6.3.</span> <span class="nav-text">反序列化</span></a><ol class="nav-child"><li class="nav-item nav-level-6"><a class="nav-link" href="#示例-5"><span class="nav-number">7.6.3.1.</span> <span class="nav-text">示例</span></a></li></ol></li></ol></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#面向对象编程"><span class="nav-number">8.</span> <span class="nav-text">面向对象编程</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#对象原型链"><span class="nav-number">8.1.</span> <span class="nav-text">对象原型链</span></a><ol class="nav-child"><li class="nav-item nav-level-5"><a class="nav-link" href="#原型对象"><span class="nav-number">8.1.1.</span> <span class="nav-text">原型对象</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#查找对象属性的原型链"><span class="nav-number">8.1.2.</span> <span class="nav-text">查找对象属性的原型链</span></a><ol class="nav-child"><li class="nav-item nav-level-6"><a class="nav-link" href="#概述-5"><span class="nav-number">8.1.2.1.</span> <span class="nav-text">概述</span></a></li><li class="nav-item nav-level-6"><a class="nav-link" href="#实例-1"><span class="nav-number">8.1.2.2.</span> <span class="nav-text">实例</span></a></li></ol></li></ol></li><li class="nav-item nav-level-4"><a class="nav-link" href="#创建对象"><span class="nav-number">8.2.</span> <span class="nav-text">创建对象</span></a><ol class="nav-child"><li class="nav-item nav-level-5"><a class="nav-link" href="#创建方式"><span class="nav-number">8.2.1.</span> <span class="nav-text">创建方式</span></a></li></ol></li><li class="nav-item nav-level-4"><a class="nav-link" href="#构造函数"><span class="nav-number">8.3.</span> <span class="nav-text">构造函数</span></a><ol class="nav-child"><li class="nav-item nav-level-5"><a class="nav-link" href="#创建对象-1"><span class="nav-number">8.3.1.</span> <span class="nav-text">创建对象</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#创建对象注意"><span class="nav-number">8.3.2.</span> <span class="nav-text">创建对象注意</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#设置属性默认值"><span class="nav-number">8.3.3.</span> <span class="nav-text">设置属性默认值</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#对象实例类型判断"><span class="nav-number">8.3.4.</span> <span class="nav-text">对象实例类型判断</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#封装创建构造函数对象"><span class="nav-number">8.3.5.</span> <span class="nav-text">封装创建构造函数对象</span></a></li></ol></li><li class="nav-item nav-level-4"><a class="nav-link" href="#原型继承"><span class="nav-number">8.4.</span> <span class="nav-text">原型继承</span></a><ol class="nav-child"><li class="nav-item nav-level-5"><a class="nav-link" href="#创建方式-1"><span class="nav-number">8.4.1.</span> <span class="nav-text">创建方式</span></a><ol class="nav-child"><li class="nav-item nav-level-6"><a class="nav-link" href="#proto"><span class="nav-number">8.4.1.1.</span> <span class="nav-text">__proto__</span></a></li><li class="nav-item nav-level-6"><a class="nav-link" href="#Object-create"><span class="nav-number">8.4.1.2.</span> <span class="nav-text">Object.create()</span></a></li><li class="nav-item nav-level-6"><a class="nav-link" href="#中间对象"><span class="nav-number">8.4.1.3.</span> <span class="nav-text">中间对象</span></a></li></ol></li></ol></li><li class="nav-item nav-level-4"><a class="nav-link" href="#类"><span class="nav-number">8.5.</span> <span class="nav-text">类</span></a><ol class="nav-child"><li class="nav-item nav-level-5"><a class="nav-link" href="#定义-1"><span class="nav-number">8.5.1.</span> <span class="nav-text">定义</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#继承"><span class="nav-number">8.5.2.</span> <span class="nav-text">继承</span></a></li></ol></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#模块"><span class="nav-number">9.</span> <span class="nav-text">模块</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#导入导出"><span class="nav-number">9.1.</span> <span class="nav-text">导入导出</span></a><ol class="nav-child"><li class="nav-item nav-level-5"><a class="nav-link" href="#示例-6"><span class="nav-number">9.1.1.</span> <span class="nav-text">示例</span></a></li></ol></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#浏览器"><span class="nav-number">10.</span> <span class="nav-text">浏览器</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#主流浏览器"><span class="nav-number">10.1.</span> <span class="nav-text">主流浏览器</span></a><ol class="nav-child"><li class="nav-item nav-level-5"><a class="nav-link" href="#浏览器差异"><span class="nav-number">10.1.1.</span> <span class="nav-text">浏览器差异</span></a></li></ol></li><li class="nav-item nav-level-4"><a class="nav-link" href="#浏览器对象"><span class="nav-number">10.2.</span> <span class="nav-text">浏览器对象</span></a><ol class="nav-child"><li class="nav-item nav-level-5"><a class="nav-link" href="#浏览器尺寸属性图示"><span class="nav-number">10.2.1.</span> <span class="nav-text">浏览器尺寸属性图示</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#净宽高"><span class="nav-number">10.2.2.</span> <span class="nav-text">净宽高</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#全宽高"><span class="nav-number">10.2.3.</span> <span class="nav-text">全宽高</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#浏览器的信息"><span class="nav-number">10.2.4.</span> <span class="nav-text">浏览器的信息</span></a><ol class="nav-child"><li class="nav-item nav-level-6"><a class="nav-link" href="#根据浏览器获取信息"><span class="nav-number">10.2.4.1.</span> <span class="nav-text">根据浏览器获取信息</span></a></li></ol></li><li class="nav-item nav-level-5"><a class="nav-link" href="#屏幕信息"><span class="nav-number">10.2.5.</span> <span class="nav-text">屏幕信息</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#URL信息"><span class="nav-number">10.2.6.</span> <span class="nav-text">URL信息</span></a><ol class="nav-child"><li class="nav-item nav-level-6"><a class="nav-link" href="#URL信息-1"><span class="nav-number">10.2.6.1.</span> <span class="nav-text">URL信息</span></a></li><li class="nav-item nav-level-6"><a class="nav-link" href="#加载URL"><span class="nav-number">10.2.6.2.</span> <span class="nav-text">加载URL</span></a></li></ol></li><li class="nav-item nav-level-5"><a class="nav-link" href="#history"><span class="nav-number">10.2.7.</span> <span class="nav-text">history</span></a><ol class="nav-child"><li class="nav-item nav-level-6"><a class="nav-link" href="#history的方法"><span class="nav-number">10.2.7.1.</span> <span class="nav-text">history的方法</span></a></li></ol></li><li class="nav-item nav-level-5"><a class="nav-link" href="#window相关方法"><span class="nav-number">10.2.8.</span> <span class="nav-text">window相关方法</span></a><ol class="nav-child"><li class="nav-item nav-level-6"><a class="nav-link" href="#open"><span class="nav-number">10.2.8.1.</span> <span class="nav-text">open</span></a></li></ol></li></ol></li><li class="nav-item nav-level-4"><a class="nav-link" href="#cookie"><span class="nav-number">10.3.</span> <span class="nav-text">cookie</span></a><ol class="nav-child"><li class="nav-item nav-level-5"><a class="nav-link" href="#概念-5"><span class="nav-number">10.3.1.</span> <span class="nav-text">概念</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#cookie信息"><span class="nav-number">10.3.2.</span> <span class="nav-text">cookie信息</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#设置cookie"><span class="nav-number">10.3.3.</span> <span class="nav-text">设置cookie</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#获取cookis"><span class="nav-number">10.3.4.</span> <span class="nav-text">获取cookis</span></a></li></ol></li><li class="nav-item nav-level-4"><a class="nav-link" href="#session"><span class="nav-number">10.4.</span> <span class="nav-text">session</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#消息框"><span class="nav-number">10.5.</span> <span class="nav-text">消息框</span></a><ol class="nav-child"><li class="nav-item nav-level-5"><a class="nav-link" href="#警告框"><span class="nav-number">10.5.1.</span> <span class="nav-text">警告框</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#确认框"><span class="nav-number">10.5.2.</span> <span class="nav-text">确认框</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#提示框"><span class="nav-number">10.5.3.</span> <span class="nav-text">提示框</span></a></li></ol></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#HTTP"><span class="nav-number">11.</span> <span class="nav-text">HTTP</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#路由"><span class="nav-number">11.1.</span> <span class="nav-text">路由</span></a><ol class="nav-child"><li class="nav-item nav-level-5"><a class="nav-link" href="#路由的种类"><span class="nav-number">11.1.1.</span> <span class="nav-text">路由的种类</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#页面路由"><span class="nav-number">11.1.2.</span> <span class="nav-text">页面路由</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#hash路由"><span class="nav-number">11.1.3.</span> <span class="nav-text">hash路由</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#H5路由"><span class="nav-number">11.1.4.</span> <span class="nav-text">H5路由</span></a></li></ol></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#DOM"><span class="nav-number">12.</span> <span class="nav-text">DOM</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#document"><span class="nav-number">12.1.</span> <span class="nav-text">document</span></a><ol class="nav-child"><li class="nav-item nav-level-5"><a class="nav-link" href="#概述-6"><span class="nav-number">12.1.1.</span> <span class="nav-text">概述</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#页面属性"><span class="nav-number">12.1.2.</span> <span class="nav-text">页面属性</span></a><ol class="nav-child"><li class="nav-item nav-level-6"><a class="nav-link" href="#标题"><span class="nav-number">12.1.2.1.</span> <span class="nav-text">标题</span></a></li><li class="nav-item nav-level-6"><a class="nav-link" href="#cookies"><span class="nav-number">12.1.2.2.</span> <span class="nav-text">cookies</span></a></li><li class="nav-item nav-level-6"><a class="nav-link" href="#body属性"><span class="nav-number">12.1.2.3.</span> <span class="nav-text">body属性</span></a></li><li class="nav-item nav-level-6"><a class="nav-link" href="#dom节点元素"><span class="nav-number">12.1.2.4.</span> <span class="nav-text">dom节点元素</span></a></li></ol></li></ol></li><li class="nav-item nav-level-4"><a class="nav-link" href="#DOM事件处理"><span class="nav-number">12.2.</span> <span class="nav-text">DOM事件处理</span></a><ol class="nav-child"><li class="nav-item nav-level-5"><a class="nav-link" href="#event对象"><span class="nav-number">12.2.1.</span> <span class="nav-text">event对象</span></a></li></ol></li><li class="nav-item nav-level-4"><a class="nav-link" href="#操作DOM"><span class="nav-number">12.3.</span> <span class="nav-text">操作DOM</span></a><ol class="nav-child"><li class="nav-item nav-level-5"><a class="nav-link" href="#创建节点"><span class="nav-number">12.3.1.</span> <span class="nav-text">创建节点</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#插入DOM"><span class="nav-number">12.3.2.</span> <span class="nav-text">插入DOM</span></a><ol class="nav-child"><li class="nav-item nav-level-6"><a class="nav-link" href="#appendChild"><span class="nav-number">12.3.2.1.</span> <span class="nav-text">appendChild</span></a></li><li class="nav-item nav-level-6"><a class="nav-link" href="#insertBefore"><span class="nav-number">12.3.2.2.</span> <span class="nav-text">insertBefore</span></a></li></ol></li><li class="nav-item nav-level-5"><a class="nav-link" href="#删除DOM"><span class="nav-number">12.3.3.</span> <span class="nav-text">删除DOM</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#更新DOM"><span class="nav-number">12.3.4.</span> <span class="nav-text">更新DOM</span></a><ol class="nav-child"><li class="nav-item nav-level-6"><a class="nav-link" href="#innerHTML"><span class="nav-number">12.3.4.1.</span> <span class="nav-text">innerHTML</span></a></li><li class="nav-item nav-level-6"><a class="nav-link" href="#write"><span class="nav-number">12.3.4.2.</span> <span class="nav-text">write</span></a></li><li class="nav-item nav-level-6"><a class="nav-link" href="#innerText"><span class="nav-number">12.3.4.3.</span> <span class="nav-text">innerText</span></a></li><li class="nav-item nav-level-6"><a class="nav-link" href="#textContent"><span class="nav-number">12.3.4.4.</span> <span class="nav-text">textContent</span></a></li></ol></li><li class="nav-item nav-level-5"><a class="nav-link" href="#查询DOM"><span class="nav-number">12.3.5.</span> <span class="nav-text">查询DOM</span></a><ol class="nav-child"><li class="nav-item nav-level-6"><a class="nav-link" href="#操作方法"><span class="nav-number">12.3.5.1.</span> <span class="nav-text">操作方法</span></a></li><li class="nav-item nav-level-6"><a class="nav-link" href="#【注意】"><span class="nav-number">12.3.5.2.</span> <span class="nav-text">【注意】</span></a></li><li class="nav-item nav-level-6"><a class="nav-link" href="#遍历节点"><span class="nav-number">12.3.5.3.</span> <span class="nav-text">遍历节点</span></a></li><li class="nav-item nav-level-6"><a class="nav-link" href="#dom宽高"><span class="nav-number">12.3.5.4.</span> <span class="nav-text">dom宽高</span></a></li></ol></li><li class="nav-item nav-level-5"><a class="nav-link" href="#Dom相关方法"><span class="nav-number">12.3.6.</span> <span class="nav-text">Dom相关方法</span></a><ol class="nav-child"><li class="nav-item nav-level-6"><a class="nav-link" href="#属性"><span class="nav-number">12.3.6.1.</span> <span class="nav-text">属性</span></a></li></ol></li></ol></li><li class="nav-item nav-level-4"><a class="nav-link" href="#操作表单"><span class="nav-number">12.4.</span> <span class="nav-text">操作表单</span></a><ol class="nav-child"><li class="nav-item nav-level-5"><a class="nav-link" href="#表单输入控件"><span class="nav-number">12.4.1.</span> <span class="nav-text">表单输入控件</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#控件值"><span class="nav-number">12.4.2.</span> <span class="nav-text">控件值</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#提交表单"><span class="nav-number">12.4.3.</span> <span class="nav-text">提交表单</span></a><ol class="nav-child"><li class="nav-item nav-level-6"><a class="nav-link" href="#响应onsubmit"><span class="nav-number">12.4.3.1.</span> <span class="nav-text">响应onsubmit</span></a></li><li class="nav-item nav-level-6"><a class="nav-link" href="#点击事件提交"><span class="nav-number">12.4.3.2.</span> <span class="nav-text">点击事件提交</span></a></li><li class="nav-item nav-level-6"><a class="nav-link" href="#实例-2"><span class="nav-number">12.4.3.3.</span> <span class="nav-text">实例</span></a></li></ol></li></ol></li><li class="nav-item nav-level-4"><a class="nav-link" href="#操作文件"><span class="nav-number">12.5.</span> <span class="nav-text">操作文件</span></a><ol class="nav-child"><li class="nav-item nav-level-5"><a class="nav-link" href="#普通文件"><span class="nav-number">12.5.1.</span> <span class="nav-text">普通文件</span></a><ol class="nav-child"><li class="nav-item nav-level-6"><a class="nav-link" href="#特点-2"><span class="nav-number">12.5.1.1.</span> <span class="nav-text">特点</span></a></li><li class="nav-item nav-level-6"><a class="nav-link" href="#文件信息"><span class="nav-number">12.5.1.2.</span> <span class="nav-text">文件信息</span></a></li></ol></li><li class="nav-item nav-level-5"><a class="nav-link" href="#HTML5-File"><span class="nav-number">12.5.2.</span> <span class="nav-text">HTML5 File</span></a><ol class="nav-child"><li class="nav-item nav-level-6"><a class="nav-link" href="#File"><span class="nav-number">12.5.2.1.</span> <span class="nav-text">File</span></a></li><li class="nav-item nav-level-6"><a class="nav-link" href="#FileReader"><span class="nav-number">12.5.2.2.</span> <span class="nav-text">FileReader</span></a></li><li class="nav-item nav-level-6"><a class="nav-link" href="#实例-3"><span class="nav-number">12.5.2.3.</span> <span class="nav-text">实例</span></a></li></ol></li></ol></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Ajax"><span class="nav-number">13.</span> <span class="nav-text">Ajax</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#XMLHttpRequest"><span class="nav-number">13.1.</span> <span class="nav-text">XMLHttpRequest</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#ajax使用"><span class="nav-number">13.2.</span> <span class="nav-text">ajax使用</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#跨域"><span class="nav-number">13.3.</span> <span class="nav-text">跨域</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Promise"><span class="nav-number">14.</span> <span class="nav-text">Promise</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#概念-6"><span class="nav-number">14.1.</span> <span class="nav-text">概念</span></a><ol class="nav-child"><li class="nav-item nav-level-5"><a class="nav-link" href="#语法格式"><span class="nav-number">14.1.1.</span> <span class="nav-text">语法格式</span></a></li></ol></li><li class="nav-item nav-level-4"><a class="nav-link" href="#异步任务"><span class="nav-number">14.2.</span> <span class="nav-text">异步任务</span></a><ol class="nav-child"><li class="nav-item nav-level-5"><a class="nav-link" href="#单异步任务"><span class="nav-number">14.2.1.</span> <span class="nav-text">单异步任务</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#串异步任务"><span class="nav-number">14.2.2.</span> <span class="nav-text">串异步任务</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#并行异步任务"><span class="nav-number">14.2.3.</span> <span class="nav-text">并行异步任务</span></a><ol class="nav-child"><li class="nav-item nav-level-6"><a class="nav-link" href="#Promise-all"><span class="nav-number">14.2.3.1.</span> <span class="nav-text">Promise.all</span></a></li><li class="nav-item nav-level-6"><a class="nav-link" href="#Promise-race"><span class="nav-number">14.2.3.2.</span> <span class="nav-text">Promise.race</span></a></li></ol></li></ol></li><li class="nav-item nav-level-4"><a class="nav-link" href="#执行ajax"><span class="nav-number">14.3.</span> <span class="nav-text">执行ajax</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#fetch"><span class="nav-number">15.</span> <span class="nav-text">fetch</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#对比ajax"><span class="nav-number">15.1.</span> <span class="nav-text">对比ajax</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#fetch语法"><span class="nav-number">15.2.</span> <span class="nav-text">fetch语法</span></a><ol class="nav-child"><li class="nav-item nav-level-5"><a class="nav-link" href="#Request对象"><span class="nav-number">15.2.1.</span> <span class="nav-text">Request对象</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#Response对象"><span class="nav-number">15.2.2.</span> <span class="nav-text">Response对象</span></a><ol class="nav-child"><li class="nav-item nav-level-6"><a class="nav-link" href="#创建Response"><span class="nav-number">15.2.2.1.</span> <span class="nav-text">创建Response</span></a></li><li class="nav-item nav-level-6"><a class="nav-link" href="#response常见属性"><span class="nav-number">15.2.2.2.</span> <span class="nav-text">response常见属性</span></a></li></ol></li><li class="nav-item nav-level-5"><a class="nav-link" href="#Headers"><span class="nav-number">15.2.3.</span> <span class="nav-text">Headers</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#Body"><span class="nav-number">15.2.4.</span> <span class="nav-text">Body</span></a></li></ol></li><li class="nav-item nav-level-4"><a class="nav-link" href="#请求示例"><span class="nav-number">15.3.</span> <span class="nav-text">请求示例</span></a><ol class="nav-child"><li class="nav-item nav-level-5"><a class="nav-link" href="#Get请求"><span class="nav-number">15.3.1.</span> <span class="nav-text">Get请求</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#Get请求-带参数"><span class="nav-number">15.3.2.</span> <span class="nav-text">Get请求-带参数</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#post请求-body形式"><span class="nav-number">15.3.3.</span> <span class="nav-text">post请求-body形式</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#post请求-FormData形式"><span class="nav-number">15.3.4.</span> <span class="nav-text">post请求-FormData形式</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#post请求-form-data提交文件文字"><span class="nav-number">15.3.5.</span> <span class="nav-text">post请求-form-data提交文件文字</span></a></li></ol></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Generator"><span class="nav-number">16.</span> <span class="nav-text">Generator</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#概述-7"><span class="nav-number">16.1.</span> <span class="nav-text">概述</span></a><ol class="nav-child"><li class="nav-item nav-level-5"><a class="nav-link" href="#基本示例"><span class="nav-number">16.1.1.</span> <span class="nav-text">基本示例</span></a></li></ol></li><li class="nav-item nav-level-4"><a class="nav-link" href="#使用方式"><span class="nav-number">16.2.</span> <span class="nav-text">使用方式</span></a><ol class="nav-child"><li class="nav-item nav-level-5"><a class="nav-link" href="#实例-4"><span class="nav-number">16.2.1.</span> <span class="nav-text">实例</span></a></li></ol></li><li class="nav-item nav-level-4"><a class="nav-link" href="#执行异步任务"><span class="nav-number">16.3.</span> <span class="nav-text">执行异步任务</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#异步"><span class="nav-number">17.</span> <span class="nav-text">异步</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#语法-2"><span class="nav-number">17.1.</span> <span class="nav-text">语法</span></a><ol class="nav-child"><li class="nav-item nav-level-5"><a class="nav-link" href="#四种写法"><span class="nav-number">17.1.1.</span> <span class="nav-text">四种写法</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#错误处理"><span class="nav-number">17.1.2.</span> <span class="nav-text">错误处理</span></a></li></ol></li><li class="nav-item nav-level-4"><a class="nav-link" href="#fetch-1"><span class="nav-number">17.2.</span> <span class="nav-text">fetch</span></a><ol class="nav-child"><li class="nav-item nav-level-5"><a class="nav-link" href="#处理单个异步任务"><span class="nav-number">17.2.1.</span> <span class="nav-text">处理单个异步任务</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#顺序处理多个异步任务"><span class="nav-number">17.2.2.</span> <span class="nav-text">顺序处理多个异步任务</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#并行处理多个异步任务"><span class="nav-number">17.2.3.</span> <span class="nav-text">并行处理多个异步任务</span></a></li></ol></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#错误处理-1"><span class="nav-number">18.</span> <span class="nav-text">错误处理</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#捕获异常"><span class="nav-number">18.1.</span> <span class="nav-text">捕获异常</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#错误类型"><span class="nav-number">18.2.</span> <span class="nav-text">错误类型</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#抛出错误"><span class="nav-number">18.3.</span> <span class="nav-text">抛出错误</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#参考"><span class="nav-number">19.</span> <span class="nav-text">参考</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#计时操作"><span class="nav-number">19.1.</span> <span class="nav-text">计时操作</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#全局函数"><span class="nav-number">19.2.</span> <span class="nav-text">全局函数</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#常见事件"><span class="nav-number">19.3.</span> <span class="nav-text">常见事件</span></a></li></ol></li></ol></div>
            

          </div>
        </section>
      <!--/noindex-->
      

      

    </div>
  </aside>


        
      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="footer-inner">
        <div class="copyright">
  
  &copy; 
  <span itemprop="copyrightYear">2019</span>
  <span class="with-love">
    <i class="fa fa-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">ethancalc</span>

  
</div>


  <div class="powered-by">由 <a class="theme-link" href="https://hexo.io">Hexo</a> 强力驱动</div>

  <span class="post-meta-divider">|</span>

  <div class="theme-info">主题 &mdash; <a class="theme-link" href="https://github.com/iissnan/hexo-theme-next">NexT.Mist</a> v5.1.2</div>


        







        
      </div>
    </footer>

    
      <div class="back-to-top">
        <i class="fa fa-arrow-up"></i>
        
      </div>
    

  </div>

  

<script type="text/javascript">
  if (Object.prototype.toString.call(window.Promise) !== '[object Function]') {
    window.Promise = null;
  }
</script>









  












  
  <script type="text/javascript" src="/lib/jquery/index.js?v=2.1.3"></script>

  
  <script type="text/javascript" src="/lib/fastclick/lib/fastclick.min.js?v=1.0.6"></script>

  
  <script type="text/javascript" src="/lib/jquery_lazyload/jquery.lazyload.js?v=1.9.7"></script>

  
  <script type="text/javascript" src="/lib/velocity/velocity.min.js?v=1.2.1"></script>

  
  <script type="text/javascript" src="/lib/velocity/velocity.ui.min.js?v=1.2.1"></script>

  
  <script type="text/javascript" src="/lib/fancybox/source/jquery.fancybox.pack.js?v=2.1.5"></script>


  


  <script type="text/javascript" src="/js/src/utils.js?v=5.1.2"></script>

  <script type="text/javascript" src="/js/src/motion.js?v=5.1.2"></script>



  
  

  <script type="text/javascript" src="/js/src/scrollspy.js?v=5.1.2"></script>
<script type="text/javascript" src="/js/src/post-details.js?v=5.1.2"></script>


  
  <script type="text/javascript" src="/js/src/scrollspy.js?v=5.1.2"></script>
<script type="text/javascript" src="/js/src/post-details.js?v=5.1.2"></script>



  


  <script type="text/javascript" src="/js/src/bootstrap.js?v=5.1.2"></script>



  


  




	





  





  




  
    <script type="text/javascript">
    (function(){
      var appid = 'cytFhNP7b';
      var conf = 'a8f0e5bccaabb0580489df2a08f8a24f';
      var width = window.innerWidth || document.documentElement.clientWidth;
      if (width < 960) {
      window.document.write('<script id="changyan_mobile_js" charset="utf-8" type="text/javascript" src="https://changyan.sohu.com/upload/mobile/wap-js/changyan_mobile.js?client_id=' + appid + '&conf=' + conf + '"><\/script>'); } else { var loadJs=function(d,a){var c=document.getElementsByTagName("head")[0]||document.head||document.documentElement;var b=document.createElement("script");b.setAttribute("type","text/javascript");b.setAttribute("charset","UTF-8");b.setAttribute("src",d);if(typeof a==="function"){if(window.attachEvent){b.onreadystatechange=function(){var e=b.readyState;if(e==="loaded"||e==="complete"){b.onreadystatechange=null;a()}}}else{b.onload=a}}c.appendChild(b)};loadJs("https://changyan.sohu.com/upload/changyan.js",function(){
        window.changyan.api.config({appid:appid,conf:conf})});
      }
    })();
    </script>
    <script type="text/javascript" src="https://assets.changyan.sohu.com/upload/plugins/plugins.count.js"></script>
  





  

  <script type="text/javascript">
    // Popup Window;
    var isfetched = false;
    var isXml = true;
    // Search DB path;
    var search_path = "search.xml";
    if (search_path.length === 0) {
      search_path = "search.xml";
    } else if (/json$/i.test(search_path)) {
      isXml = false;
    }
    var path = "/" + search_path;
    // monitor main search box;

    var onPopupClose = function (e) {
      $('.popup').hide();
      $('#local-search-input').val('');
      $('.search-result-list').remove();
      $('#no-result').remove();
      $(".local-search-pop-overlay").remove();
      $('body').css('overflow', '');
    }

    function proceedsearch() {
      $("body")
        .append('<div class="search-popup-overlay local-search-pop-overlay"></div>')
        .css('overflow', 'hidden');
      $('.search-popup-overlay').click(onPopupClose);
      $('.popup').toggle();
      var $localSearchInput = $('#local-search-input');
      $localSearchInput.attr("autocapitalize", "none");
      $localSearchInput.attr("autocorrect", "off");
      $localSearchInput.focus();
    }

    // search function;
    var searchFunc = function(path, search_id, content_id) {
      'use strict';

      // start loading animation
      $("body")
        .append('<div class="search-popup-overlay local-search-pop-overlay">' +
          '<div id="search-loading-icon">' +
          '<i class="fa fa-spinner fa-pulse fa-5x fa-fw"></i>' +
          '</div>' +
          '</div>')
        .css('overflow', 'hidden');
      $("#search-loading-icon").css('margin', '20% auto 0 auto').css('text-align', 'center');

      $.ajax({
        url: path,
        dataType: isXml ? "xml" : "json",
        async: true,
        success: function(res) {
          // get the contents from search data
          isfetched = true;
          $('.popup').detach().appendTo('.header-inner');
          var datas = isXml ? $("entry", res).map(function() {
            return {
              title: $("title", this).text(),
              content: $("content",this).text(),
              url: $("url" , this).text()
            };
          }).get() : res;
          var input = document.getElementById(search_id);
          var resultContent = document.getElementById(content_id);
          var inputEventFunction = function() {
            var searchText = input.value.trim().toLowerCase();
            var keywords = searchText.split(/[\s\-]+/);
            if (keywords.length > 1) {
              keywords.push(searchText);
            }
            var resultItems = [];
            if (searchText.length > 0) {
              // perform local searching
              datas.forEach(function(data) {
                var isMatch = false;
                var hitCount = 0;
                var searchTextCount = 0;
                var title = data.title.trim();
                var titleInLowerCase = title.toLowerCase();
                var content = data.content.trim().replace(/<[^>]+>/g,"");
                var contentInLowerCase = content.toLowerCase();
                var articleUrl = decodeURIComponent(data.url);
                var indexOfTitle = [];
                var indexOfContent = [];
                // only match articles with not empty titles
                if(title != '') {
                  keywords.forEach(function(keyword) {
                    function getIndexByWord(word, text, caseSensitive) {
                      var wordLen = word.length;
                      if (wordLen === 0) {
                        return [];
                      }
                      var startPosition = 0, position = [], index = [];
                      if (!caseSensitive) {
                        text = text.toLowerCase();
                        word = word.toLowerCase();
                      }
                      while ((position = text.indexOf(word, startPosition)) > -1) {
                        index.push({position: position, word: word});
                        startPosition = position + wordLen;
                      }
                      return index;
                    }

                    indexOfTitle = indexOfTitle.concat(getIndexByWord(keyword, titleInLowerCase, false));
                    indexOfContent = indexOfContent.concat(getIndexByWord(keyword, contentInLowerCase, false));
                  });
                  if (indexOfTitle.length > 0 || indexOfContent.length > 0) {
                    isMatch = true;
                    hitCount = indexOfTitle.length + indexOfContent.length;
                  }
                }

                // show search results

                if (isMatch) {
                  // sort index by position of keyword

                  [indexOfTitle, indexOfContent].forEach(function (index) {
                    index.sort(function (itemLeft, itemRight) {
                      if (itemRight.position !== itemLeft.position) {
                        return itemRight.position - itemLeft.position;
                      } else {
                        return itemLeft.word.length - itemRight.word.length;
                      }
                    });
                  });

                  // merge hits into slices

                  function mergeIntoSlice(text, start, end, index) {
                    var item = index[index.length - 1];
                    var position = item.position;
                    var word = item.word;
                    var hits = [];
                    var searchTextCountInSlice = 0;
                    while (position + word.length <= end && index.length != 0) {
                      if (word === searchText) {
                        searchTextCountInSlice++;
                      }
                      hits.push({position: position, length: word.length});
                      var wordEnd = position + word.length;

                      // move to next position of hit

                      index.pop();
                      while (index.length != 0) {
                        item = index[index.length - 1];
                        position = item.position;
                        word = item.word;
                        if (wordEnd > position) {
                          index.pop();
                        } else {
                          break;
                        }
                      }
                    }
                    searchTextCount += searchTextCountInSlice;
                    return {
                      hits: hits,
                      start: start,
                      end: end,
                      searchTextCount: searchTextCountInSlice
                    };
                  }

                  var slicesOfTitle = [];
                  if (indexOfTitle.length != 0) {
                    slicesOfTitle.push(mergeIntoSlice(title, 0, title.length, indexOfTitle));
                  }

                  var slicesOfContent = [];
                  while (indexOfContent.length != 0) {
                    var item = indexOfContent[indexOfContent.length - 1];
                    var position = item.position;
                    var word = item.word;
                    // cut out 100 characters
                    var start = position - 20;
                    var end = position + 80;
                    if(start < 0){
                      start = 0;
                    }
                    if (end < position + word.length) {
                      end = position + word.length;
                    }
                    if(end > content.length){
                      end = content.length;
                    }
                    slicesOfContent.push(mergeIntoSlice(content, start, end, indexOfContent));
                  }

                  // sort slices in content by search text's count and hits' count

                  slicesOfContent.sort(function (sliceLeft, sliceRight) {
                    if (sliceLeft.searchTextCount !== sliceRight.searchTextCount) {
                      return sliceRight.searchTextCount - sliceLeft.searchTextCount;
                    } else if (sliceLeft.hits.length !== sliceRight.hits.length) {
                      return sliceRight.hits.length - sliceLeft.hits.length;
                    } else {
                      return sliceLeft.start - sliceRight.start;
                    }
                  });

                  // select top N slices in content

                  var upperBound = parseInt('1');
                  if (upperBound >= 0) {
                    slicesOfContent = slicesOfContent.slice(0, upperBound);
                  }

                  // highlight title and content

                  function highlightKeyword(text, slice) {
                    var result = '';
                    var prevEnd = slice.start;
                    slice.hits.forEach(function (hit) {
                      result += text.substring(prevEnd, hit.position);
                      var end = hit.position + hit.length;
                      result += '<b class="search-keyword">' + text.substring(hit.position, end) + '</b>';
                      prevEnd = end;
                    });
                    result += text.substring(prevEnd, slice.end);
                    return result;
                  }

                  var resultItem = '';

                  if (slicesOfTitle.length != 0) {
                    resultItem += "<li><a href='" + articleUrl + "' class='search-result-title'>" + highlightKeyword(title, slicesOfTitle[0]) + "</a>";
                  } else {
                    resultItem += "<li><a href='" + articleUrl + "' class='search-result-title'>" + title + "</a>";
                  }

                  slicesOfContent.forEach(function (slice) {
                    resultItem += "<a href='" + articleUrl + "'>" +
                      "<p class=\"search-result\">" + highlightKeyword(content, slice) +
                      "...</p>" + "</a>";
                  });

                  resultItem += "</li>";
                  resultItems.push({
                    item: resultItem,
                    searchTextCount: searchTextCount,
                    hitCount: hitCount,
                    id: resultItems.length
                  });
                }
              })
            };
            if (keywords.length === 1 && keywords[0] === "") {
              resultContent.innerHTML = '<div id="no-result"><i class="fa fa-search fa-5x" /></div>'
            } else if (resultItems.length === 0) {
              resultContent.innerHTML = '<div id="no-result"><i class="fa fa-frown-o fa-5x" /></div>'
            } else {
              resultItems.sort(function (resultLeft, resultRight) {
                if (resultLeft.searchTextCount !== resultRight.searchTextCount) {
                  return resultRight.searchTextCount - resultLeft.searchTextCount;
                } else if (resultLeft.hitCount !== resultRight.hitCount) {
                  return resultRight.hitCount - resultLeft.hitCount;
                } else {
                  return resultRight.id - resultLeft.id;
                }
              });
              var searchResultList = '<ul class=\"search-result-list\">';
              resultItems.forEach(function (result) {
                searchResultList += result.item;
              })
              searchResultList += "</ul>";
              resultContent.innerHTML = searchResultList;
            }
          }

          if ('auto' === 'auto') {
            input.addEventListener('input', inputEventFunction);
          } else {
            $('.search-icon').click(inputEventFunction);
            input.addEventListener('keypress', function (event) {
              if (event.keyCode === 13) {
                inputEventFunction();
              }
            });
          }

          // remove loading animation
          $(".local-search-pop-overlay").remove();
          $('body').css('overflow', '');

          proceedsearch();
        }
      });
    }

    // handle and trigger popup window;
    $('.popup-trigger').click(function(e) {
      e.stopPropagation();
      if (isfetched === false) {
        searchFunc(path, 'local-search-input', 'local-search-result');
      } else {
        proceedsearch();
      };
    });

    $('.popup-btn-close').click(onPopupClose);
    $('.popup').click(function(e){
      e.stopPropagation();
    });
    $(document).on('keyup', function (event) {
      var shouldDismissSearchPopup = event.which === 27 &&
        $('.search-popup').is(':visible');
      if (shouldDismissSearchPopup) {
        onPopupClose();
      }
    });
  </script>





  

  

  

  
  
    <script type="text/x-mathjax-config">
      MathJax.Hub.Config({
        tex2jax: {
          inlineMath: [ ['$','$'], ["\\(","\\)"]  ],
          processEscapes: true,
          skipTags: ['script', 'noscript', 'style', 'textarea', 'pre', 'code']
        }
      });
    </script>

    <script type="text/x-mathjax-config">
      MathJax.Hub.Queue(function() {
        var all = MathJax.Hub.getAllJax(), i;
        for (i=0; i < all.length; i += 1) {
          all[i].SourceElement().parentNode.className += ' has-jax';
        }
      });
    </script>
    <script type="text/javascript" src="//cdn.bootcss.com/mathjax/2.7.1/latest.js?config=TeX-AMS-MML_HTMLorMML"></script>
  


  

  


<!-- 页面点击小红心 -->
<script type="text/javascript" src="/js/src/love.js"></script>
</body>
</html>

